<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apex Documentation</title>
  <style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  /* Base styles */
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-size: 17px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, sans-serif;
  line-height: 1.65;
  color: #1e293b;
  background-color: #fff;
}

/* Sidebar / Main TOC - wider on larger screens */
.main-toc,
.sidebar {
  position: fixed;
  left: 0;
  top: 0;
  width: auto;
  min-width: 180px;
  max-width: 250px;
  height: 100vh;
  overflow-y: auto;
  background: #1e293b;
  color: rgba(255, 255, 255, 0.9);
  border-right: 2px solid rgba(255, 255, 255, 0.1);
  padding: 24px 20px 130px;
  font-size: 14px;
  z-index: 100;
  margin-right: 1rem;
  box-shadow: 4px 0 24px rgba(0, 0, 0, 0.08);
  transition: transform 0.3s ease;
}

.main-toc ul,
.sidebar ul {
  list-style: none;
  padding-left: 0;
  margin: 0;
  padding-bottom: 80px;
}

.main-toc ul::after,
.sidebar ul::after {
  content: "";
  display: block;
  height: 80px;
}

.main-toc li,
.sidebar li {
  margin: 0.25em 0;
}

.main-toc a,
.sidebar a {
  color: rgba(255, 255, 255, 0.85);
  text-decoration: none;
  display: block;
  padding: 6px 12px;
  border-radius: 4px;
  transition: all 0.15s ease;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.main-toc a:hover,
.sidebar a:hover {
  background: #334155;
  color: #fff;
}

.sidebar a.active {
  color: #0ea5e9;
  font-weight: 500;
}

/* Body margin for sidebar */
body {
  margin-left: 270px;
}

/* Hamburger menu button */
.hamburger-menu {
  display: none;
  position: fixed;
  top: 12px;
  left: 12px;
  z-index: 200;
  background: #1e293b;
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  padding: 10px;
  cursor: pointer;
  color: rgba(255, 255, 255, 0.9);
  font-size: 20px;
  line-height: 1;
  width: 44px;
  height: 44px;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  transition: all 0.2s ease;
  opacity: 0.2;
}

.hamburger-menu:hover {
  background: #334155;
  color: #fff;
  opacity: 1;
}

/* Move hamburger to the right of the sidebar when menu is open */
.hamburger-menu.active {
  left: calc(
    250px + 12px
  ); /* Position just to the right of sidebar (max-width 250px + 12px padding) */
}

.hamburger-menu.active {
  background: #0ea5e9;
}

.hamburger-menu::before {
  content: "☰";
}

.hamburger-menu.active::before {
  content: "✕";
}

/* Mobile menu overlay */
.mobile-menu-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 150;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

.mobile-menu-overlay.active {
  opacity: 1;
  visibility: visible;
}

/* Page TOC */
.page-toc {
  background: #f9f9f9;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 1rem;
  margin: 1.5rem 0;
}

.page-toc ul {
  list-style: none;
  padding-left: 0;
  margin: 0;
}

.page-toc > ul {
  padding-left: 0;
}

.page-toc li {
  margin: 0.25em 0;
}

.page-toc a {
  color: #0066cc;
  text-decoration: none;
  display: block;
  padding: 0.25em 0.5em;
  border-radius: 3px;
}

.page-toc a:hover {
  background: #e0e0e0;
  color: #004499;
}

.page-toc ul ul {
  list-style: none;
  padding-left: 1.5em;
  margin-top: 0.25em;
  margin-left: 0;
}

.page-toc ul ul ul {
  padding-left: 1.5em;
}

.page-toc ul ul a {
  font-size: 0.9em;
  color: #555;
}

.page-toc ul ul ul a {
  font-size: 0.85em;
  color: #666;
}

/* Floating TOC */
.floating-toc {
  position: fixed;
  top: 0;
  left: 270px;
  right: 0;
  z-index: 50;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease, visibility 0.2s ease;
  pointer-events: none;
  display: flex;
  justify-content: flex-end;
  padding-right: 2rem;
}

.floating-toc.visible {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

.floating-toc-container {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid #ddd;
  border-radius: 0 0 12px 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  width: fit-content;
  max-width: 400px;
  min-width: 200px;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.floating-toc-header {
  padding: 8px 16px;
  cursor: pointer;
  user-select: none;
  font-size: 14px;
  font-weight: 500;
  color: #1e293b;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.floating-toc-header:hover {
  background: rgba(0, 0, 0, 0.02);
}

.floating-toc-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.floating-toc-container:hover .floating-toc-content {
  max-height: 70vh;
  overflow-y: auto;
}

.floating-toc-content ul {
  list-style: none;
  padding: 8px 16px 16px;
  margin: 0;
}

.floating-toc-content li {
  margin: 0.1em 0;
}

.floating-toc-content a {
  color: #0066cc;
  text-decoration: none;
  display: block;
  padding: 0.2em 0.5em;
  border-radius: 4px;
  font-size: 13px;
  transition: background 0.15s ease;
}

.floating-toc-content a:hover {
  background: #e0e0e0;
  color: #004499;
}

.floating-toc-content ul ul {
  padding-left: 1.2em;
  margin-top: 0;
  margin-bottom: 0;
}

.floating-toc-content ul ul ul {
  margin-top: 0;
  margin-bottom: 0;
}

.floating-toc-content ul ul a {
  font-size: 12px;
  color: #555;
}

.floating-toc-content ul ul ul a {
  font-size: 11px;
  color: #666;
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

/* Code blocks */
code {
  background: #f0f0f0;
  padding: 0.2em 0.4em;
  border-radius: 3px;
  font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
  font-size: 0.9em;
  margin: 0 0.1em;
}

pre {
  background: #f5f5f5;
  padding: 1rem;
  overflow-x: auto;
  border-radius: 4px;
  margin: 1em 0;
}

pre code {
  background: none;
  padding: 0;
  margin: 0;
}

/* Rouge syntax highlighting - GitHub theme, scoped to .highlight containers */
.highlight {
  color: #24292e;
}

.highlight .c {
  color: #6a737d;
  font-style: italic;
} /* Comment */
.highlight .err {
  color: #a61717;
  background-color: #e3d2d2;
} /* Error */
.highlight .k {
  color: #d73a49;
  font-weight: bold;
} /* Keyword */
.highlight .l {
  color: #032f62;
} /* Literal */
.highlight .n {
  color: #24292e;
} /* Name */
.highlight .o {
  color: #d73a49;
} /* Operator */
.highlight .p {
  color: #24292e;
} /* Punctuation */
.highlight .cm {
  color: #6a737d;
  font-style: italic;
} /* Comment.Multiline */
.highlight .cp {
  color: #6a737d;
  font-weight: bold;
} /* Comment.Preproc */
.highlight .c1 {
  color: #6a737d;
  font-style: italic;
} /* Comment.Single */
.highlight .cs {
  color: #6a737d;
  font-weight: bold;
  font-style: italic;
} /* Comment.Special */
.highlight .gd {
  color: #24292e;
  background-color: #ffeef0;
} /* Generic.Deleted */
.highlight .ge {
  color: #24292e;
  font-style: italic;
} /* Generic.Emph */
.highlight .gr {
  color: #aa0000;
} /* Generic.Error */
.highlight .gh {
  color: #999999;
  font-weight: bold;
} /* Generic.Heading */
.highlight .gi {
  color: #24292e;
  background-color: #f0fff4;
} /* Generic.Inserted */
.highlight .go {
  color: #888888;
} /* Generic.Output */
.highlight .gp {
  color: #555555;
} /* Generic.Prompt */
.highlight .gs {
  font-weight: bold;
} /* Generic.Strong */
.highlight .gu {
  color: #aaaaaa;
} /* Generic.Subheading */
.highlight .gt {
  color: #aa0000;
} /* Generic.Traceback */
.highlight .kc {
  color: #d73a49;
  font-weight: bold;
} /* Keyword.Constant */
.highlight .kd {
  color: #d73a49;
  font-weight: bold;
} /* Keyword.Declaration */
.highlight .kn {
  color: #d73a49;
  font-weight: bold;
} /* Keyword.Namespace */
.highlight .kp {
  color: #d73a49;
  font-weight: bold;
} /* Keyword.Pseudo */
.highlight .kr {
  color: #d73a49;
  font-weight: bold;
} /* Keyword.Reserved */
.highlight .kt {
  color: #d73a49;
  font-weight: bold;
} /* Keyword.Type */
.highlight .ld {
  color: #032f62;
} /* Literal.Date */
.highlight .m {
  color: #005cc5;
} /* Literal.Number */
.highlight .s {
  color: #032f62;
} /* Literal.String */
.highlight .na {
  color: #6f42c1;
} /* Name.Attribute */
.highlight .nb {
  color: #005cc5;
} /* Name.Builtin */
.highlight .nc {
  color: #6f42c1;
  font-weight: bold;
} /* Name.Class */
.highlight .no {
  color: #005cc5;
} /* Name.Constant */
.highlight .nd {
  color: #6f42c1;
  font-weight: bold;
} /* Name.Decorator */
.highlight .ni {
  color: #800080;
} /* Name.Entity */
.highlight .ne {
  color: #990000;
  font-weight: bold;
} /* Name.Exception */
.highlight .nf {
  color: #6f42c1;
} /* Name.Function */
.highlight .nl {
  color: #990000;
} /* Name.Label */
.highlight .nn {
  color: #555555;
} /* Name.Namespace */
.highlight .nx {
  color: #6f42c1;
} /* Name.Other */
.highlight .py {
  color: #990000;
} /* Name.Property */
.highlight .nt {
  color: #22863a;
} /* Name.Tag */
.highlight .nv {
  color: #e36209;
} /* Name.Variable */
.highlight .ow {
  color: #d73a49;
  font-weight: bold;
} /* Operator.Word */
.highlight .w {
  color: #bbbbbb;
} /* Text.Whitespace */
.highlight .mf {
  color: #005cc5;
} /* Literal.Number.Float */
.highlight .mh {
  color: #005cc5;
} /* Literal.Number.Hex */
.highlight .mi {
  color: #005cc5;
} /* Literal.Number.Integer */
.highlight .mo {
  color: #005cc5;
} /* Literal.Number.Oct */
.highlight .sb {
  color: #032f62;
} /* Literal.String.Backtick */
.highlight .sc {
  color: #032f62;
} /* Literal.String.Char */
.highlight .sd {
  color: #032f62;
} /* Literal.String.Doc */
.highlight .s2 {
  color: #032f62;
} /* Literal.String.Double */
.highlight .se {
  color: #032f62;
} /* Literal.String.Escape */
.highlight .sh {
  color: #032f62;
} /* Literal.String.Heredoc */
.highlight .si {
  color: #032f62;
} /* Literal.String.Interpol */
.highlight .sx {
  color: #032f62;
} /* Literal.String.Other */
.highlight .sr {
  color: #22863a;
} /* Literal.String.Regex */
.highlight .s1 {
  color: #032f62;
} /* Literal.String.Single */
.highlight .ss {
  color: #032f62;
} /* Literal.String.Symbol */
.highlight .bp {
  color: #005cc5;
} /* Name.Builtin.Pseudo */
.highlight .vc {
  color: #e36209;
} /* Name.Variable.Class */
.highlight .vg {
  color: #e36209;
} /* Name.Variable.Global */
.highlight .vi {
  color: #e36209;
} /* Name.Variable.Instance */
.highlight .il {
  color: #005cc5;
} /* Literal.Number.Integer.Long */

/* Additional Rouge token classes that may be used */
.highlight .token {
  color: #5670a0;
}
.highlight .token.list {
  color: #546e9f;
}
.highlight .token.punctuation {
  color: #3e8dad;
}
.highlight .token.list.punctuation {
  color: #e05b78;
}
.highlight .token.content {
  padding: 0;
}

/* Nested lists in page content */
ul ul,
ol ol,
ul ol,
ol ul {
  padding-left: 1.5em;
  margin-top: 0.25em;
}

/* Page footer */
.page-footer {
  background: #f5f5f5;
  border-top: 1px solid #ddd;
  padding: 1.5rem;
  margin-top: 3rem;
  color: #666;
  font-size: 0.9em;
}

.page-footer p {
  margin: 0.5em 0;
}

.page-footer a {
  color: #0066cc;
  text-decoration: none;
}

.page-footer a:hover {
  text-decoration: underline;
}

/* Mobile responsive */
@media (max-width: 768px) {
  .hamburger-menu {
    display: flex;
  }

  .main-toc,
  .sidebar {
    transform: translateX(-100%);
    z-index: 175;
  }

  .main-toc.mobile-open,
  .sidebar.mobile-open {
    transform: translateX(0);
  }

  body {
    margin-left: 0;
  }

  .floating-toc {
    left: 0;
  }
}

  .content {
    padding: 2rem;
    max-width: 900px;
  }
  .page {
    display: none;
  }
  .page.active {
    display: block;
  }
  h1, h2, h3, h4, h5, h6 {
    margin-top: 1.5em;
    margin-bottom: 0.5em;
  }
  h1 {
    font-size: 2em;
    border-bottom: 2px solid #eee;
    padding-bottom: 0.3em;
  }
  h2 {
    font-size: 1.5em;
    border-bottom: 1px solid #eee;
    padding-bottom: 0.3em;
  }
  blockquote {
    border-left: 4px solid #ddd;
    margin: 0;
    padding-left: 1rem;
    color: #666;
  }
  table {
    border-collapse: collapse;
    width: 100%;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 0.5rem;
  }
  th {
    background: #f5f5f5;
  }
</style>

</head>
<body>
  <button class="hamburger-menu" id="hamburger-menu" aria-label="Toggle navigation"></button>
<div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>
<nav class="sidebar"><ul><li><a href="#home" data-page="home">Home</a></li><li><a href="#getting-started" data-page="getting-started">Getting Started</a></li><li><a href="#installation" data-page="installation">Installation</a></li><li><a href="#usage" data-page="usage">Usage</a></li><li><a href="#syntax" data-page="syntax">Syntax</a></li><li><a href="#inline-attribute-lists" data-page="inline-attribute-lists">Inline Attribute Lists</a></li><li><a href="#modes" data-page="modes">Modes</a></li><li><a href="#command-line-options" data-page="command-line-options">Command Line Options</a></li><li><a href="#multi-file-documents" data-page="multi-file-documents">Multi-file Documents</a></li><li><a href="#citations" data-page="citations">Citations</a></li><li><a href="#metadata-transforms" data-page="metadata-transforms">Metadata Transforms</a></li><li><a href="#pandoc-integration" data-page="pandoc-integration">Integrating with Pandoc</a></li><li><a href="#header-ids" data-page="header-ids">Header IDs</a></li><li><a href="#c-api" data-page="c-api">C API</a></li><li><a href="#xcode-integration" data-page="xcode-integration">Xcode Integration</a></li><li><a href="#examples" data-page="examples">Examples</a></li><li><a href="#plugins" data-page="plugins">Plugins</a></li><li><a href="#troubleshooting" data-page="troubleshooting">Troubleshooting</a></li><li><a href="#credits" data-page="credits">Credits</a></li></ul></nav>
  <div class="content"><div id="page-home" class="page">

    <h1 id="apex-wiki">
      Apex Wiki
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#apex-wiki">Apex Wiki</a><ul><li><a href="#quick-links">Quick Links</a></li><li><a href="#what-is-apex">What is Apex?</a></li><li><a href="#key-features">Key Features</a></li><li><a href="#quick-example">Quick Example</a></li></ul></li></ul></nav>

    <p>
<a href="mailto:!%5B%5D(apex-header-2-rb@2x.webp)"><img src="apex-header-2-rb@2x.webp" alt="" /></a>    </p>

    <p>
      Welcome to the Apex documentation wiki! Apex is a unified Markdown processor that combines the best features from CommonMark, GitHub Flavored Markdown (GFM), MultiMarkdown, Kramdown, and Marked.
    </p>

    <h2 id="quick-links">
      Quick Links
    </h2>

    <ul>

      <li>
<strong><a href="#getting-started" onclick="showPage('getting-started'); return false;">        Getting Started</a></strong> - Your first steps with Apex
      </li>

      <li>
<strong><a href="#installation" onclick="showPage('installation'); return false;">        Installation</a></strong> - How to build and install Apex
      </li>

      <li>
<strong><a href="#usage" onclick="showPage('usage'); return false;">        Usage</a></strong> - Basic usage examples
      </li>

      <li>
<strong><a href="#syntax" onclick="showPage('syntax'); return false;">        Syntax</a></strong> - Complete syntax reference for unified mode
      </li>

      <li>
<strong><a href="#modes" onclick="showPage('modes'); return false;">        Modes</a></strong> - Understanding processor modes
      </li>

      <li>
<strong><a href="#command-line-options" onclick="showPage('command-line-options'); return false;">        Command Line Options</a></strong> - All CLI flags explained
      </li>

      <li>
<strong><a href="#multi-file-documents" onclick="showPage('multi-file-documents'); return false;">        Multi-file Documents</a></strong> - Combining multiple files with <code>--combine</code>, <code>--mmd-merge</code>, and includes
      </li>

      <li>
<strong><a href="#metadata-transforms" onclick="showPage('metadata-transforms'); return false;">        Metadata Transforms</a></strong> - Transform metadata values with <code>[%key:transform]</code>
      </li>

      <li>
<strong><a href="#pandoc-integration" onclick="showPage('pandoc-integration'); return false;">        Integrating with Pandoc</a></strong> - Use Apex with Pandoc for DOCX, PDF, and more
      </li>

      <li>
<strong><a href="#header-ids" onclick="showPage('header-ids'); return false;">        Header IDs</a></strong> - How header IDs are generated
      </li>

      <li>
<strong><a href="#c-api" onclick="showPage('c-api'); return false;">        C API</a></strong> - Programmatic API documentation
      </li>

      <li>
<strong><a href="#xcode-integration" onclick="showPage('xcode-integration'); return false;">        Xcode Integration</a></strong> - Using Apex in Xcode projects
      </li>

      <li>
<strong><a href="#examples" onclick="showPage('examples'); return false;">        Examples</a></strong> - Practical usage examples
      </li>

      <li>
<strong><a href="#troubleshooting" onclick="showPage('troubleshooting'); return false;">        Troubleshooting</a></strong> - Common issues and solutions
      </li>

      <li>
<strong><a href="#credits" onclick="showPage('credits'); return false;">        Credits</a></strong> - Acknowledgments and links to related projects
      </li>

      <li>
<strong><a href="#plugins" onclick="showPage('plugins'); return false;">        Plugins</a></strong> - Plugin system, examples, and recipes
      </li>

    </ul>

    <h2 id="what-is-apex">
      What is Apex?
    </h2>

    <p>
      Apex is a fast, C-based Markdown processor that supports multiple compatibility modes:
    </p>

    <ul>

      <li>
<strong>        CommonMark</strong> - Pure CommonMark specification
      </li>

      <li>
<strong>        GFM</strong> - GitHub Flavored Markdown
      </li>

      <li>
<strong>        MultiMarkdown</strong> - MultiMarkdown compatibility
      </li>

      <li>
<strong>        Kramdown</strong> - Kramdown compatibility
      </li>

      <li>
<strong>        Unified</strong> - All features enabled (default)
      </li>

    </ul>

    <h2 id="key-features">
      Key Features
    </h2>

    <ul>

      <li>
        Multiple processor modes for compatibility
      </li>

      <li>
        Rich syntax extensions (tables, footnotes, math, wiki links, etc.)
      </li>

      <li>
        Automatic header ID generation
      </li>

      <li>
        Relaxed tables (no separator rows required)
      </li>

      <li>
        Critic Markup support
      </li>

      <li>
        File includes and transclusion
      </li>

      <li>
        Metadata blocks and variables (see <a href="#metadata-transforms" onclick="showPage('metadata-transforms'); return false;">Metadata Transforms</a>)
      </li>

      <li>
        Smart typography
      </li>

      <li>
        Pretty-printed HTML output
      </li>

    </ul>

    <h2 id="quick-example">
      Quick Example
    </h2>

<pre><code class="highlight language-bash"><span class="c"># Convert a markdown file</span>
apex document.md <span class="o">&gt;</span> output.html

<span class="c"># Use unified mode (all features)</span>
apex <span class="nt">--mode</span> unified document.md

<span class="c"># Generate standalone HTML document</span>
apex document.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My Document"</span>
</code></pre>

  <p>
    For more information, see the <a href="#getting-started" onclick="showPage('getting-started'); return false;">Getting Started</a> guide.
  </p>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-getting-started" class="page">

    <h1 id="getting-started">
      Getting Started
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#getting-started">Getting Started</a><ul><li><a href="#installation">Installation</a></li><li><a href="#your-first-conversion">Your First Conversion</a></li><li><a href="#understanding-modes">Understanding Modes</a></li><li><a href="#common-tasks">Common Tasks</a><ul><li><a href="#generate-a-standalone-html-document">Generate a Standalone HTML Document</a></li><li><a href="#pretty-print-html-output">Pretty-Print HTML Output</a></li><li><a href="#disable-automatic-header-ids">Disable Automatic Header IDs</a></li><li><a href="#use-relaxed-tables">Use Relaxed Tables</a></li></ul></li><li><a href="#next-steps">Next Steps</a></li></ul></li></ul></nav>

    <p>
      This guide will help you get up and running with Apex quickly.
    </p>

    <h2 id="installation">
      Installation
    </h2>

    <p>
      First, you’ll need to build Apex from source. See the <a href="#installation" onclick="showPage('installation'); return false;">Installation</a> guide for detailed instructions.
    </p>

<pre><code class="highlight language-bash">git clone https://github.com/ApexMarkdown/apex.git
<span class="nb">cd </span>apex
<span class="nb">mkdir </span>build <span class="o">&amp;&amp;</span> <span class="nb">cd </span>build
cmake ..
make
</code></pre>

  <h2 id="your-first-conversion">
    Your First Conversion
  </h2>

  <p>
    Once built, you can convert Markdown to HTML:
  </p>

<pre><code class="highlight language-bash"><span class="c"># Basic conversion</span>
./apex input.md <span class="o">&gt;</span> output.html

<span class="c"># Or pipe from stdin</span>
<span class="nb">echo</span> <span class="s2">"# Hello World"</span> | ./apex
</code></pre>

<h2 id="understanding-modes">
  Understanding Modes
</h2>

<p>
  Apex supports multiple processor modes. The default is <strong>unified mode</strong>, which enables all features. You can also use specific modes for compatibility:
</p>

<pre><code class="highlight language-bash"><span class="c"># Unified mode (default - all features)</span>
apex document.md

<span class="c"># GFM mode (GitHub compatibility)</span>
apex <span class="nt">--mode</span> gfm document.md

<span class="c"># Kramdown mode</span>
apex <span class="nt">--mode</span> kramdown document.md
</code></pre>

<p>
  See the <a href="#modes" onclick="showPage('modes'); return false;">Modes</a> page for details on what’s enabled in each mode.
</p>

<h2 id="common-tasks">
  Common Tasks
</h2>

<h3 id="generate-a-standalone-html-document">
  Generate a Standalone HTML Document
</h3>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My Document"</span> <span class="nt">--style</span> styles.css
</code></pre>

<h3 id="pretty-print-html-output">
  Pretty-Print HTML Output
</h3>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--pretty</span>
</code></pre>

<h3 id="disable-automatic-header-ids">
  Disable Automatic Header IDs
</h3>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--no-ids</span>
</code></pre>

<h3 id="use-relaxed-tables">
  Use Relaxed Tables
</h3>

<p>
  Relaxed tables are enabled by default in unified and kramdown modes. They allow tables without separator rows:
</p>

<pre><code class="highlight language-markdown">one | two
---|---|
1 | 2
</code></pre>

<p>
  To disable:
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--no-relaxed-tables</span>
</code></pre>

<h2 id="next-steps">
  Next Steps
</h2>

<ul>

  <li>
    Learn about all available <a href="#syntax" onclick="showPage('syntax'); return false;">syntax features</a>
  </li>

  <li>
    Understand <a href="#modes" onclick="showPage('modes'); return false;">processor modes</a>
  </li>

  <li>
    Explore <a href="#command-line-options" onclick="showPage('command-line-options'); return false;">command line options</a>
  </li>

  <li>
    Check out the <a href="#c-api" onclick="showPage('c-api'); return false;">C API</a> for programmatic use
  </li>

</ul>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-installation" class="page">

    <h1 id="installation">
      Installation
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#installation">Installation</a><ul><li><a href="#quick-install-with-homebrew">Quick Install with Homebrew</a></li><li><a href="#pre-built-binaries">Pre-built Binaries</a></li><li><a href="#building-from-source">Building from Source</a><ul><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#1-clone-the-repository">1. Clone the Repository</a></li><li><a href="#2-configure-with-cmake">2. Configure with CMake</a></li><li><a href="#3-build">3. Build</a></li><li><a href="#4-install-optional">4. Install (Optional)</a></li></ul></li><li><a href="#build-outputs">Build Outputs</a></li><li><a href="#building-for-xcode">Building for Xcode</a></li><li><a href="#troubleshooting">Troubleshooting</a><ul><li><a href="#cmake-not-found">CMake not found</a></li><li><a href="#compilation-errors">Compilation errors</a></li><li><a href="#linking-errors">Linking errors</a></li></ul></li><li><a href="#verification">Verification</a></li><li><a href="#next-steps">Next Steps</a></li></ul></li></ul></nav>

    <h2 id="quick-install-with-homebrew">
      Quick Install with Homebrew
    </h2>

    <p>
      The easiest way to install Apex on macOS is using <a href="https://brew.sh">Homebrew</a>:
    </p>

<pre><code class="highlight language-bash">brew tap ttscoff/thelab
brew <span class="nb">install </span>ttscoff/thelab/apex
</code></pre>

  <h2 id="pre-built-binaries">
    Pre-built Binaries
  </h2>

  <p>
    Download pre-built binaries from the <a href="https://github.com/ApexMarkdown/apex/releases/latest">latest release</a>. Binaries are available for:
  </p>

  <ul>

    <li>
      macOS (Universal binary for arm64 and x86_64)
    </li>

    <li>
      Linux (x86_64 and arm64)
    </li>

  </ul>

  <p>
    Simply download the appropriate archive for your platform, extract it, and add the <code>apex</code> binary to your PATH.
  </p>

  <h2 id="building-from-source">
    Building from Source
  </h2>

  <p>
    Apex can also be built from source. This guide covers building on macOS, Linux, and other Unix-like systems.
  </p>

  <h3 id="prerequisites">
    Prerequisites
  </h3>

  <ul>

    <li>
      CMake 3.10 or later
    </li>

    <li>
      C compiler (GCC or Clang)
    </li>

    <li>
      Make
    </li>

    <li>
      Git (for cloning the repository)
    </li>

  </ul>

  <h3 id="1-clone-the-repository">
    1. Clone the Repository
  </h3>

<pre><code class="highlight language-bash">git clone https://github.com/ApexMarkdown/apex.git
<span class="nb">cd </span>apex
git submodule update <span class="nt">--init</span> <span class="nt">--recursive</span>
</code></pre>

<h3 id="2-configure-with-cmake">
  2. Configure with CMake
</h3>

<pre><code class="highlight language-bash">cmake <span class="nt">-S</span> <span class="nb">.</span> <span class="nt">-B</span> build
</code></pre>

<p>
  This will:
</p>

<ul>

  <li>
    Detect your compiler
  </li>

  <li>
    Configure the build system
  </li>

  <li>
    Generate the build cache
  </li>

</ul>

<p>
<strong>  Important:</strong> You must run the configuration step first. If you get a “could not load cache” error, it means this step hasn’t been run yet.
</p>

<h3 id="3-build">
  3. Build
</h3>

<pre><code class="highlight language-bash">cmake <span class="nt">--build</span> build
</code></pre>

<p>
  This compiles the project using the configured build system.
</p>

<h3 id="4-install-optional">
  4. Install (Optional)
</h3>

<pre><code class="highlight language-bash">cmake <span class="nt">--install</span> build
</code></pre>

<p>
  This installs:
</p>

<ul>

  <li>
<code>apex</code> binary to <code>/usr/local/bin</code>
  </li>

  <li>
    Libraries to <code>/usr/local/lib</code>
  </li>

  <li>
    Headers to <code>/usr/local/include/apex</code>
  </li>

</ul>

<h2 id="build-outputs">
  Build Outputs
</h2>

<p>
  After building, you’ll find in the <code>build/</code> directory:
</p>

<ul>

  <li>
<code>apex</code> - Command-line binary
  </li>

  <li>
<code>libapex.dylib</code> (macOS) or <code>libapex.so</code> (Linux) - Shared library
  </li>

  <li>
<code>libapex.a</code> - Static library
  </li>

  <li>
<code>Apex.framework</code> (macOS only) - Framework for Xcode integration
  </li>

</ul>

<h2 id="building-for-xcode">
  Building for Xcode
</h2>

<p>
  To build the macOS framework for Xcode integration:
</p>

<pre><code class="highlight language-bash">cmake <span class="nt">-G</span> Xcode <span class="nt">-S</span> <span class="nb">.</span> <span class="nt">-B</span> build
cmake <span class="nt">--build</span> build <span class="nt">--target</span> Apex
</code></pre>

<p>
  Or open and build in Xcode directly:
</p>

<pre><code class="highlight language-bash">cmake <span class="nt">-G</span> Xcode <span class="nt">-S</span> <span class="nb">.</span> <span class="nt">-B</span> build
open build/Apex.xcodeproj
</code></pre>

<p>
  Then build the “Apex” target in Xcode.
</p>

<h2 id="troubleshooting">
  Troubleshooting
</h2>

<h3 id="cmake-not-found">
  CMake not found
</h3>

<p>
  Install CMake:
</p>

<ul>

  <li>
    macOS: <code>brew install cmake</code>
  </li>

  <li>
    Ubuntu/Debian: <code>sudo apt-get install cmake</code>
  </li>

  <li>
    Fedora: <code>sudo dnf install cmake</code>
  </li>

</ul>

<h3 id="compilation-errors">
  Compilation errors
</h3>

<p>
  Ensure you have a C99-compatible compiler:
</p>

<ul>

  <li>
    macOS: Xcode Command Line Tools (<code>xcode-select --install</code>)
  </li>

  <li>
    Linux: <code>sudo apt-get install build-essential</code>
  </li>

</ul>

<h3 id="linking-errors">
  Linking errors
</h3>

<p>
  Make sure all dependencies are installed. Apex uses cmark-gfm which is included as a submodule and built automatically.
</p>

<h2 id="verification">
  Verification
</h2>

<p>
  Test your installation:
</p>

<pre><code class="highlight language-bash">./apex <span class="nt">--version</span>
<span class="nb">echo</span> <span class="s2">"# Test"</span> | ./apex
</code></pre>

<p>
  You should see version information and HTML output.
</p>

<h2 id="next-steps">
  Next Steps
</h2>

<ul>

  <li>
    See <a href="#usage" onclick="showPage('usage'); return false;">Usage</a> for basic usage examples
  </li>

  <li>
    Check <a href="#xcode-integration" onclick="showPage('xcode-integration'); return false;">Xcode Integration</a> for macOS development
  </li>

  <li>
    Review <a href="#c-api" onclick="showPage('c-api'); return false;">C API</a> for programmatic use
  </li>

</ul>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-usage" class="page">

    <h1 id="usage">
      Usage
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#usage">Usage</a><ul><li><a href="#command-line">Command Line</a><ul><li><a href="#basic-conversion">Basic Conversion</a></li><li><a href="#reading-from-stdin">Reading from stdin</a></li><li><a href="#writing-to-a-file">Writing to a File</a></li></ul></li><li><a href="#processor-modes">Processor Modes</a></li><li><a href="#output-options">Output Options</a><ul><li><a href="#standalone-html-document">Standalone HTML Document</a></li><li><a href="#with-custom-title">With Custom Title</a></li><li><a href="#with-stylesheet">With Stylesheet</a></li><li><a href="#pretty-printed-html">Pretty-Printed HTML</a></li></ul></li><li><a href="#header-ids">Header IDs</a><ul><li><a href="#default-behavior">Default Behavior</a></li><li><a href="#different-id-formats">Different ID Formats</a></li><li><a href="#disable-header-ids">Disable Header IDs</a></li><li><a href="#use-anchor-tags">Use Anchor Tags</a></li></ul></li><li><a href="#tables">Tables</a><ul><li><a href="#standard-tables">Standard Tables</a></li><li><a href="#relaxed-tables">Relaxed Tables</a></li></ul></li><li><a href="#critic-markup">Critic Markup</a><ul><li><a href="#review-mode-default">Review Mode (Default)</a></li><li><a href="#accept-all-changes">Accept All Changes</a></li><li><a href="#reject-all-changes">Reject All Changes</a></li></ul></li><li><a href="#feature-flags">Feature Flags</a></li><li><a href="#configuration">Configuration</a></li><li><a href="#examples">Examples</a><ul><li><a href="#blog-post">Blog Post</a></li><li><a href="#documentation">Documentation</a></li><li><a href="#github-compatible">GitHub-Compatible</a></li></ul></li><li><a href="#programmatic-usage">Programmatic Usage</a></li></ul></li></ul></nav>

    <p>
      This page covers basic usage patterns for Apex.
    </p>

    <h2 id="command-line">
      Command Line
    </h2>

    <h3 id="basic-conversion">
      Basic Conversion
    </h3>

    <p>
      Convert a Markdown file to HTML:
    </p>

<pre><code class="highlight language-bash">apex input.md <span class="o">&gt;</span> output.html
</code></pre>

  <h3 id="reading-from-stdin">
    Reading from stdin
  </h3>

<pre><code class="highlight language-bash"><span class="nb">cat </span>document.md | apex <span class="o">&gt;</span> output.html
</code></pre>

<p>
  Or:
</p>

<pre><code class="highlight language-bash"><span class="nb">echo</span> <span class="s2">"# Hello"</span> | apex
</code></pre>

<h3 id="writing-to-a-file">
  Writing to a File
</h3>

<pre><code class="highlight language-bash">apex input.md <span class="nt">-o</span> output.html
</code></pre>

<h2 id="processor-modes">
  Processor Modes
</h2>

<p>
  Specify a processor mode with <code>--mode</code>:
</p>

<pre><code class="highlight language-bash"><span class="c"># Unified mode (default - all features)</span>
apex document.md

<span class="c"># GFM mode</span>
apex <span class="nt">--mode</span> gfm document.md

<span class="c"># Kramdown mode</span>
apex <span class="nt">--mode</span> kramdown document.md

<span class="c"># MultiMarkdown mode</span>
apex <span class="nt">--mode</span> mmd document.md

<span class="c"># CommonMark mode</span>
apex <span class="nt">--mode</span> commonmark document.md
</code></pre>

<p>
  See <a href="#modes" onclick="showPage('modes'); return false;">Modes</a> for details on what each mode supports.
</p>

<h2 id="output-options">
  Output Options
</h2>

<h3 id="standalone-html-document">
  Standalone HTML Document
</h3>

<p>
  Generate a complete HTML document with <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, and <code>&lt;body&gt;</code> tags:
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--standalone</span>
</code></pre>

<h3 id="with-custom-title">
  With Custom Title
</h3>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My Document"</span>
</code></pre>

<h3 id="with-stylesheet">
  With Stylesheet
</h3>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--standalone</span> <span class="nt">--style</span> styles.css <span class="nt">--title</span> <span class="s2">"My Document"</span>
</code></pre>

<h3 id="pretty-printed-html">
  Pretty-Printed HTML
</h3>

<p>
  Format HTML with indentation and whitespace:
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--pretty</span>
</code></pre>

<h2 id="header-ids">
  Header IDs
</h2>

<h3 id="default-behavior">
  Default Behavior
</h3>

<p>
  By default, Apex generates header IDs automatically using GFM rules:
</p>

<pre><code class="highlight language-markdown"><span class="gh"># My Header</span>
</code></pre>

<p>
  Becomes:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"my-header"</span><span class="nt">&gt;</span>My Header<span class="nt">&lt;/h1&gt;</span>
</code></pre>

<h3 id="different-id-formats">
  Different ID Formats
</h3>

<pre><code class="highlight language-bash"><span class="c"># GFM format (default)</span>
apex document.md <span class="nt">--id-format</span> gfm

<span class="c"># MultiMarkdown format</span>
apex document.md <span class="nt">--id-format</span> mmd

<span class="c"># Kramdown format</span>
apex document.md <span class="nt">--id-format</span> kramdown
</code></pre>

<h3 id="disable-header-ids">
  Disable Header IDs
</h3>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--no-ids</span>
</code></pre>

<h3 id="use-anchor-tags">
  Use Anchor Tags
</h3>

<p>
  Generate <code>&lt;a&gt;</code> anchor tags instead of <code>id</code> attributes:
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--header-anchors</span>
</code></pre>

<p>
  See <a href="#header-ids" onclick="showPage('header-ids'); return false;">Header IDs</a> for complete details.
</p>

<h2 id="tables">
  Tables
</h2>

<h3 id="standard-tables">
  Standard Tables
</h3>

<pre><code class="highlight language-markdown">| Header 1 | Header 2 |
| -------- | -------- |
| Cell 1   | Cell 2   |
</code></pre>

<h3 id="relaxed-tables">
  Relaxed Tables
</h3>

<p>
  In unified and kramdown modes, relaxed tables are enabled by default:
</p>

<pre><code class="highlight language-markdown">one | two
---|---|
1 | 2
</code></pre>

<p>
  No separator row required! To disable:
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--no-relaxed-tables</span>
</code></pre>

<h2 id="critic-markup">
  Critic Markup
</h2>

<h3 id="review-mode-default">
  Review Mode (Default)
</h3>

<p>
  Show all changes with HTML markup:
</p>

<pre><code class="highlight language-bash">apex document.md
</code></pre>

<h3 id="accept-all-changes">
  Accept All Changes
</h3>

<p>
  Apply all additions, remove all deletions:
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--accept</span>
</code></pre>

<h3 id="reject-all-changes">
  Reject All Changes
</h3>

<p>
  Revert all changes, keep original text:
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--reject</span>
</code></pre>

<h2 id="feature-flags">
  Feature Flags
</h2>

<p>
  Disable specific features:
</p>

<pre><code class="highlight language-bash"><span class="c"># Disable tables</span>
apex document.md <span class="nt">--no-tables</span>

<span class="c"># Disable footnotes</span>
apex document.md <span class="nt">--no-footnotes</span>

<span class="c"># Disable smart typography</span>
apex document.md <span class="nt">--no-smart</span>

<span class="c"># Disable math</span>
apex document.md <span class="nt">--no-math</span>
</code></pre>

<h2 id="configuration">
  Configuration
</h2>

<p>
  Apex settings can be controlled from three places:
</p>

<ul>

  <li>
    Per-document metadata (YAML/MultiMarkdown/Pandoc front matter in the document itself)
  </li>

  <li>
    External metadata files passed with <code>--meta-file</code>
  </li>

  <li>
    A global configuration file at <code>$XDG_CONFIG_HOME/apex/config.yml</code> (or <code>~/.config/apex/config.yml</code> when <code>XDG_CONFIG_HOME</code> is not set)
  </li>

</ul>

<p>
  If you do not pass <code>--meta-file</code>, Apex will automatically load <code>config.yml</code> from the XDG or <code>~/.config</code> path when it exists, as if you had passed it via <code>--meta-file</code>. See <a href="Configuration">Configuration</a> for a complete list of available keys, example config files, and details on precedence between config files, document metadata, and command-line flags.
</p>

<h2 id="examples">
  Examples
</h2>

<h3 id="blog-post">
  Blog Post
</h3>

<pre><code class="highlight language-bash">apex post.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My Blog Post"</span> <span class="nt">--style</span> blog.css <span class="o">&gt;</span> post.html
</code></pre>

<h3 id="documentation">
  Documentation
</h3>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--pretty</span> <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"Documentation"</span> <span class="o">&gt;</span> docs.html
</code></pre>

<h3 id="github-compatible">
  GitHub-Compatible
</h3>

<pre><code class="highlight language-bash">apex <span class="nt">--mode</span> gfm document.md <span class="o">&gt;</span> output.html
</code></pre>

<h2 id="programmatic-usage">
  Programmatic Usage
</h2>

<p>
  For using Apex in your own applications, see the <a href="#c-api" onclick="showPage('c-api'); return false;">C API</a> documentation.
</p>

<p>
  For Xcode integration, see <a href="#xcode-integration" onclick="showPage('xcode-integration'); return false;">Xcode Integration</a>.
</p>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-syntax" class="page">

    <h1 id="syntax-reference">
      Syntax Reference
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#syntax-reference">Syntax Reference</a><ul><li><a href="#basic-markdown">Basic Markdown</a><ul><li><a href="#headers">Headers</a></li><li><a href="#emphasis">Emphasis</a></li><li><a href="#superscript-and-subscript">Superscript and Subscript</a></li><li><a href="#lists">Lists</a></li><li><a href="#links-and-images">Links and Images</a></li><li><a href="#code">Code</a></li><li><a href="#blockquotes">Blockquotes</a></li><li><a href="#horizontal-rules">Horizontal Rules</a></li></ul></li><li><a href="#tables">Tables</a><ul><li><a href="#standard-tables">Standard Tables</a></li><li><a href="#relaxed-tables">Relaxed Tables</a></li><li><a href="#headerless-tables">Headerless Tables</a><ul><li><a href="#row-header-columns">Row header columns</a></li></ul></li><li><a href="#inline-tables-from-csvtsv">Inline Tables from CSV/TSV</a><ul><li><a href="#fenced-csvtsv-tables">Fenced CSV/TSV tables</a></li><li><a href="#alignment-rows-in-csvtsv-tables">Alignment rows in CSV/TSV tables</a></li><li><a href="#table-markers">&lt;!--TABLE--&gt; markers</a></li></ul></li></ul></li><li><a href="#footnotes">Footnotes</a><ul><li><a href="#reference-style">Reference Style</a></li><li><a href="#inline-style-kramdown">Inline Style (Kramdown)</a></li><li><a href="#inline-style-multimarkdown">Inline Style (MultiMarkdown)</a></li></ul></li><li><a href="#definition-lists">Definition Lists</a></li><li><a href="#citations">Citations</a><ul><li><a href="#pandoc-citation-syntax">Pandoc Citation Syntax</a></li><li><a href="#multimarkdown-citation-syntax">MultiMarkdown Citation Syntax</a></li><li><a href="#mmark-citation-syntax">mmark Citation Syntax</a></li><li><a href="#bibliography">Bibliography</a></li></ul></li><li><a href="#indices">Indices</a><ul><li><a href="#mmark-index-syntax">mmark Index Syntax</a></li><li><a href="#textindex-syntax">TextIndex Syntax</a></li><li><a href="#index-generation">Index Generation</a></li></ul></li><li><a href="#math">Math</a></li><li><a href="#wiki-links">Wiki Links</a></li><li><a href="#critic-markup">Critic Markup</a></li><li><a href="#callouts">Callouts</a></li><li><a href="#file-includes">File Includes</a><ul><li><a href="#apexoptions">apex_options</a></li></ul></li><li><a href="#core-functions">Core Functions</a><ul><li><a href="#apexoptionsdefault">apex_options_default</a></li><li><a href="#apexoptionsformode">apex_options_for_mode</a></li><li><a href="#apexmarkdowntohtml">apex_markdown_to_html</a></li><li><a href="#apexfreestring">apex_free_string</a></li><li><a href="#apexwraphtmldocument">apex_wrap_html_document</a></li><li><a href="#apexprettyprinthtml">apex_pretty_print_html</a></li></ul></li><li><a href="#version-functions">Version Functions</a><ul><li><a href="#apexversionstring">apex_version_string</a></li><li><a href="#apexversionmajor-apexversionminor-apexversionpatch">apex_version_major / apex_version_minor / apex_version_patch</a></li></ul></li><li><a href="#list-options">List Options</a><ul><li><a href="#mixed-list-markers">Mixed List Markers</a></li><li><a href="#alpha-lists">Alpha Lists</a></li></ul></li><li><a href="#feature-flags">Feature Flags</a></li><li><a href="#metadata-options">Metadata Options</a></li><li><a href="#file-inclusion">File Inclusion</a></li><li><a href="#output-options">Output Options</a></li><li><a href="#line-break-options">Line Break Options</a></li><li><a href="#header-id-options">Header ID Options</a></li><li><a href="#table-options">Table Options</a></li><li><a href="#complete-example">Complete Example</a></li><li><a href="#compiling-and-linking">Compiling and Linking</a><ul><li><a href="#with-cmake">With CMake</a></li><li><a href="#manual-compilation">Manual Compilation</a></li><li><a href="#static-linking">Static Linking</a></li></ul></li><li><a href="#thread-safety">Thread Safety</a></li><li><a href="#memory-management">Memory Management</a></li><li><a href="#error-handling">Error Handling</a></li><li><a href="#performance-tips">Performance Tips</a></li><li><a href="#related">Related</a><ul><li><a href="#address-syntax-for-file-includes">Address Syntax for File Includes</a></li><li><a href="#address-syntax-for-file-includes">Address Syntax for File Includes</a></li></ul></li><li><a href="#metadata">Metadata</a><ul><li><a href="#yaml-front-matter">YAML Front Matter</a></li><li><a href="#multimarkdown-metadata">MultiMarkdown Metadata</a></li><li><a href="#pandoc-title-block">Pandoc Title Block</a></li><li><a href="#metadata-variables">Metadata Variables</a></li></ul></li><li><a href="#abbreviations">Abbreviations</a></li><li><a href="#inline-attribute-lists-ial">Inline Attribute Lists (IAL)</a></li><li><a href="#table-of-contents">Table of Contents</a></li><li><a href="#smart-typography">Smart Typography</a></li><li><a href="#github-emoji">GitHub Emoji</a></li><li><a href="#special-markers">Special Markers</a></li><li><a href="#html">HTML</a><ul><li><a href="#markdown-inside-html-blocks">Markdown Inside HTML Blocks</a></li><li><a href="#pandoc-fenced-divs">Pandoc Fenced Divs</a></li></ul></li><li><a href="#related">Related</a></li></ul></li></ul></nav>

    <p>
      This page documents all syntax features available in <strong>unified mode</strong>. For mode-specific syntax, see <a href="#modes" onclick="showPage('modes'); return false;">Modes</a>.
    </p>

    <h2 id="basic-markdown">
      Basic Markdown
    </h2>

    <h3 id="headers">
      Headers
    </h3>

    <p>
<strong>      ATX-style headers:</strong>
    </p>

<pre><code class="highlight language-markdown"><span class="gh"># H1</span>
<span class="gu">## H2</span>
<span class="gu">### H3</span>
<span class="gu">#### H4</span>
<span class="gu">##### H5</span>
<span class="gu">###### H6</span>
</code></pre>

  <p>
<strong>    Setext-style headers:</strong>
  </p>

<pre><code class="highlight language-markdown"><span class="gu">H1 Alternative
==============
</span>
<span class="gh">H2 Alternative
--------------
</span></code></pre>

<p>
<strong>  Multi-line setext headers (<abbr title="MultiMarkdown">MMD</abbr> 6):</strong>
  Setext headers can span multiple lines before the underline. This is supported in <strong>unified</strong> and <strong>MultiMarkdown</strong> modes:
</p>

<pre><code class="highlight language-markdown">This is
a multi-line
<span class="gu">setext header
========
</span>
Another
header
with
multiple
<span class="gh">lines
--------
</span></code></pre>

<h3 id="emphasis">
  Emphasis
</h3>

<pre><code class="highlight language-markdown"><span class="ge">*italic*</span>
<span class="ge">_italic_</span>
<span class="gs">**bold**</span>
<span class="gs">__bold__</span>
<span class="ges">***bold italic***</span>
<span class="gs">___bold italic__</span>_
</code></pre>

<h3 id="superscript-and-subscript">
  Superscript and Subscript
</h3>

<p>
  MultiMarkdown-style superscript and subscript syntax:
</p>

<pre><code class="highlight language-markdown">H~2~O          # H₂O (subscript - tildes within word)
m^2             # m² (superscript)
x^2 + y^2       # x² + y²
H~2~SO~4~       # H₂SO₄ (multiple subscripts within word)
~h2o~           # <span class="nt">&lt;u&gt;</span>h2o<span class="nt">&lt;/u&gt;</span> (underline - tildes at word boundaries)
</code></pre>

<p>
<strong>  Syntax rules:</strong>
</p>

<ul>

  <li>
    The <code>^</code> character creates superscript for the text immediately following it. The superscript stops at the first space, punctuation, or newline.
  </li>

  <li>
    The <code>~</code> character creates subscript when used <strong>within a word/identifier</strong> with paired tildes (e.g., <code>H~2~O</code>). The subscript ends at the second tilde.
  </li>

  <li>
    When tildes are at word boundaries (e.g., <code>~text~</code>), they create underline instead of subscript. This prevents interference with underline/strikethrough syntax.
  </li>

</ul>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-markdown">Water: H~2~O           # H₂O (subscript - tildes within word)
Area: m^2              # m² (superscript)
Formula: E = mc^2      # E = mc² (superscript)
Chemical: H~2~SO~4~    # H₂SO₄ (multiple subscripts within word)
~h2o~                  # <span class="nt">&lt;u&gt;</span>h2o<span class="nt">&lt;/u&gt;</span> (underline - tildes at word boundaries)
</code></pre>

<p>
  This feature is enabled by default in <strong>MultiMarkdown</strong> and <strong>unified</strong> modes. In other modes, use the <code>--sup-sub</code> flag to enable it. Use <code>--no-sup-sub</code> to disable it in unified or MultiMarkdown modes.
</p>

<h3 id="lists">
  Lists
</h3>

<p>
<strong>  Unordered:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="p">-</span> Item 1
<span class="p">-</span> Item 2
<span class="p">  -</span> Nested item
<span class="p">  -</span> Another nested
<span class="p">-</span> Item 3
</code></pre>

<p>
<strong>  Ordered:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="p">1.</span> First item
<span class="p">2.</span> Second item
<span class="p">   1.</span> Nested item
<span class="p">   2.</span> Another nested
<span class="p">3.</span> Third item
</code></pre>

<p>
<strong>  Mixed Markers (Unified &amp; MultiMarkdown modes):</strong>
  In unified and MultiMarkdown modes, you can mix different list marker types at the same indentation level. The list will inherit the type from the first item:
</p>

<pre><code class="highlight language-markdown"><span class="p">1.</span> First numbered item
<span class="p">*</span> Second item (becomes numbered)
<span class="p">*</span> Third item (becomes numbered)
<span class="p">
*</span> First bullet item
<span class="p">1.</span> Second item (becomes bullet)
<span class="p">2.</span> Third item (becomes bullet)
</code></pre>

<p>
  By default, CommonMark and GFM modes create separate lists when marker types change. Use <code>--mixed-lists</code> to enable this behavior in other modes, or <code>--no-mixed-lists</code> to disable it in unified/MultiMarkdown modes.
</p>

<p>
<strong>  Alpha Lists (Unified mode):</strong>
  In unified mode, you can use alphabetic markers for ordered lists:
</p>

<pre><code class="highlight language-markdown">[apex-alpha-list:lower]
<span class="p">
1.</span>  First item
<span class="p">2.</span>  Second item
<span class="p">3.</span>  Third item

[apex-alpha-list:upper]
<span class="p">
1.</span>  First item (uppercase)
<span class="p">2.</span>  Second item (uppercase)
<span class="p">3.</span>  Third item (uppercase)
</code></pre>

<p>
  Alpha lists are automatically converted to <abbr title="Hypertext Markup Language">HTML</abbr> with <code>style=&quot;list-style-type: lower-alpha&quot;</code> or <code>style=&quot;list-style-type: upper-alpha&quot;</code>. This feature is enabled by default in unified mode. Use <code>--alpha-lists</code> to enable in other modes, or <code>--no-alpha-lists</code> to disable in unified mode.
</p>

<p>
<strong>  Task Lists:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="p">-</span> [ ] Todo item
<span class="p">-</span> [x] Completed item
<span class="p">-</span> [ ] Another todo
</code></pre>

<h3 id="links-and-images">
  Links and Images
</h3>

<p>
<strong>  Standard Markdown links:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="p">[</span><span class="nv">Link text</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span>
<span class="p">[</span><span class="nv">Link with title</span><span class="p">](</span><span class="sx">https://example.com</span> <span class="nn">"Title"</span><span class="p">)</span>
</code></pre>

<p>
<strong>  Link titles with different quote styles (<abbr title="MultiMarkdown">MMD</abbr> 6):</strong>
  Link and image titles can use single quotes, double quotes, or parentheses. This is supported in <strong>unified</strong> and <strong>MultiMarkdown</strong> modes:
</p>

<pre><code class="highlight language-markdown"><span class="p">[</span><span class="nv">Link with double quotes</span><span class="p">](</span><span class="sx">https://example.com</span> <span class="nn">"Title"</span><span class="p">)</span>
<span class="p">[</span><span class="nv">Link with single quotes</span><span class="p">](</span><span class="sx">https://example.com</span> <span class="nn">'Title'</span><span class="p">)</span>
<span class="p">[</span><span class="nv">Link with parentheses</span><span class="p">](</span><span class="sx">https://example.com</span> <span class="nn">(Title)</span><span class="p">)</span>
</code></pre>

<p>
<strong>  Images:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="p">![</span><span class="nv">Alt text</span><span class="p">](</span><span class="sx">image.png</span><span class="p">)</span>
<span class="p">![</span><span class="nv">Alt with title</span><span class="p">](</span><span class="sx">image.png</span> <span class="nn">"Image title"</span><span class="p">)</span>
</code></pre>

<p>
<strong>  Image titles with different quote styles (<abbr title="MultiMarkdown">MMD</abbr> 6):</strong>
</p>

<pre><code class="highlight language-markdown"><span class="p">![</span><span class="nv">Image</span><span class="p">](</span><span class="sx">image.png</span> <span class="nn">"Double quote title"</span><span class="p">)</span>
<span class="p">![</span><span class="nv">Image</span><span class="p">](</span><span class="sx">image.png</span> <span class="nn">'Single quote title'</span><span class="p">)</span>
<span class="p">![</span><span class="nv">Image</span><span class="p">](</span><span class="sx">image.png</span> <span class="nn">(Parentheses title)</span><span class="p">)</span>
</code></pre>

<p>
<strong>  Reference-style links and images:</strong>
  Reference-style links and images also support all three quote styles for titles:
</p>

<pre><code class="highlight language-markdown"><span class="p">[</span><span class="nv">Link text</span><span class="p">][</span><span class="ss">ref1</span><span class="p">]</span>
<span class="p">![</span><span class="nv">Image</span><span class="p">][</span><span class="ss">img1</span><span class="p">]</span>

<span class="p">[</span><span class="ss">ref1</span><span class="p">]:</span> <span class="sx">https://example.com</span> <span class="nn">"Reference title"</span>
<span class="p">[</span><span class="ss">ref2</span><span class="p">]:</span> <span class="sx">https://example.com</span> <span class="nn">'Reference title'</span>
<span class="p">[</span><span class="ss">ref3</span><span class="p">]:</span> <span class="sx">https://example.com</span> <span class="nn">(Reference title)</span>

<span class="p">[</span><span class="ss">img1</span><span class="p">]:</span> <span class="sx">image.png</span> <span class="nn">"Image title"</span>
<span class="p">[</span><span class="ss">img2</span><span class="p">]:</span> <span class="sx">image.png</span> <span class="nn">'Image title'</span>
<span class="p">[</span><span class="ss">img3</span><span class="p">]:</span> <span class="sx">image.png</span> <span class="nn">(Image title)</span>
</code></pre>

<p>
<strong>  Autolinks:</strong>
</p>

<p>
  Apex can automatically convert URLs and email addresses into clickable links. Autolinking is enabled by default in <strong>GFM</strong>, <strong>MultiMarkdown</strong>, <strong>Kramdown</strong>, and <strong>unified</strong> modes. It is disabled by default in <strong>CommonMark</strong> mode.
</p>

<p>
<strong>  Angle-bracket autolinks:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="nv">&lt;https://example.com&gt;</span>
<span class="nv">&lt;http://example.com&gt;</span>
<span class="nv">&lt;mailto:user@example.com&gt;</span>
</code></pre>

<p>
<strong>  Bare URL autolinks:</strong>
</p>

<pre><code class="highlight language-markdown">Visit https://example.com for more info.
Check out http://example.com too.
</code></pre>

<p>
<strong>  Email autolinks:</strong>
</p>

<pre><code class="highlight language-markdown">Contact me@example.com for details.
Send to user@example.com.
</code></pre>

<p>
<strong>  Important notes:</strong>
</p>

<ul>

  <li>
    Autolinks are <strong>not</strong> processed inside code spans (<code>`code`</code>) or code blocks (<code> </code> ```)
  </li>

  <li>
    Use <code>--autolink</code> to enable autolinking in modes where it’s disabled by default
  </li>

  <li>
    Use <code>--no-autolink</code> to disable autolinking in modes where it’s enabled by default
  </li>

  <li>
    Angle-bracket autolinks (<code>&lt;url&gt;</code>) are converted to standard Markdown links during preprocessing
  </li>

  <li>
    Bare URLs and email addresses are also converted to Markdown links during preprocessing
  </li>

</ul>

<h3 id="code">
  Code
</h3>

<p>
<strong>  Inline code:</strong>
</p>

<pre><code class="highlight language-markdown">Use <span class="sb">`code`</span> in text.
</code></pre>

<p>
<strong>  Fenced code blocks:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="p">```</span><span class="nl">python
</span><span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Hello, World!</span><span class="sh">"</span><span class="p">)</span>
<span class="p">```</span>
</code></pre>

<p>
<strong>  Indented code blocks:</strong>
</p>

<pre><code class="highlight language-markdown">    def hello():
        print("Hello, World!")
</code></pre>

<h3 id="blockquotes">
  Blockquotes
</h3>

<pre><code class="highlight language-markdown"><span class="gt">&gt; This is a quote.</span>
<span class="gt">&gt; It can span multiple lines.</span>
<span class="gt">&gt;</span>
<span class="gt">&gt; &gt; Nested quotes are supported.</span>
</code></pre>

<p>
<strong>  Lists and definition lists in blockquotes:</strong>
</p>

<p>
  Blockquotes can contain lists and definition lists:
</p>

<pre><code class="highlight language-markdown"><span class="gt">&gt; 1. First item</span>
<span class="gt">&gt; 2. Second item</span>
<span class="gt">&gt;</span>
<span class="gt">&gt; - Unordered item</span>
<span class="gt">&gt; - Another item</span>
<span class="gt">&gt;</span>
<span class="gt">&gt; Term</span>
<span class="gt">&gt; &lt;dl&gt;</span>
<span class="gt">&gt; &lt;dd&gt;Definition&lt;/dd&gt;</span>
<span class="gt">&gt; &lt;/dl&gt;</span>

</code></pre>

<p>
  Nested blockquotes also support these features:
</p>

<pre><code class="highlight language-markdown"><span class="gt">&gt; &gt; Nested quote</span>
<span class="gt">&gt; &gt; 1. List item</span>
<span class="gt">&gt; &gt; Term</span>
<span class="gt">&gt; &gt; &lt;dl&gt;</span>
<span class="gt">&gt; &gt; &lt;dd&gt;Definition&lt;/dd&gt;</span>
<span class="gt">&gt; &gt; &lt;/dl&gt;</span>

</code></pre>

<h3 id="horizontal-rules">
  Horizontal Rules
</h3>

<pre><code class="highlight language-markdown"><span class="p">---</span>
<span class="p">***</span>
<span class="ge">__</span>_
</code></pre>

<h2 id="tables">
  Tables
</h2>

<h3 id="standard-tables">
  Standard Tables
</h3>

<pre><code class="highlight language-markdown">| Header 1 | Header 2 | Header 3 |
| -------- | :------: | -------: |
| Left     |  Center  |    Right |
| --- | --- | --- |
| Data     |   Data   |     Data |
</code></pre>

<p>
  Column alignment:
</p>

<ul>

  <li>
<code>:---</code> or <code>---</code> - Left (default)
  </li>

  <li>
<code>:---:</code> - Center
  </li>

  <li>
<code>---:</code> - Right
  </li>

</ul>

<h3 id="relaxed-tables">
  Relaxed Tables
</h3>

<p>
  In unified and kramdown modes, tables don’t require separator rows:
</p>

<pre><code class="highlight language-markdown">one | two | three
---|---|---|
1 | 2 | 3
4 | 5 | 6
</code></pre>

<p>
  This automatically becomes a table. See <a href="#modes" onclick="showPage('modes'); return false;">Modes</a> for details.
</p>

<h3 id="headerless-tables">
  Headerless Tables
</h3>

<p>
  Apex supports tables that start with alignment rows (separator rows) without header rows. The alignment specified in the separator row is automatically applied to all columns:
</p>

<pre><code class="highlight language-markdown">|  |  |  |
| --- | --- | --- |
| a   | b   | c   |
| --- | --- | --- |
| 1   | 2   | 3   |
</code></pre>

<p>
  Alignment specifiers work as usual:
</p>

<pre><code class="highlight language-markdown">|  |  |  |
|:---|:---:|---:|
| left | center | right |
</code></pre>

<p>
  In this case, the first row (the alignment row) specifies the column alignment, and all subsequent data rows inherit that alignment. The empty header row that would normally be required is automatically handled.
</p>

<h4 id="row-header-columns">
  Row header columns
</h4>

<p>
  You can also mark the <strong>first column</strong> as a row-header column by starting the header row with an <strong>empty first cell</strong>:
</p>

<pre><code class="highlight language-markdown">|   | Header 1 | Header 2 |
| --- | --- | --- |
| Row 1 | data 1.1 | data 1.2 |
| Row 2 | data 2.1 | data 2.2 |
</code></pre>

<p>
  When the first header cell is empty (for example, <code>| |</code> or <code>|   |</code>), Apex will:
</p>

<ul>

  <li>
    Treat the rest of the header row as usual column headers.
  </li>

  <li>
    Render the first cell of each body row as a <strong>row header</strong> using <code>&lt;th scope=&quot;row&quot;&gt;Row 1&lt;/th&gt;</code>, <code>&lt;th scope=&quot;row&quot;&gt;Row 2&lt;/th&gt;</code>, etc.
  </li>

</ul>

<p>
  Notes:
</p>

<ul>

  <li>
    The row-header behavior only applies to the <strong>first column</strong> and only when the <strong>first header cell is empty</strong>.
  </li>

  <li>
    Tables that start with <code>|data|data|</code> or <code>data|data</code> do <strong>not</strong> enable row headers.
  </li>

  <li>
    This works together with all other table features (relaxed tables, headerless tables, colspans/rowspans, captions, etc.).
  </li>

</ul>

<h3 id="inline-tables-from-csvtsv">
  Inline Tables from CSV/TSV
</h3>

<p>
  In addition to regular pipe tables, Apex can convert inline CSV/TSV text into tables.
</p>

<h4 id="fenced-csvtsv-tables">
  Fenced CSV/TSV tables
</h4>

<p>
  Use a fenced code block with the info string <code>table</code>. The delimiter is detected automatically:
</p>

<ul>

  <li>
    If any non-blank line contains a <strong>tab</strong>, the block is treated as TSV.
  </li>

  <li>
    Otherwise, if any non-blank line contains a <strong>comma</strong>, the block is treated as CSV.
  </li>

  <li>
    If no tabs or commas are found, the block is left unchanged as a normal <code>table</code>-info code block (useful for showing literal CSV/TSV).
  </li>

</ul>

<pre><code class="highlight language-table">header 1,header 2,header 3
data 1,data 2,data 3
,,data 2c
</code></pre>

<p>
  You can also use TSV with real tab characters:
</p>

<pre><code class="highlight language-table">col1\tcol2\tcol3
val1\tval2\tval3
</code></pre>

<h4 id="alignment-rows-in-csvtsv-tables">
  Alignment rows in CSV/TSV tables
</h4>

<p>
  CSV/TSV inline tables can specify column alignment using a row of <strong>alignment keywords</strong>:
</p>

<pre><code class="highlight language-table">H1,H2,H3
left,center,right
a,b,c
</code></pre>

<p>
  The alignment row is not rendered as data; it is converted to the equivalent Markdown alignment row:
</p>

<ul>

  <li>
<code>left</code> → <code>:---</code>
  </li>

  <li>
<code>center</code> → <code>:---:</code>
  </li>

  <li>
<code>right</code> → <code>---:</code>
  </li>

  <li>
<code>auto</code> → <code>---</code>
  </li>

</ul>

<p>
  If the first row contains only alignment keywords, it becomes a <strong>headless table</strong>: the alignment row is emitted first and all following rows become body rows. If there is <strong>no alignment row at all</strong>, Apex emits a default <code>---</code> separator row so that relaxed/headless table handling still works as expected.
</p>

<h4 id="table-markers">
<code>&lt;!--TABLE--&gt;</code> markers
</h4>

<p>
  You can also start an inline CSV/TSV table with an <abbr title="Hypertext Markup Language">HTML</abbr> comment:
</p>

<pre><code class="highlight language-markdown">| header 1 | header 2 | header 3 |
| --- | --- | --- |
| data 1 | data 2 | data 3 |
| --- | --- | --- |
|  |  | data 2c |
| <span class="sb">``` |  |  |

`| ` consumes the following **contiguous non-blank lines** as table data (stopping at the first blank line) |  applies the same delimiter detection and optional alignment-row handling |  and converts the block into a table. If no tabs or commas are found |  the comment and lines are left unchanged. |
| --- | --- | --- | --- |

### Advanced Table Features

**Column spans (empty cells):**
```</span>markdown
| A   | B   | C   |
| --- | --- | --- |
| D   |     |     |
</code></pre>

<p>
  Empty cells merge with the previous cell.
</p>

<p>
<strong>  Row spans:</strong>
</p>

<pre><code class="highlight language-markdown">| A   | B   |
| --- | --- |
| C   | D   |
| --- | --- |
| ^^  | E   |
</code></pre>

<p>
  The <code>^^</code> marker creates a row span on the cell above. Consecutive <code>^^</code> markers stack to create larger row spans.
</p>

<p>
<strong>  Table footers (tfoot):</strong>
</p>

<pre><code class="highlight language-markdown">| h1  |  h2   | h3  |
| --- | :---: | --- |
| d1  |  d2   | d3  |
| --- | --- | --- |
| d1  |  d2   | d3  |
| === |  ===  | === |
| d-4 |  d-5  | d-6 |
</code></pre>

<p>
  A row where every cell contains only <code>===</code> (three or more equals, with optional extra <code>=</code> and whitespace) is treated as a <strong>footer divider</strong>. That row is removed from the output and all following rows are rendered inside <code>&lt;tfoot&gt;</code>.
</p>

<p>
<strong>  Individual cell alignment:</strong>
</p>

<p>
  Table cells can be aligned individually using colons, similar to Jekyll Spaceship:
</p>

<pre><code class="highlight language-markdown">| Header | Header | Header |
| --- | --- | --- |
| :Left | Center: | ♋ |
| --- | --- | --- |
| Right: | Normal | :Left |
</code></pre>

<ul>

  <li>
<code>:Text</code> or <code>: Text</code> - Left align (leading colon)
  </li>

  <li>
<code>Text:</code> or <code>Text :</code> - Right align (trailing colon)
  </li>

  <li>
<code>⛺</code> or <code>: Text :</code> - Center align (both colons)
  </li>

</ul>

<p>
  The colons are removed from the output, and the alignment is applied via <abbr title="Cascading Style Sheets">CSS</abbr> <code>text-align</code> styles. Escaped colons (<code>\:</code>) are not treated as alignment markers.
</p>

<p>
<strong>  Combined row and column spans:</strong>
</p>

<p>
  You can mix rowspans and colspans in the same table to create more complex layouts:
</p>

<pre><code class="highlight language-markdown">[Employee Performance Q4]
| Department  | Employee | Q1-Q2 Average | Q3     | Q4  | Overall |
| ----------- | -------- | ------------- | ------ | --- | ------- |
| Engineering | Alice    | 93.5          | 94     | 96  | 94.25   |
| --- | --- | --- | --- | --- | --- |
| ^^          | Bob      | 89.0          | 87     | 91  | 89.00   |
| Marketing   | Charlie  | 92.0          | Absent |     | 92.00   |
| Sales       | Diana    | 87.5          | 88     | 90  | 88.50   |
| ^^          | Eve      | 93.0          | 95     | 93  | 93.50   |

{: .performance-table #q4-results}
</code></pre>

<p>
  Here <code>^^</code> creates rowspans for the <code>Department</code> column, while empty cells in the “Absent” row allow the “Q4” value to span visually.
</p>

<p>
<strong>  Table captions:</strong>
</p>

<pre><code class="highlight language-markdown">[Table Caption]

| A   | B   |
| --- | --- |
| C   | D   |
</code></pre>

<p>
  Captions can appear <strong>before or after</strong> a table. They must be contiguous with the table (no other content between them), but a blank line is allowed:
</p>

<pre><code class="highlight language-markdown">| A   | B   |
| --- | --- |

| C   | D   |

[Caption after table]
</code></pre>

<p>
  In addition, Apex supports <strong>Pandoc-style captions</strong>:
</p>

<pre><code class="highlight language-markdown">| A   | B   |
| --- | --- |

| C   | D   |

[Caption after table]
</code></pre>

<p>
  Pandoc-style <code>Table: Caption</code> lines are normalized to <code>[Caption]</code> before parsing, so they work with the same caption rendering as MultiMarkdown captions.
</p>

<p>
  Apex also supports <strong>Pandoc table_attributes extension</strong> using the <code>: Caption</code> syntax:
</p>

<pre><code class="highlight language-markdown">| Key | Value |
| --- | :---: |
| one |   1   |
| --- | --- |
| two |   2   |

[Key value table] {#table-id .testing key="value"}
</code></pre>

<p>
  The <code>: Caption</code> format (with optional IAL attributes) is recognized when it appears immediately before or after a table. IAL attributes in the caption are extracted and applied to the table element itself. This supports both Kramdown-style IALs (<code>{: #id .class}</code>) and Pandoc-style IALs without the colon (<code>{#id .class}</code>).
</p>

<p>
<strong>  Note:</strong> The <code>: Caption</code> syntax only works when adjacent to a table to avoid conflicts with definition list syntax. If a line starting with <code>:</code> is not next to a table, it will be processed as a definition list item.
</p>

<p>
<strong>  Caption position:</strong> By default, captions appear <strong>below</strong> the table. Use the <code>--captions above</code> option to place captions above the table instead. The <code>--captions below</code> option (or default) places them below. See <a href="#command-line-options" onclick="showPage('command-line-options'); return false;">Command Line Options</a> for details.
</p>

<h2 id="footnotes">
  Footnotes
</h2>

<h3 id="reference-style">
  Reference Style
</h3>

<pre><code class="highlight language-markdown">Here's a footnote[^1] and another[^note].

<span class="p">[</span><span class="ss">^1</span><span class="p">]:</span> <span class="sx">First</span> footnote content.
<span class="p">[</span><span class="ss">^note</span><span class="p">]:</span> <span class="sx">Second</span> footnote with custom ID.
</code></pre>

<h3 id="inline-style-kramdown">
  Inline Style (Kramdown)
</h3>

<pre><code class="highlight language-markdown">This is a footnote[^fn1].
</code></pre>

<h3 id="inline-style-multimarkdown">
  Inline Style (MultiMarkdown)
</h3>

<pre><code class="highlight language-markdown">This is a footnote[^fn2].
</code></pre>

<h2 id="definition-lists">
  Definition Lists
</h2>

<pre><code class="highlight language-markdown">Term
<span class="nt">&lt;dl&gt;</span>
<span class="nt">&lt;dd&gt;</span>Definition text with <span class="nt">&lt;strong&gt;</span>Markdown<span class="nt">&lt;/strong&gt;</span> support<span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

Apple
<span class="nt">&lt;dl&gt;</span>
<span class="nt">&lt;dd&gt;</span>A fruit<span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;dd&gt;</span>A company<span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

Term with multiple definitions
<span class="nt">&lt;dl&gt;</span>
<span class="nt">&lt;dd&gt;</span>First definition<span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;dd&gt;</span>Second definition<span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

</code></pre>

<p>
<strong>  Definition lists in blockquotes:</strong>
</p>

<p>
  Definition lists work inside blockquotes, including nested blockquotes:
</p>

<pre><code class="highlight language-markdown"><span class="gt">&gt; Term 1</span>
<span class="gt">&gt; &lt;dl&gt;</span>
<span class="gt">&gt; &lt;dd&gt;Definition 1&lt;/dd&gt;</span>
<span class="gt">&gt; &lt;/dl&gt;</span>
<span class="gt">
&gt; Term 2</span>
<span class="gt">&gt; &lt;dl&gt;</span>
<span class="gt">&gt; &lt;dd&gt;Definition 2&lt;/dd&gt;</span>
<span class="gt">&gt; &lt;/dl&gt;</span>
<span class="gt">
&gt; &gt; Nested blockquote</span>
<span class="gt">&gt; &gt; Term</span>
<span class="gt">&gt; &gt; &lt;dl&gt;</span>
<span class="gt">&gt; &gt; &lt;dd&gt;Definition&lt;/dd&gt;</span>
<span class="gt">&gt; &gt; &lt;/dl&gt;</span>

</code></pre>

<p>
  This allows you to create quoted definitions and maintain proper nesting structure.
</p>

<h2 id="citations">
  Citations
</h2>

<p>
<strong>  Note:</strong> Citations are supported in <strong>MultiMarkdown</strong> and <strong>unified</strong> modes. A bibliography file must be provided via <code>--bibliography</code> flag or document metadata.
</p>

<h3 id="pandoc-citation-syntax">
  Pandoc Citation Syntax
</h3>

<p>
<strong>  Basic citation:</strong>
</p>

<pre><code class="highlight language-markdown">See [@doe99] for details.
</code></pre>

<p>
<strong>  Multiple citations:</strong>
</p>

<pre><code class="highlight language-markdown">See [@doe99; @smith2000; @smith2004] for more information.
</code></pre>

<p>
<strong>  Author in text:</strong>
</p>

<pre><code class="highlight language-markdown">@smith04 says blah.
</code></pre>

<p>
<strong>  Author suppressed:</strong>
</p>

<pre><code class="highlight language-markdown">Smith says blah [-@smith04].
</code></pre>

<p>
<strong>  With locator:</strong>
</p>

<pre><code class="highlight language-markdown">@smith04 [p. 33] says blah.
</code></pre>

<h3 id="multimarkdown-citation-syntax">
  MultiMarkdown Citation Syntax
</h3>

<p>
<strong>  Basic citation:</strong>
</p>

<pre><code class="highlight language-markdown">This is a statement[#Doe:2006].
</code></pre>

<p>
<strong>  With locator:</strong>
</p>

<pre><code class="highlight language-markdown">This is a statement<span class="p">[</span><span class="nv">p. 23</span><span class="p">][</span><span class="ss">#Doe:2006</span><span class="p">]</span>.
</code></pre>

<p>
<strong>  Inline citation:</strong>
</p>

<pre><code class="highlight language-markdown">As per Doe.[#John Doe. <span class="ge">*A Totally Fake Book 1*</span>. Vanity Press, 2006.]
</code></pre>

<h3 id="mmark-citation-syntax">
  mmark Citation Syntax
</h3>

<p>
<strong>  Basic citation:</strong>
</p>

<pre><code class="highlight language-markdown">This references [@RFC2535].
</code></pre>

<p>
<strong>  Normative citation:</strong>
</p>

<pre><code class="highlight language-markdown">This references [@!RFC1034] (normative).
</code></pre>

<p>
<strong>  Multiple citations:</strong>
</p>

<pre><code class="highlight language-markdown">Multiple citations: [@RFC1034;@RFC1035].
</code></pre>

<p>
<strong>  Combined reference:</strong>
</p>

<pre><code class="highlight language-markdown">Combined reference: [@RFC1034@STD3].
</code></pre>

<h3 id="bibliography">
  Bibliography
</h3>

<p>
  Bibliography is automatically generated from cited entries and inserted at the <code>&lt;!-- REFERENCES --&gt;</code> marker or appended to the end of the document.
</p>

<p>
<strong>  Bibliography marker:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="gu">## References</span>

<span class="c">&lt;!-- REFERENCES --&gt;</span>
</code></pre>

<p>
<strong>  Bibliography in metadata:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">bibliography</span><span class="pi">:</span> <span class="s">references.bib</span>
<span class="nn">---</span>

See [@doe99] for details.
</code></pre>

<p>
<strong>  Multiple bibliography files:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">bibliography</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">refs1.bib</span>
  <span class="pi">-</span> <span class="s">refs2.bib</span>
<span class="nn">---</span>
</code></pre>

<p>
  For complete documentation of citations and bibliography, see <a href="#citations" onclick="showPage('citations'); return false;">Citations</a>.
</p>

<h2 id="indices">
  Indices
</h2>

<p>
<strong>  Note:</strong> Indices are supported in <strong>MultiMarkdown</strong> and <strong>unified</strong> modes. Enabled by default in these modes.
</p>

<h3 id="mmark-index-syntax">
  mmark Index Syntax
</h3>

<p>
<strong>  Basic index entry:</strong>
</p>

<pre><code class="highlight language-markdown">This is about protocols (!Protocol).
</code></pre>

<p>
<strong>  Sub-item entry:</strong>
</p>

<pre><code class="highlight language-markdown">HTTP/1.1 (!HTTP, HTTP/1.1) is a protocol version.
</code></pre>

<p>
<strong>  Primary entry (bold in index):</strong>
</p>

<pre><code class="highlight language-markdown">This is a primary topic (!!Primary Topic, Sub Topic).
</code></pre>

<p>
<strong>  Multiple entries:</strong>
</p>

<pre><code class="highlight language-markdown">Protocols (!Protocol) and implementations (!Implementation) are important.
</code></pre>

<h3 id="textindex-syntax">
  TextIndex Syntax
</h3>

<p>
<strong>  Basic syntax (indexes preceding word):</strong>
</p>

<pre><code class="highlight language-markdown">Most mechanical keyboard firmware{<span class="nt">&lt;sup&gt;</span>}<span class="nt">&lt;/sup&gt;</span> supports key combinations.
</code></pre>

<p>
<strong>  Explicit term:</strong>
</p>

<pre><code class="highlight language-markdown">This uses <span class="nt">&lt;span&gt;</span>key combinations<span class="nt">&lt;/span&gt;</span>
 for indexing.
</code></pre>

<p>
<strong>  With parameters:</strong>
</p>

<pre><code class="highlight language-markdown">Term{<span class="nt">&lt;sup&gt;</span>param1<span class="nt">&lt;/sup&gt;</span> param2}
</code></pre>

<h3 id="index-generation">
  Index Generation
</h3>

<p>
  The index is automatically generated at the end of the document or at the <code>&lt;!--INDEX--&gt;</code> marker if present:
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Document</span>

This is about protocols (!Protocol).

<span class="c">&lt;!--INDEX--&gt;</span>

More content after the index.
</code></pre>

<p>
<strong>  Index features:</strong>
</p>

<ul>

  <li>
    Entries are sorted alphabetically
  </li>

  <li>
    Can be grouped by first letter (default)
  </li>

  <li>
    Sub-items are nested under main terms
  </li>

  <li>
    Primary entries are marked (typically bold)
  </li>

  <li>
    Each entry links back to its location in the document
  </li>

</ul>

<p>
<strong>  Suppress index:</strong>
  Use <code>--no-index</code> to suppress index generation while still creating index markers.
</p>

<h2 id="math">
  Math
</h2>

<p>
<strong>  Inline math:</strong>
</p>

<pre><code class="highlight language-markdown">The equation $E = mc^2$ is famous.
</code></pre>

<p>
<strong>  Display math:</strong>
</p>

<pre><code class="highlight language-markdown">$$
<span class="se">\i</span>nt_{-<span class="se">\i</span>nfty}^{<span class="se">\i</span>nfty} e^{-x^2} dx = <span class="se">\s</span>qrt{<span class="se">\p</span>i}
$$
</code></pre>

<p>
  Math is wrapped in spans with appropriate classes for MathJax or KaTeX.
</p>

<h2 id="wiki-links">
  Wiki Links
</h2>

<p>
<strong>  Note:</strong> Wiki links are <strong>disabled by default</strong> in all modes. Use <code>--wikilinks</code> to enable.
</p>

<pre><code class="highlight language-markdown">[[Page Name]]                   # Link to page
[[Page Name|Display Text]]      # Custom display text

[[Page Name#Section]]           # Link to section

[[Page Name#Section|Display]]   # Custom display with section
</code></pre>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--wikilinks</span>
</code></pre>

<h2 id="critic-markup">
  Critic Markup
</h2>

<p>
  Track changes and annotations:
</p>

<pre><code class="highlight language-markdown"><span class="nt">&lt;ins</span> <span class="na">class=</span><span class="s">"critic"</span><span class="nt">&gt;</span>addition<span class="nt">&lt;/ins&gt;</span>              # Added text
<span class="nt">&lt;del</span> <span class="na">class=</span><span class="s">"critic"</span><span class="nt">&gt;</span>deletion<span class="nt">&lt;/del&gt;</span>              # Deleted text
<span class="nt">&lt;del</span> <span class="na">class=</span><span class="s">"critic break"</span><span class="nt">&gt;</span>old text<span class="nt">&lt;/del&gt;&lt;ins</span> <span class="na">class=</span><span class="s">"critic break"</span><span class="nt">&gt;</span>new text<span class="nt">&lt;/ins&gt;</span>    # Substitution
<span class="nt">&lt;mark</span> <span class="na">class=</span><span class="s">"critic"</span><span class="nt">&gt;</span>highlighted<span class="nt">&lt;/mark&gt;</span>           # Highlighted text
<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"critic comment"</span><span class="nt">&gt;</span>comment text<span class="nt">&lt;/span&gt;</span>         # Comment/annotation
</code></pre>

<p>
  See <a href="#command-line-options" onclick="showPage('command-line-options'); return false;">Command Line Options</a> for <code>--accept</code> and <code>--reject</code> modes.
</p>

<h2 id="callouts">
  Callouts
</h2>

<p>
  Bear/Obsidian/Xcode Playground syntax:
</p>

<pre><code class="highlight language-markdown"><span class="gt">&gt; [!NOTE] Title</span>
<span class="gt">&gt; This is a note callout</span>
<span class="gt">
&gt; [!WARNING] Be Careful</span>
<span class="gt">&gt; Warning content</span>
<span class="gt">
&gt; [!TIP] Pro Tip</span>
<span class="gt">&gt; Helpful advice</span>
<span class="gt">
&gt; [!DANGER] Critical</span>
<span class="gt">&gt; Dangerous operation</span>
<span class="gt">
&gt; [!INFO] Information</span>
<span class="gt">&gt; Informational content</span>
</code></pre>

<p>
<strong>  Collapsible callouts:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="gt">&gt; [!NOTE]+ Expandable</span>
<span class="gt">&gt; Defaults to open</span>
<span class="gt">
&gt; [!NOTE]- Collapsed</span>
<span class="gt">&gt; Defaults to closed</span>
</code></pre>

<h2 id="file-includes">
  File Includes
</h2>

<p>
<strong>  Marked syntax:</strong>
</p>

<pre><code class="highlight language-markdown">      # Include and process Markdown
      # Include as code block
     # Include raw <span class="nt">&lt;abbr</span> <span class="na">title=</span><span class="s">"Hypertext Markup Language"</span><span class="nt">&gt;</span>HTML<span class="nt">&lt;/abbr&gt;</span>
</code></pre>

<p>
<strong>  MultiMarkdown transclusion:</strong>
</p>

<pre><code class="highlight language-markdown">{{file.md}}      # Include file
{{file.<span class="err">*</span>}}       # Prefer file.html, file.md, file.txt, file.tex (in that order)
<span class="gh"># C API</span>

Apex provides a simple C API for programmatic Markdown to <span class="nt">&lt;abbr</span> <span class="na">title=</span><span class="s">"Hypertext Markup Language"</span><span class="nt">&gt;</span>HTML<span class="nt">&lt;/abbr&gt;</span> conversion.

<span class="gu">## Overview</span>

The Apex C API is thread-safe and designed for integration into C and C++ applications. All functions are declared in <span class="sb">`apex/apex.h`</span>.

<span class="gu">## Core Types</span>

<span class="gu">### apex_mode_t</span>

Processor compatibility modes:

<span class="p">```</span><span class="nl">c
</span><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
    <span class="n">APEX_MODE_COMMONMARK</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>      <span class="cm">/* Pure CommonMark spec */</span>
    <span class="n">APEX_MODE_GFM</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>              <span class="cm">/* GitHub Flavored Markdown */</span>
    <span class="n">APEX_MODE_MULTIMARKDOWN</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>    <span class="cm">/* MultiMarkdown compatibility */</span>
    <span class="n">APEX_MODE_KRAMDOWN</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>         <span class="cm">/* Kramdown compatibility */</span>
    <span class="n">APEX_MODE_UNIFIED</span> <span class="o">=</span> <span class="mi">4</span>           <span class="cm">/* All features enabled */</span>
<span class="p">}</span> <span class="n">apex_mode_t</span><span class="p">;</span>
</code></pre>

<h3 id="apexoptions">
  apex_options
</h3>

<p>
  Configuration structure for processing:
</p>

<pre><code class="highlight language-c"><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">apex_mode_t</span> <span class="n">mode</span><span class="p">;</span>

    <span class="cm">/* Feature flags */</span>
    <span class="n">bool</span> <span class="n">enable_tables</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_footnotes</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_definition_lists</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_smart_typography</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_math</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_critic_markup</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_wiki_links</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_task_lists</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_attributes</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_callouts</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_marked_extensions</span><span class="p">;</span>

    <span class="cm">/* Critic markup mode */</span>
    <span class="kt">int</span> <span class="n">critic_mode</span><span class="p">;</span>  <span class="cm">/* 0=accept, 1=reject, 2=markup (default) */</span>

    <span class="cm">/* Metadata handling */</span>
    <span class="n">bool</span> <span class="n">strip_metadata</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_metadata_variables</span><span class="p">;</span>

    <span class="cm">/* File inclusion */</span>
    <span class="n">bool</span> <span class="n">enable_file_includes</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">max_include_depth</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">base_directory</span><span class="p">;</span>

    <span class="cm">/* Output options */</span>
    <span class="n">bool</span> <span class="n">unsafe</span><span class="p">;</span>  <span class="cm">/* Allow raw &lt;abbr title="Hypertext Markup Language"&gt;HTML&lt;/abbr&gt; */</span>
    <span class="n">bool</span> <span class="n">validate_utf8</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">github_pre_lang</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">standalone</span><span class="p">;</span>  <span class="cm">/* Generate complete &lt;abbr title="Hypertext Markup Language"&gt;HTML&lt;/abbr&gt; document */</span>
    <span class="n">bool</span> <span class="n">pretty</span><span class="p">;</span>      <span class="cm">/* Pretty-print &lt;abbr title="Hypertext Markup Language"&gt;HTML&lt;/abbr&gt; */</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">stylesheet_path</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">document_title</span><span class="p">;</span>

    <span class="cm">/* Line break handling */</span>
    <span class="n">bool</span> <span class="n">hardbreaks</span><span class="p">;</span>  <span class="cm">/* Treat newlines as hard breaks */</span>
    <span class="n">bool</span> <span class="n">nobreaks</span><span class="p">;</span>    <span class="cm">/* Render soft breaks as spaces */</span>

    <span class="cm">/* Header ID generation */</span>
    <span class="n">bool</span> <span class="n">generate_header_ids</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">header_anchors</span><span class="p">;</span>  <span class="cm">/* Generate &lt;a&gt; tags instead of id attributes */</span>
    <span class="kt">int</span> <span class="n">id_format</span><span class="p">;</span>  <span class="cm">/* 0=GFM, 1=&lt;abbr title="MultiMarkdown"&gt;MMD&lt;/abbr&gt;, 2=Kramdown */</span>

    <span class="cm">/* Table options */</span>
    <span class="n">bool</span> <span class="n">relaxed_tables</span><span class="p">;</span>

    <span class="cm">/* List options */</span>
    <span class="n">bool</span> <span class="n">allow_mixed_list_markers</span><span class="p">;</span>  <span class="cm">/* Allow mixed list markers at same level (inherit type from first item) */</span>
    <span class="n">bool</span> <span class="n">allow_alpha_lists</span><span class="p">;</span>  <span class="cm">/* Support alpha list markers (a., b., c. and A., B., C.) */</span>
<span class="p">}</span> <span class="n">apex_options</span><span class="p">;</span>
</code></pre>

<h2 id="core-functions">
  Core Functions
</h2>

<h3 id="apexoptionsdefault">
  apex_options_default
</h3>

<p>
  Get default options with all features enabled (unified mode).
</p>

<pre><code class="highlight language-c"><span class="n">apex_options</span> <span class="nf">apex_options_default</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Returns:</strong> Default options structure
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"><span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_default</span><span class="p">();</span>
<span class="n">opts</span><span class="p">.</span><span class="n">enable_math</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="n">opts</span><span class="p">.</span><span class="n">pretty</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</code></pre>

<h3 id="apexoptionsformode">
  apex_options_for_mode
</h3>

<p>
  Get options configured for a specific processor mode.
</p>

<pre><code class="highlight language-c"><span class="n">apex_options</span> <span class="nf">apex_options_for_mode</span><span class="p">(</span><span class="n">apex_mode_t</span> <span class="n">mode</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Parameters:</strong>
</p>

<ul>

  <li>
<code>mode</code> - Desired processor mode
  </li>

</ul>

<p>
<strong>  Returns:</strong> Options configured for the specified mode
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"><span class="n">apex_options</span> <span class="n">gfm_opts</span> <span class="o">=</span> <span class="n">apex_options_for_mode</span><span class="p">(</span><span class="n">APEX_MODE_GFM</span><span class="p">);</span>
<span class="n">apex_options</span> <span class="n">mmd_opts</span> <span class="o">=</span> <span class="n">apex_options_for_mode</span><span class="p">(</span><span class="n">APEX_MODE_MULTIMARKDOWN</span><span class="p">);</span>
</code></pre>

<h3 id="apexmarkdowntohtml">
  apex_markdown_to_html
</h3>

<p>
  Main conversion function - converts Markdown to <abbr title="Hypertext Markup Language">HTML</abbr>.
</p>

<pre><code class="highlight language-c"><span class="kt">char</span> <span class="o">*</span><span class="nf">apex_markdown_to_html</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">markdown</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">,</span>
                            <span class="k">const</span> <span class="n">apex_options</span> <span class="o">*</span><span class="n">options</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Parameters:</strong>
</p>

<ul>

  <li>
<code>markdown</code> - Input Markdown text (UTF-8)
  </li>

  <li>
<code>len</code> - Length of input text (use <code>strlen()</code> if null-terminated)
  </li>

  <li>
<code>options</code> - Processing options (NULL for defaults)
  </li>

</ul>

<p>
<strong>  Returns:</strong> Newly allocated <abbr title="Hypertext Markup Language">HTML</abbr> string (must be freed with <code>apex_free_string</code>), or NULL on error
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">markdown</span> <span class="o">=</span> <span class="s">"# Hello</span><span class="se">\n\n</span><span class="s">This is **bold**."</span><span class="p">;</span>
<span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_default</span><span class="p">();</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">markdown</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="n">html</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">html</span><span class="p">);</span>
    <span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<h3 id="apexfreestring">
  apex_free_string
</h3>

<p>
  Free a string allocated by Apex.
</p>

<pre><code class="highlight language-c"><span class="kt">void</span> <span class="nf">apex_free_string</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Parameters:</strong>
</p>

<ul>

  <li>
<code>str</code> - String to free (can be NULL, safe to call on NULL)
  </li>

</ul>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"><span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
 <span class="n">Use</span> <span class="n">html</span><span class="p">...</span>
<span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
</code></pre>

<h3 id="apexwraphtmldocument">
  apex_wrap_html_document
</h3>

<p>
  Wrap <abbr title="Hypertext Markup Language">HTML</abbr> content in a complete HTML5 document structure.
</p>

<pre><code class="highlight language-c"><span class="kt">char</span> <span class="o">*</span><span class="nf">apex_wrap_html_document</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">content</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">title</span><span class="p">,</span>
                              <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">stylesheet_path</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Parameters:</strong>
</p>

<ul>

  <li>
<code>content</code> - <abbr title="Hypertext Markup Language">HTML</abbr> content to wrap
  </li>

  <li>
<code>title</code> - Document title (NULL for default “Document”)
  </li>

  <li>
<code>stylesheet_path</code> - Path to <abbr title="Cascading Style Sheets">CSS</abbr> file to link (NULL for none)
  </li>

</ul>

<p>
<strong>  Returns:</strong> Newly allocated <abbr title="Hypertext Markup Language">HTML</abbr> document string (must be freed with <code>apex_free_string</code>)
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"><span class="kt">char</span> <span class="o">*</span><span class="n">fragment</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">document</span> <span class="o">=</span> <span class="n">apex_wrap_html_document</span><span class="p">(</span><span class="n">fragment</span><span class="p">,</span> <span class="s">"My Document"</span><span class="p">,</span> <span class="s">"style.css"</span><span class="p">);</span>
<span class="n">apex_free_string</span><span class="p">(</span><span class="n">fragment</span><span class="p">);</span>
 <span class="n">Use</span> <span class="n">document</span><span class="p">...</span>
<span class="n">apex_free_string</span><span class="p">(</span><span class="n">document</span><span class="p">);</span>
</code></pre>

<h3 id="apexprettyprinthtml">
  apex_pretty_print_html
</h3>

<p>
  Pretty-print <abbr title="Hypertext Markup Language">HTML</abbr> with proper indentation.
</p>

<pre><code class="highlight language-c"><span class="kt">char</span> <span class="o">*</span><span class="nf">apex_pretty_print_html</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">html</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Parameters:</strong>
</p>

<ul>

  <li>
<code>html</code> - <abbr title="Hypertext Markup Language">HTML</abbr> to format
  </li>

</ul>

<p>
<strong>  Returns:</strong> Newly allocated formatted <abbr title="Hypertext Markup Language">HTML</abbr> string (must be freed with <code>apex_free_string</code>)
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"><span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">pretty</span> <span class="o">=</span> <span class="n">apex_pretty_print_html</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
<span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
 <span class="n">Use</span> <span class="n">pretty</span><span class="p">...</span>
<span class="n">apex_free_string</span><span class="p">(</span><span class="n">pretty</span><span class="p">);</span>
</code></pre>

<h2 id="version-functions">
  Version Functions
</h2>

<h3 id="apexversionstring">
  apex_version_string
</h3>

<p>
  Get version string.
</p>

<pre><code class="highlight language-c"><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">apex_version_string</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Returns:</strong> Version string (e.g., “0.1.0”)
</p>

<h3 id="apexversionmajor-apexversionminor-apexversionpatch">
  apex_version_major / apex_version_minor / apex_version_patch
</h3>

<p>
  Get individual version components.
</p>

<pre><code class="highlight language-c"><span class="kt">int</span> <span class="nf">apex_version_major</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">apex_version_minor</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">apex_version_patch</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Returns:</strong> Version component as integer
</p>

<h2 id="list-options">
  List Options
</h2>

<h3 id="mixed-list-markers">
  Mixed List Markers
</h3>

<p>
  When <code>allow_mixed_list_markers</code> is enabled, lists with different marker types at the same indentation level will inherit the type from the first item. This is enabled by default in <strong>MultiMarkdown</strong> and <strong>Unified</strong> modes.
</p>

<pre><code class="highlight language-c"><span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_for_mode</span><span class="p">(</span><span class="n">APEX_MODE_UNIFIED</span><span class="p">);</span>
 <span class="n">opts</span><span class="p">.</span><span class="n">allow_mixed_list_markers</span> <span class="n">is</span> <span class="nb">true</span> <span class="n">by</span> <span class="k">default</span>

 <span class="n">To</span> <span class="n">enable</span> <span class="n">in</span> <span class="n">other</span> <span class="n">modes</span><span class="o">:</span>
<span class="n">opts</span><span class="p">.</span><span class="n">allow_mixed_list_markers</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

 <span class="n">To</span> <span class="n">disable</span> <span class="n">in</span> <span class="n">unified</span><span class="o">/</span><span class="n">multimarkdown</span> <span class="n">modes</span><span class="o">:</span>
<span class="n">opts</span><span class="p">.</span><span class="n">allow_mixed_list_markers</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</code></pre>

<p>
<strong>  Example markdown:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="p">1.</span> First numbered item
<span class="p">*</span> Second item (becomes numbered)
<span class="p">*</span> Third item (becomes numbered)
</code></pre>

<h3 id="alpha-lists">
  Alpha Lists
</h3>

<p>
  When <code>allow_alpha_lists</code> is enabled, alphabetic markers (<code>a.</code>, <code>b.</code>, <code>c.</code> for lower-alpha and <code>A.</code>, <code>B.</code>, <code>C.</code> for upper-alpha) are converted to <abbr title="Hypertext Markup Language">HTML</abbr> lists with appropriate <code>list-style-type</code> <abbr title="Cascading Style Sheets">CSS</abbr>. This is enabled by default in <strong>Unified</strong> mode only.
</p>

<pre><code class="highlight language-c"><span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_for_mode</span><span class="p">(</span><span class="n">APEX_MODE_UNIFIED</span><span class="p">);</span>
 <span class="n">opts</span><span class="p">.</span><span class="n">allow_alpha_lists</span> <span class="n">is</span> <span class="nb">true</span> <span class="n">by</span> <span class="k">default</span>

 <span class="n">To</span> <span class="n">enable</span> <span class="n">in</span> <span class="n">other</span> <span class="n">modes</span><span class="o">:</span>
<span class="n">opts</span><span class="p">.</span><span class="n">allow_alpha_lists</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

 <span class="n">To</span> <span class="n">disable</span> <span class="n">in</span> <span class="n">unified</span> <span class="n">mode</span><span class="o">:</span>
<span class="n">opts</span><span class="p">.</span><span class="n">allow_alpha_lists</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</code></pre>

<p>
<strong>  Example markdown:</strong>
</p>

<pre><code class="highlight language-markdown">[apex-alpha-list:lower]
<span class="p">
1.</span>  First item
<span class="p">2.</span>  Second item
<span class="p">3.</span>  Third item
</code></pre>

<p>
  This produces <abbr title="Hypertext Markup Language">HTML</abbr> with <code>style=&quot;list-style-type: lower-alpha&quot;</code> on the <code>&lt;ol&gt;</code> tag.
</p>

<h2 id="feature-flags">
  Feature Flags
</h2>

<p>
  All feature flags control whether specific Markdown extensions are enabled:
</p>

<ul>

  <li>
<code>enable_tables</code> - GFM-style tables
  </li>

  <li>
<code>enable_footnotes</code> - Reference and inline footnotes
  </li>

  <li>
<code>enable_definition_lists</code> - Definition lists (term: definition)
  </li>

  <li>
<code>enable_smart_typography</code> - Smart quotes, dashes, ellipsis
  </li>

  <li>
<code>enable_math</code> - LaTeX math (inline <code>$...$</code> and display <code>$$...$$</code>)
  </li>

  <li>
<code>enable_critic_markup</code> - Critic Markup for change tracking
  </li>

  <li>
<code>enable_wiki_links</code> - <code>[[WikiLink]]</code> syntax
  </li>

  <li>
<code>enable_task_lists</code> - GFM task lists (<code>- [ ]</code> and <code>- [x]</code>)
  </li>

  <li>
<code>enable_attributes</code> - Inline Attribute Lists (IAL)
  </li>

  <li>
<code>enable_callouts</code> - Bear/Obsidian-style callouts
  </li>

  <li>
<code>enable_marked_extensions</code> - Marked app extensions (TOC, page breaks, etc.)
  </li>

</ul>

<p>
  These are typically enabled/disabled based on the selected mode, but can be overridden.
</p>

<h2 id="metadata-options">
  Metadata Options
</h2>

<ul>

  <li>
<code>strip_metadata</code> - Remove metadata from output (default: true)
  </li>

  <li>
<code>enable_metadata_variables</code> - Enable <code>[%key]</code> variable replacement (default: true in <abbr title="MultiMarkdown">MMD</abbr>/Kramdown/Unified modes)
  </li>

</ul>

<h2 id="file-inclusion">
  File Inclusion
</h2>

<ul>

  <li>
<code>enable_file_includes</code> - Enable file inclusion syntax (``, <code>{{file.md}}</code>, `/file.md`)
  </li>

  <li>
<code>max_include_depth</code> - Maximum nesting depth for includes (default: 10)
  </li>

  <li>
<code>base_directory</code> - Base directory for resolving relative include paths (NULL = current directory)
  </li>

</ul>

<h2 id="output-options">
  Output Options
</h2>

<ul>

  <li>
<code>unsafe</code> - Allow raw <abbr title="Hypertext Markup Language">HTML</abbr> in output (default: true)
  </li>

  <li>
<code>validate_utf8</code> - Validate UTF-8 encoding (default: true)
  </li>

  <li>
<code>github_pre_lang</code> - Use GitHub-style code block language format (default: true)
  </li>

  <li>
<code>standalone</code> - Generate complete <abbr title="Hypertext Markup Language">HTML</abbr> document with <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, <code>&lt;body&gt;</code> (default: false)
  </li>

  <li>
<code>pretty</code> - Pretty-print <abbr title="Hypertext Markup Language">HTML</abbr> with indentation (default: false)
  </li>

  <li>
<code>stylesheet_path</code> - Path to <abbr title="Cascading Style Sheets">CSS</abbr> file to link in <code>&lt;head&gt;</code> (requires <code>standalone</code>)
  </li>

  <li>
<code>document_title</code> - Title for <abbr title="Hypertext Markup Language">HTML</abbr> document (requires <code>standalone</code>)
  </li>

</ul>

<h2 id="line-break-options">
  Line Break Options
</h2>

<ul>

  <li>
<code>hardbreaks</code> - Treat newlines as hard breaks (<code>&lt;br&gt;</code>) like GFM (default: false, true in GFM mode)
  </li>

  <li>
<code>nobreaks</code> - Render soft breaks as spaces instead of newlines (default: false)
  </li>

</ul>

<h2 id="header-id-options">
  Header ID Options
</h2>

<ul>

  <li>
<code>generate_header_ids</code> - Automatically generate IDs for headers (default: true)
  </li>

  <li>
<code>header_anchors</code> - Generate <code>&lt;a&gt;</code> anchor tags instead of <code>id</code> attributes (default: false)
  </li>

  <li>
<code>id_format</code> - ID format: <code>0</code> = GFM (with dashes), <code>1</code> = <abbr title="MultiMarkdown">MMD</abbr> (no dashes), <code>2</code> = Kramdown
  </li>

</ul>

<h2 id="table-options">
  Table Options
</h2>

<ul>

  <li>
<code>relaxed_tables</code> - Support tables without separator rows (Kramdown-style, default: true in Unified/Kramdown modes)
  </li>

</ul>

<h2 id="complete-example">
  Complete Example
</h2>

<pre><code class="highlight language-c"><span class="cp">#include</span> <span class="cpf">&lt;apex/apex.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">markdown</span> <span class="o">=</span>
        <span class="s">"---</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"title: Test Document</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"author: John Doe</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"---</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"# [%title]</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"By [%author]</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"This has **bold** and a [[WikiLink]].</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"Math: $E = mc^2$</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"1. Mixed markers</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"* Second item</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"a. Alpha list</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"b. Second alpha</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="c1">// Use unified mode with all features</span>
    <span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_for_mode</span><span class="p">(</span><span class="n">APEX_MODE_UNIFIED</span><span class="p">);</span>
    <span class="c1">// Mixed markers and alpha lists are enabled by default in unified mode</span>
    <span class="n">opts</span><span class="p">.</span><span class="n">pretty</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="n">opts</span><span class="p">.</span><span class="n">standalone</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="n">opts</span><span class="p">.</span><span class="n">document_title</span> <span class="o">=</span> <span class="s">"Test Document"</span><span class="p">;</span>

    <span class="c1">// Convert to &lt;abbr title="Hypertext Markup Language"&gt;HTML&lt;/abbr&gt;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">markdown</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">html</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">html</span><span class="p">);</span>
        <span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"Conversion failed</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<h2 id="compiling-and-linking">
  Compiling and Linking
</h2>

<h3 id="with-cmake">
  With CMake
</h3>

<pre><code class="highlight language-cmake"><span class="c1"># In your CMakeLists.txt</span>
<span class="nb">find_package</span><span class="p">(</span>apex REQUIRED<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>your_app apex<span class="p">)</span>
</code></pre>

<h3 id="manual-compilation">
  Manual Compilation
</h3>

<pre><code class="highlight language-bash"><span class="c"># Compile</span>
gcc <span class="nt">-c</span> <span class="nt">-I</span>/usr/local/include your_app.c

<span class="c"># Link</span>
gcc your_app.o <span class="nt">-L</span>/usr/local/lib <span class="nt">-lapex</span> <span class="nt">-o</span> your_app

<span class="c"># Run (may need library path)</span>
<span class="nv">DYLD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/lib ./your_app  <span class="c"># macOS</span>
<span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/lib ./your_app    <span class="c"># Linux</span>
</code></pre>

<h3 id="static-linking">
  Static Linking
</h3>

<pre><code class="highlight language-bash">gcc your_app.c <span class="nt">-I</span>/usr/local/include <span class="nt">-L</span>/usr/local/lib <span class="nt">-lapex</span> <span class="nt">-static</span> <span class="nt">-o</span> your_app
</code></pre>

<h2 id="thread-safety">
  Thread Safety
</h2>

<p>
  Apex is thread-safe as long as:
</p>

<ol>

  <li>
    Each thread uses its own <code>apex_options</code> structure
  </li>

  <li>
    Document nodes are not shared between threads
  </li>

  <li>
    The conversion function can be called from multiple threads simultaneously
  </li>

</ol>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"> <span class="n">Thread</span><span class="o">-</span><span class="n">safe</span><span class="o">:</span> <span class="n">each</span> <span class="kr">thread</span> <span class="n">has</span> <span class="n">its</span> <span class="n">own</span> <span class="n">options</span>
<span class="kt">void</span> <span class="o">*</span><span class="nf">thread_func</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_default</span><span class="p">();</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>
    <span class="c1">// Use html...</span>
    <span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

<h2 id="memory-management">
  Memory Management
</h2>

<ul>

  <li>
    All strings returned by Apex must be freed with <code>apex_free_string()</code>
  </li>

  <li>
<code>apex_options</code> structures are typically stack-allocated (no freeing needed)
  </li>

  <li>
    Safe to call <code>apex_free_string(NULL)</code>
  </li>

  <li>
    Always check return values before use
  </li>

</ul>

<h2 id="error-handling">
  Error Handling
</h2>

<ul>

  <li>
    Functions return <code>NULL</code> or empty strings on error
  </li>

  <li>
    Check return values before use
  </li>

  <li>
    Errors are generally due to:
    <ul>

      <li>
        Memory allocation failures
      </li>

      <li>
        Invalid input
      </li>

      <li>
        Missing dependencies
      </li>

    </ul>

  </li>

</ul>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"><span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">html</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"Conversion failed</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
 <span class="n">Use</span> <span class="n">html</span><span class="p">...</span>
<span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
</code></pre>

<h2 id="performance-tips">
  Performance Tips
</h2>

<ol>

  <li>
<strong>    Reuse options</strong>: Create <code>apex_options</code> once and reuse for multiple conversions
  </li>

  <li>
<strong>    Provide accurate length</strong>: Avoid unnecessary <code>strlen()</code> calls
  </li>

  <li>
<strong>    Disable unused features</strong>: Turn off extensions you don’t need
  </li>

  <li>
<strong>    Batch processing</strong>: Process multiple documents in parallel (thread-safe)
  </li>

</ol>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"> <span class="nl">Good:</span> <span class="n">reuse</span> <span class="n">options</span>
<span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_default</span><span class="p">();</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">count</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">docs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">lens</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>
    <span class="c1">// Process...</span>
    <span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<h2 id="related">
  Related
</h2>

<ul>

  <li>

    <p>
<a href="#xcode-integration" onclick="showPage('xcode-integration'); return false;">      Xcode Integration</a> - Using Apex in Xcode projects
    </p>

  </li>

  <li>

    <p>
<a href="#modes" onclick="showPage('modes'); return false;">      Modes</a> - Understanding processor modes
    </p>

  </li>

  <li>

    <p>
<a href="#header-ids" onclick="showPage('header-ids'); return false;">      Header IDs</a> - Header ID generation options
    </p>

<pre><code class="highlight ">   # Glob include (first matching .md file)
</code></pre>

</li>

</ul>

<p>
  {{c?de.py}}      # ? wildcard (e.g. resolves to code.py)
</p>

<pre><code class="highlight ">
`{{file.*}}` implements MultiMarkdown-style wildcard resolution, trying common extensions in a preferred order.
Patterns containing `*`, `?`, `[]`, or `{}` are treated as glob patterns and resolved relative to the current transclude base (see metadata `transclude base`).

**iA Writer syntax:**
```markdown
/image.png       # Intelligent include (detects type)
/code.py         # Auto-detects as code block
/document.md     # Auto-detects as Markdown
</code></pre>

<p>
  CSV and TSV files automatically convert to tables.
</p>

<h3 id="address-syntax-for-file-includes">
  Address Syntax for File Includes
</h3>

<p>
  File includes support mmark-style address syntax to include specific line ranges or sections. This works with <code>{{file}}</code> and <code>, </code>, `` syntaxes, but <strong>not</strong> with iA Writer <code>/file</code> syntax.
</p>

<p>
<strong>  Line number ranges:</strong>
</p>

<pre><code class="highlight language-markdown">{{file.md}}[3,5]        # Include lines 3 to 5 (exclusive of 5)
{{file.md}}[3,]         # Include from line 3 to end of file
       # Include lines 1 to 10 in Marked syntax
       # Include lines 5 to 15 in code block
</code></pre>

<p>
<strong>  Regular expression ranges:</strong>
</p>

<pre><code class="highlight language-markdown">{{file.md}}[/START/,/END/]     # Include lines between regex matches
{{file.md}}[/<span class="nt">&lt;sup&gt;</span>##<span class="nt">&lt;/sup&gt;</span> /,/<span class="nt">&lt;sup&gt;</span>##<span class="nt">&lt;/sup&gt;</span> /]     # Include between heading markers
   # Include from function to closing brace
</code></pre>

<p>
<strong>  Prefix option:</strong>
</p>

<pre><code class="highlight language-markdown">{{file.md}}[3,5;prefix="C: "]   # Prefix each line with "C: "
{{code.py}}[1,10;prefix="  "]  # Indent included lines
</code></pre>

<p>
<strong>  Combined examples:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Include lines 10-20 with prefix</span>
{{example.py}}[10,20;prefix="    "]

<span class="gh"># Include from regex match to end</span>
{{config.md}}[/<span class="nt">&lt;sup&gt;</span>##<span class="nt">&lt;/sup&gt;</span> Config/,]

<span class="gh"># Include between patterns with prefix</span>
{{script.sh}}[/# START/,/# END/;prefix="# "]
</code></pre>

<p>
<strong>  Notes:</strong>
</p>

<ul>

  <li>
    Line numbers are 1-based
  </li>

  <li>
    End line is exclusive (e.g., <code>[3,5]</code> includes lines 3 and 4, not 5)
  </li>

  <li>
    Regex patterns use POSIX extended regular expressions
  </li>

  <li>
    If start pattern is not found, empty content is returned
  </li>

  <li>
    If end pattern is not found, content from start to end of file is included
  </li>

  <li>
    Prefix is applied to each included line
  </li>

</ul>

<h3 id="address-syntax-for-file-includes">
  Address Syntax for File Includes
</h3>

<p>
  Apex supports mmark-style address syntax for specifying line ranges and applying prefixes to included files. This works with <code>{{file}}</code> and `` syntaxes (but not iA Writer <code>/file</code> syntax).
</p>

<p>
<strong>  Line number ranges:</strong>
</p>

<pre><code class="highlight language-markdown">{{file.md}}[3,5]      # Include lines 3 to 5 (exclusive of 5)
{{file.md}}[3,]       # Include from line 3 to end of file
     # Include lines 1 to 10
     # Include lines 5 to 15 from code file
</code></pre>

<p>
<strong>  Regular expression ranges:</strong>
</p>

<pre><code class="highlight language-markdown">{{file.md}}[/START/,/END/]           # Include lines between regex matches
{{file.md}}[/<span class="nt">&lt;sup&gt;</span>##<span class="nt">&lt;/sup&gt;</span> Section/,/<span class="nt">&lt;sup&gt;</span>##<span class="nt">&lt;/sup&gt;</span> /]     # Include from section to next section
            # Include between BEGIN and END markers
</code></pre>

<p>
<strong>  Prefix option:</strong>
</p>

<pre><code class="highlight language-markdown">{{file.md}}[3,5;prefix="C: "]         # Prefix each line with "C: "
{{file.md}}[prefix="&gt; "]              # Prefix all lines with "&gt; "
      # Prefix with 4 spaces (indentation)
</code></pre>

<p>
<strong>  Combined examples:</strong>
</p>

<pre><code class="highlight language-markdown">{{config.py}}[/def setup/,/<span class="nt">&lt;sup&gt;</span>def<span class="nt">&lt;/sup&gt;</span> /;prefix="# "]
<span class="gh"># Includes lines from "def setup" to next "def", with "# " prefix</span>

<span class="gh"># Includes lines 10-20 with blockquote prefix</span>
</code></pre>

<p>
<strong>  Notes:</strong>
</p>

<ul>

  <li>
    Line numbers are 1-based
  </li>

  <li>
    End line is exclusive (e.g., <code>[3,5]</code> includes lines 3 and 4, not 5)
  </li>

  <li>
    Regex patterns use POSIX extended regular expressions
  </li>

  <li>
    Prefix is applied to each included line
  </li>

  <li>
    Address syntax does not apply to iA Writer syntax (<code>/file</code>)
  </li>

</ul>

<h2 id="metadata">
  Metadata
</h2>

<h3 id="yaml-front-matter">
  YAML Front Matter
</h3>

<pre><code class="highlight language-yaml"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">My Document</span>
<span class="na">author</span><span class="pi">:</span> <span class="s">John Doe</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2025-12-06</span>
<span class="nn">---</span>
</code></pre>

<h3 id="multimarkdown-metadata">
  MultiMarkdown Metadata
</h3>

<pre><code class="highlight language-markdown">Title: My Document
Author: John Doe
Date: 2025-12-06

</code></pre>

<h3 id="pandoc-title-block">
  Pandoc Title Block
</h3>

<pre><code class="highlight language-markdown">% My Document
% John Doe
% 2025-12-06
</code></pre>

<h3 id="metadata-variables">
  Metadata Variables
</h3>

<p>
  Use <code>[%key]</code> to insert metadata values anywhere:
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Apex Guide</span>
<span class="na">version</span><span class="pi">:</span> <span class="s">0.1.0</span>
<span class="nn">---</span>

<span class="gh"># [%title]</span>

Version: [%version]
</code></pre>

<p>
  You can also transform metadata values using the <code>[%key:transform]</code> syntax. See <a href="#metadata-transforms" onclick="showPage('metadata-transforms'); return false;">Metadata Transforms</a> for a complete guide to available transforms.
</p>

<p>
<strong>  External Metadata Sources:</strong>
</p>

<p>
  Metadata can also be loaded from external files or specified on the command line:
</p>

<ul>

  <li>
<strong><code>--meta-file FILE</code></strong>: Load metadata from an external file (YAML, <abbr title="MultiMarkdown">MMD</abbr>, or Pandoc format, auto-detected)
  </li>

  <li>
<strong><code>--meta KEY=VALUE</code></strong>: Set metadata from the command line (supports multiple flags and comma-separated pairs)
  </li>

</ul>

<p>
  Metadata precedence (highest to lowest):
</p>

<ol>

  <li>
    Command-line metadata (<code>--meta</code>)
  </li>

  <li>
    Document metadata (in the document)
  </li>

  <li>
    File metadata (<code>--meta-file</code>)
  </li>

</ol>

<p>
<strong>  Reusable Metadata Files:</strong>
</p>

<p>
  You can create reusable metadata files for common settings like language and quotes language. This is especially useful for maintaining consistent settings across multiple documents.
</p>

<p>
<strong>  Example metadata file (<code>lang-fr.yml</code>):</strong>
</p>

<pre><code class="highlight language-yaml"><span class="nn">---</span>
<span class="na">language</span><span class="pi">:</span> <span class="s">fr</span>
<span class="na">quoteslanguage</span><span class="pi">:</span> <span class="s">french</span>
<span class="nn">---</span>
</code></pre>

<p>
<strong>  Note:</strong> In YAML, keys with spaces must be quoted (e.g., <code>&quot;Quotes Language&quot;: french</code>). Since Apex normalizes metadata keys (removes spaces, case-insensitive), you can use keys without spaces for cleaner YAML syntax. Both <code>quoteslanguage</code> and <code>&quot;Quotes Language&quot;</code> will work.
</p>

<p>
<strong>  Example metadata file (<code>lang-de.mmd</code>):</strong>
</p>

<pre><code class="highlight ">Language: de
Quotes Language: german
</code></pre>

<p>
<strong>  Note:</strong> MultiMarkdown format allows spaces in keys, so <code>Quotes Language</code> works without quotes.
</p>

<p>
<strong>  Usage:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Use French language settings for all documents</span>
apex document1.md <span class="nt">--meta-file</span> lang-fr.yml
apex document2.md <span class="nt">--meta-file</span> lang-fr.yml
</code></pre>

<p>
<strong>  Benefits:</strong>
</p>

<ul>

  <li>
<strong>    Consistency</strong>: Ensure all documents use the same language settings
  </li>

  <li>
<strong>    Reusability</strong>: Define language and quotes language once, use across many documents
  </li>

  <li>
<strong>    Maintainability</strong>: Update language settings in one place
  </li>

  <li>
<strong>    Automatic fallback</strong>: If <code>Quotes Language</code> is not specified, it automatically uses the <code>language</code> value
  </li>

</ul>

<p>
<strong>  Controlling Command-Line Options via Metadata:</strong>
</p>

<p>
  Most command-line options can be controlled via metadata, allowing per-document configuration. Boolean options accept <code>true</code>/<code>false</code>, <code>yes</code>/<code>no</code>, or <code>1</code>/<code>0</code> (case-insensitive). String options use the value directly.
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-yaml"><span class="nn">---</span>
<span class="na">indices</span><span class="pi">:</span> <span class="kc">false</span>
<span class="na">wikilinks</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">bibliography</span><span class="pi">:</span> <span class="s">references.bib</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">My Research Paper</span>
<span class="na">pretty</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">standalone</span><span class="pi">:</span> <span class="kc">true</span>
<span class="nn">---</span>
</code></pre>

<p>
  This enables batch processing where each file can have its own configuration. See <a href="#command-line-options" onclick="showPage('command-line-options'); return false;">Command Line Options</a> for complete documentation of metadata options and which options can be controlled via metadata.
</p>

<h2 id="abbreviations">
  Abbreviations
</h2>

<p>
<strong>  Classic <abbr title="MultiMarkdown">MMD</abbr> syntax:</strong>
</p>

<pre><code class="highlight language-markdown">
<span class="nt">&lt;abbr</span> <span class="na">title=</span><span class="s">"Hypertext Markup Language"</span><span class="nt">&gt;</span>HTML<span class="nt">&lt;/abbr&gt;</span> and <span class="nt">&lt;abbr</span> <span class="na">title=</span><span class="s">"Cascading Style Sheets"</span><span class="nt">&gt;</span>CSS<span class="nt">&lt;/abbr&gt;</span> are essential.
</code></pre>

<p>
<strong><abbr title="MultiMarkdown">  MMD</abbr> 6 reference syntax:</strong>
</p>

<pre><code class="highlight language-markdown">
Using <span class="nt">&lt;abbr</span> <span class="na">title=</span><span class="s">"MultiMarkdown"</span><span class="nt">&gt;</span>MMD<span class="nt">&lt;/abbr&gt;</span> here and <span class="nt">&lt;abbr</span> <span class="na">title=</span><span class="s">"MultiMarkdown"</span><span class="nt">&gt;</span>MMD<span class="nt">&lt;/abbr&gt;</span> again.
</code></pre>

<p>
<strong><abbr title="MultiMarkdown">  MMD</abbr> 6 inline syntax:</strong>
</p>

<pre><code class="highlight language-markdown">This is MD and <span class="nt">&lt;abbr</span> <span class="na">title=</span><span class="s">"Cascading Style Sheets"</span><span class="nt">&gt;</span>CSS<span class="nt">&lt;/abbr&gt;</span>.
</code></pre>

<h2 id="inline-attribute-lists-ial">
  Inline Attribute Lists (IAL)
</h2>

<p>
  Kramdown and Pandoc syntax for adding <abbr title="Hypertext Markup Language">HTML</abbr> attributes (IDs, classes, and custom key-value pairs) to Markdown elements.
</p>

<p>
  Apex supports both <strong>Kramdown-style IALs</strong> (<code>{: ...}</code>) and <strong>Pandoc-style IALs</strong> (<code>{#id .class}</code>). Both formats work identically throughout the document.
</p>

<p>
<strong>  Block-level IALs</strong> appear on the line immediately after the element:
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Header</span>

{: #custom-id}

<span class="gh"># Another Header</span>

{#custom-id-2 .highlight}

Paragraph with class.

{: .important}

<span class="gu">## Another Header</span>

{: #section-2 .highlight title="Section Title" lang="en"}
</code></pre>

<p>
<strong>  Inline IALs</strong> appear immediately after the element within the paragraph:
</p>

<pre><code class="highlight language-markdown">Here's a <span class="p">[</span><span class="nv">styled link</span><span class="p">](</span><span class="sx">url</span><span class="p">)</span>{:.button} with a class.

Here's a <span class="p">[</span><span class="nv">Pandoc-style link</span><span class="p">](</span><span class="sx">url</span><span class="p">)</span>{#link-id .button} with attributes.

This has <span class="gs">**bold text**</span>{:.bold-style} and <span class="ge">*italic text*</span>{:.italic-style}.
</code></pre>

<p>
<strong>  Key-value pairs</strong> allow custom attributes:
</p>

<pre><code class="highlight language-markdown">Paragraph.

{: title="Important Note" lang="en" data-custom="value"}

<span class="p">[</span><span class="nv">Link</span><span class="p">](</span><span class="sx">url</span><span class="p">)</span>{:rel="nofollow" target="_blank"}
</code></pre>

<p>
<strong>  Attribute List Definitions (ALDs)</strong> define reusable attribute sets:
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Header 1</span>

{:my-style}

<span class="gh"># Header 2</span>

{:my-style}

</code></pre>

<p>
<strong>  ALD references can be combined with additional attributes</strong> in the same IAL. Additional attributes override or extend the ALD:
</p>

<pre><code class="highlight language-markdown">
<span class="gh"># Heading 1</span>

{:base-style}

<span class="gh"># Heading 2</span>

{:base-style .class3}

<span class="gh"># Heading 3</span>

{:base-style #override-id}

<span class="gh"># Heading 4</span>

{:base-style .class3 rel="nofollow"}
</code></pre>

<p>
<strong>  Behavior:</strong>
</p>

<ul>

  <li>
<strong>    Classes</strong>: Additional classes are appended to the ALD classes
  </li>

  <li>
<strong>    IDs</strong>: If an ID is specified in the IAL, it overrides the ALD’s ID
  </li>

  <li>
<strong>    Key-value attributes</strong>: If a key exists in both ALD and IAL, the IAL value overrides the ALD value
  </li>

</ul>

<p>
  For complete documentation with examples, see <a href="#inline-attribute-lists" onclick="showPage('inline-attribute-lists'); return false;">Inline Attribute Lists</a>.
</p>

<h2 id="table-of-contents">
  Table of Contents
</h2>

<p>
  Multiple marker formats:
</p>

<pre><code class="highlight language-markdown"><span class="c">&lt;!--TOC--&gt;</span>              # Basic TOC
<span class="c">&lt;!--TOC max2 min1--&gt;</span>    # With depth control
<span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">"toc"</span><span class="nt">&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#basic-markdown"</span><span class="nt">&gt;</span>Basic Markdown<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#headers"</span><span class="nt">&gt;</span>Headers<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#emphasis"</span><span class="nt">&gt;</span>Emphasis<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#superscript-and-subscript"</span><span class="nt">&gt;</span>Superscript and Subscript<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#lists"</span><span class="nt">&gt;</span>Lists<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#links-and-images"</span><span class="nt">&gt;</span>Links and Images<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#code"</span><span class="nt">&gt;</span>Code<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#blockquotes"</span><span class="nt">&gt;</span>Blockquotes<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#horizontal-rules"</span><span class="nt">&gt;</span>Horizontal Rules<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#tables"</span><span class="nt">&gt;</span>Tables<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#standard-tables"</span><span class="nt">&gt;</span>Standard Tables<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#relaxed-tables"</span><span class="nt">&gt;</span>Relaxed Tables<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#headerless-tables"</span><span class="nt">&gt;</span>Headerless Tables<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#row-header-columns"</span><span class="nt">&gt;</span>Row header columns<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#inline-tables-from-csvtsv"</span><span class="nt">&gt;</span>Inline Tables from CSV/TSV<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#fenced-csvtsv-tables"</span><span class="nt">&gt;</span>Fenced CSV/TSV tables<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#alignment-rows-in-csvtsv-tables"</span><span class="nt">&gt;</span>Alignment rows in CSV/TSV tables<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#table-markers"</span><span class="nt">&gt;</span><span class="c">&lt;!--TABLE--&gt;</span> markers<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#footnotes"</span><span class="nt">&gt;</span>Footnotes<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#reference-style"</span><span class="nt">&gt;</span>Reference Style<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#inline-style-kramdown"</span><span class="nt">&gt;</span>Inline Style (Kramdown)<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#inline-style-multimarkdown"</span><span class="nt">&gt;</span>Inline Style (MultiMarkdown)<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#definition-lists"</span><span class="nt">&gt;</span>Definition Lists<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#citations"</span><span class="nt">&gt;</span>Citations<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#pandoc-citation-syntax"</span><span class="nt">&gt;</span>Pandoc Citation Syntax<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#multimarkdown-citation-syntax"</span><span class="nt">&gt;</span>MultiMarkdown Citation Syntax<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#mmark-citation-syntax"</span><span class="nt">&gt;</span>mmark Citation Syntax<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#bibliography"</span><span class="nt">&gt;</span>Bibliography<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#indices"</span><span class="nt">&gt;</span>Indices<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#mmark-index-syntax"</span><span class="nt">&gt;</span>mmark Index Syntax<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#textindex-syntax"</span><span class="nt">&gt;</span>TextIndex Syntax<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#index-generation"</span><span class="nt">&gt;</span>Index Generation<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#math"</span><span class="nt">&gt;</span>Math<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#wiki-links"</span><span class="nt">&gt;</span>Wiki Links<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#critic-markup"</span><span class="nt">&gt;</span>Critic Markup<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#callouts"</span><span class="nt">&gt;</span>Callouts<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#file-includes"</span><span class="nt">&gt;</span>File Includes<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#apexoptions"</span><span class="nt">&gt;</span>apex_options<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#core-functions"</span><span class="nt">&gt;</span>Core Functions<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#apexoptionsdefault"</span><span class="nt">&gt;</span>apex_options_default<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#apexoptionsformode"</span><span class="nt">&gt;</span>apex_options_for_mode<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#apexmarkdowntohtml"</span><span class="nt">&gt;</span>apex_markdown_to_html<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#apexfreestring"</span><span class="nt">&gt;</span>apex_free_string<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#apexwraphtmldocument"</span><span class="nt">&gt;</span>apex_wrap_html_document<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#apexprettyprinthtml"</span><span class="nt">&gt;</span>apex_pretty_print_html<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#version-functions"</span><span class="nt">&gt;</span>Version Functions<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#apexversionstring"</span><span class="nt">&gt;</span>apex_version_string<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#apexversionmajor-apexversionminor-apexversionpatch"</span><span class="nt">&gt;</span>apex_version_major / apex_version_minor / apex_version_patch<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#list-options"</span><span class="nt">&gt;</span>List Options<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#mixed-list-markers"</span><span class="nt">&gt;</span>Mixed List Markers<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#alpha-lists"</span><span class="nt">&gt;</span>Alpha Lists<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#feature-flags"</span><span class="nt">&gt;</span>Feature Flags<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#metadata-options"</span><span class="nt">&gt;</span>Metadata Options<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#file-inclusion"</span><span class="nt">&gt;</span>File Inclusion<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#output-options"</span><span class="nt">&gt;</span>Output Options<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#line-break-options"</span><span class="nt">&gt;</span>Line Break Options<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#header-id-options"</span><span class="nt">&gt;</span>Header ID Options<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#table-options"</span><span class="nt">&gt;</span>Table Options<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#complete-example"</span><span class="nt">&gt;</span>Complete Example<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#compiling-and-linking"</span><span class="nt">&gt;</span>Compiling and Linking<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#with-cmake"</span><span class="nt">&gt;</span>With CMake<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#manual-compilation"</span><span class="nt">&gt;</span>Manual Compilation<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#static-linking"</span><span class="nt">&gt;</span>Static Linking<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#thread-safety"</span><span class="nt">&gt;</span>Thread Safety<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#memory-management"</span><span class="nt">&gt;</span>Memory Management<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#error-handling"</span><span class="nt">&gt;</span>Error Handling<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#performance-tips"</span><span class="nt">&gt;</span>Performance Tips<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#related"</span><span class="nt">&gt;</span>Related<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>
                 # <span class="nt">&lt;abbr</span> <span class="na">title=</span><span class="s">"MultiMarkdown"</span><span class="nt">&gt;</span>MMD<span class="nt">&lt;/abbr&gt;</span> style
{{TOC:2-4}}            # With range
{:toc}                  # Kramdown IAL marker (uses same TOC engine)
</code></pre>

<p>
  Headings with the <code>.no_toc</code> class are excluded from the generated TOC:
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Contents</span>

{:.no_toc}

<span class="c">&lt;!--TOC--&gt;</span>
</code></pre>

<h2 id="smart-typography">
  Smart Typography
</h2>

<p>
  Automatic conversion:
</p>

<ul>

  <li>
<code>&quot;text&quot;</code> → <code>&quot;text&quot;</code> (smart quotes)
  </li>

  <li>
<code>'text'</code> → <code>'text'</code> (smart apostrophes)
  </li>

  <li>
<code>--</code> → <code>–</code> (en dash)
  </li>

  <li>
<code>---</code> → <code>—</code> (em dash)
  </li>

  <li>
<code>...</code> → <code>…</code> (ellipsis)
  </li>

  <li>
<code>&lt;&lt;</code> → <code>«</code> (left guillemet)
  </li>

  <li>
<code>&gt;&gt;</code> → <code>»</code> (right guillemet)
  </li>

</ul>

<h2 id="github-emoji">
  GitHub Emoji
</h2>

<pre><code class="highlight language-markdown">Success! 🚀 🎉 ✨
I ❤️ Markdown!
</code></pre>

<p>
  Supports 350+ GitHub emoji, converted to Unicode characters.
</p>

<h2 id="special-markers">
  Special Markers
</h2>

<p>
<strong>  Page breaks:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"page-break"</span> <span class="na">style=</span><span class="s">"page-break-after: always;"</span><span class="nt">&gt;&lt;/div&gt;</span>            # <span class="nt">&lt;abbr</span> <span class="na">title=</span><span class="s">"Hypertext Markup Language"</span><span class="nt">&gt;</span>HTML<span class="nt">&lt;/abbr&gt;</span> comment style
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"page-break"</span> <span class="na">style=</span><span class="s">"page-break-after: always;"</span><span class="nt">&gt;&lt;/div&gt;</span>         # Kramdown style
</code></pre>

<p>
<strong>  Autoscroll pauses:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"autoscroll-pause"</span> <span class="na">data-pause=</span><span class="s">"5"</span><span class="nt">&gt;&lt;/div&gt;</span>          # Pause for 5 seconds
</code></pre>

<p>
<strong>  End-of-block marker:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="p">-</span> Item 1

​
<span class="p">
-</span> Item 2
</code></pre>

<p>
  Forces list separation.
</p>

<h2 id="html">
<abbr title="Hypertext Markup Language">  HTML</abbr>
</h2>

<p>
  Raw <abbr title="Hypertext Markup Language">HTML</abbr> is supported (when <code>unsafe</code> option is enabled, which is default):
</p>

<pre><code class="highlight language-markdown"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"custom"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>This is raw <span class="nt">&lt;abbr</span> <span class="na">title=</span><span class="s">"Hypertext Markup Language"</span><span class="nt">&gt;</span>HTML<span class="nt">&lt;/abbr&gt;</span> inside Markdown.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<h3 id="markdown-inside-html-blocks">
  Markdown Inside <abbr title="Hypertext Markup Language">HTML</abbr> Blocks
</h3>

<p>
  By default, Markdown inside <abbr title="Hypertext Markup Language">HTML</abbr> blocks is <strong>not</strong> parsed unless the <abbr title="Hypertext Markup Language">HTML</abbr> block contains blank lines. This follows the CommonMark specification:
</p>

<ul>

  <li>

    <p>
<strong><abbr title="Hypertext Markup Language">      HTML</abbr> blocks without blank lines</strong>: Content is treated as raw <abbr title="Hypertext Markup Language">HTML</abbr> and Markdown is not parsed
    </p>

<pre><code class="highlight language-markdown"><span class="nt">&lt;div&gt;</span><span class="gs">**This is not bold**</span><span class="nt">&lt;/div&gt;</span>
</code></pre>

  <p>
    Output: <code>&lt;div&gt;**This is not bold**&lt;/div&gt;</code>
  </p>

</li>

<li>

  <p>
<strong><abbr title="Hypertext Markup Language">    HTML</abbr> blocks with blank lines</strong>: Content can be parsed as Markdown
  </p>

<pre><code class="highlight language-markdown"><span class="nt">&lt;div&gt;</span>

<span class="gs">**This is bold**</span>

<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>
  Output: <code>&lt;div&gt;&lt;p&gt;&lt;strong&gt;This is bold&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;</code>
</p>

</li>

</ul>

<p>
  To explicitly enable Markdown parsing inside <abbr title="Hypertext Markup Language">HTML</abbr> blocks, use the <code>markdown</code> attribute (GFM extension):
</p>

<pre><code class="highlight language-markdown"><span class="nt">&lt;div&gt;&lt;h2&gt;</span>This is a heading<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;</span>List item<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span>

</code></pre>

<p>
  The <code>markdown</code> attribute accepts:
</p>

<ul>

  <li>
<code>markdown=&quot;1&quot;</code> or <code>markdown=&quot;block&quot;</code> - Parse block-level Markdown
  </li>

  <li>
<code>markdown=&quot;span&quot;</code> - Parse inline Markdown only
  </li>

</ul>

<h3 id="pandoc-fenced-divs">
  Pandoc Fenced Divs
</h3>

<p>
  Apex supports Pandoc’s fenced divs extension, which allows you to create <abbr title="Hypertext Markup Language">HTML</abbr> <code>&lt;div&gt;</code> elements with attributes using a special fence syntax. This feature is available in <strong>unified mode only</strong> and is enabled by default.
</p>

<p>
<strong>  Basic syntax:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"special"</span> <span class="na">class=</span><span class="s">"sidebar"</span><span class="nt">&gt;&lt;p&gt;</span>Here is a paragraph.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>And another.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>
<strong>  Opening fences:</strong>
</p>

<ul>

  <li>
    Must contain at least 3 consecutive colons (<code>:::</code>)
  </li>

  <li>
    Must have attributes (ID, classes, or custom attributes)
  </li>

  <li>
    Attributes can optionally be followed by another string of consecutive colons
  </li>

</ul>

<p>
<strong>  Closing fences:</strong>
</p>

<ul>

  <li>
    Must contain at least 3 consecutive colons (<code>:::</code>)
  </li>

  <li>
    No attributes needed
  </li>

  <li>
    Number of colons doesn’t need to match the opening fence
  </li>

</ul>

<p>
<strong>  Attributes:</strong>
  Attributes use the same syntax as fenced code blocks:
</p>

<ul>

  <li>
<code>{#id}</code> - ID attribute
  </li>

  <li>
<code>{.class}</code> - Class attribute (can have multiple)
  </li>

  <li>
<code>key=&quot;value&quot;</code> - Custom attributes with quoted values
  </li>

  <li>
<code>key='value'</code> - Custom attributes with single quotes
  </li>

  <li>
    Single unbraced word is treated as a class name
  </li>

</ul>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"mydiv"</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;&lt;p&gt;</span>Content here<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"sidebar"</span><span class="nt">&gt;&lt;p&gt;</span>Single unbraced word becomes a class<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"special"</span> <span class="na">class=</span><span class="s">"warning important"</span> <span class="na">key=</span><span class="s">"value"</span><span class="nt">&gt;&lt;p&gt;</span>Div with ID, multiple classes, and custom attribute<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"special"</span> <span class="na">class=</span><span class="s">"sidebar"</span><span class="nt">&gt;&lt;p&gt;</span>Trailing colons after attributes are allowed<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>
<strong>  Nested divs:</strong>
  Fenced divs can be nested. Opening fences must have attributes:
</p>

<pre><code class="highlight language-markdown"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"Warning"</span><span class="nt">&gt;&lt;p&gt;</span>This is a warning.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"Danger"</span><span class="nt">&gt;&lt;p&gt;</span>This is a warning within a warning.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>
<strong>  Block types:</strong>
  By default, fenced divs create <code>&lt;div&gt;</code> elements. You can specify different <abbr title="Hypertext Markup Language">HTML</abbr> block elements using the <code>&gt;blocktype</code> syntax:
</p>

<pre><code class="highlight language-markdown"><span class="nt">&lt;aside</span> <span class="na">class=</span><span class="s">"sidebar"</span> <span class="na">markdown=</span><span class="s">"1"</span><span class="nt">&gt;</span>This creates an <span class="nt">&lt;aside&gt;</span> element instead of a <span class="nt">&lt;div&gt;</span>.
<span class="nt">&lt;/aside&gt;</span>
<span class="nt">&lt;article</span> <span class="na">id=</span><span class="s">"post"</span> <span class="na">class=</span><span class="s">"main"</span> <span class="na">markdown=</span><span class="s">"1"</span><span class="nt">&gt;</span>This creates an <span class="nt">&lt;article&gt;</span> element.
<span class="nt">&lt;/article&gt;</span>
<span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"container"</span> <span class="na">markdown=</span><span class="s">"1"</span><span class="nt">&gt;</span>This creates a <span class="nt">&lt;section&gt;</span> element.
<span class="nt">&lt;/section&gt;</span><span class="sb">```

**Common block types:**
- `&gt;div` - Default, creates a `&lt;div&gt;` element
- `&gt;aside` - Creates an `&lt;aside&gt;` element (sidebars, callouts)
- `&gt;article` - Creates an `&lt;article&gt;` element (main content)
- `&gt;section` - Creates a `&lt;section&gt;` element (document sections)
- `&gt;details` - Creates a `&lt;details&gt;` element (collapsible content)
- `&gt;summary` - Creates a `&lt;summary&gt;` element (for use inside `&lt;details&gt;`)

**Nested block types:**
You can nest different block types:
```</span>markdown
<span class="nt">&lt;details</span> <span class="na">class=</span><span class="s">"warning"</span><span class="nt">&gt;&lt;summary&gt;&lt;p&gt;</span>This is a summary<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/summary&gt;</span>
This is the content of the details block
<span class="nt">&lt;/details&gt;</span>

<span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"outer"</span><span class="nt">&gt;&lt;p&gt;</span>Outer section content.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;aside</span> <span class="na">class=</span><span class="s">"inner"</span><span class="nt">&gt;&lt;p&gt;</span>Inner aside content.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/aside&gt;</span>
<span class="nt">&lt;p&gt;</span>More outer content.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/section&gt;</span>
</code></pre>

<p>
<strong>  Block type with unbraced class:</strong>
  The block type syntax works with unbraced class names:
</p>

<pre><code class="highlight language-markdown"><span class="nt">&lt;aside</span> <span class="na">class=</span><span class="s">"Warning"</span><span class="nt">&gt;&lt;p&gt;</span>Warning content here<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/aside&gt;</span>
</code></pre>

<p>
  This creates <code>&lt;aside class=&quot;Warning&quot;&gt;...&lt;/aside&gt;</code>.
</p>

<p>
<strong>  Note:</strong> Fenced divs should be separated by blank lines from preceding and following blocks for best results.
</p>

<p>
<strong>  Control:</strong>
</p>

<ul>

  <li>
    Use <code>--divs</code> to explicitly enable (default in unified mode)
  </li>

  <li>
    Use <code>--no-divs</code> to disable fenced divs processing
  </li>

</ul>

<h2 id="related">
  Related
</h2>

<ul>

  <li>
<a href="#modes" onclick="showPage('modes'); return false;">    Modes</a> - Which syntax is available in each mode
  </li>

  <li>
<a href="#header-ids" onclick="showPage('header-ids'); return false;">    Header IDs</a> - Automatic header ID generation
  </li>

  <li>
<a href="#command-line-options" onclick="showPage('command-line-options'); return false;">    Command Line Options</a> - Feature flags including <code>--[no-]autolink</code>, <code>--[no-]mixed-lists</code>, <code>--[no-]alpha-lists</code>, <code>--[no-]sup-sub</code>, and <code>--[no-]divs</code>
  </li>

</ul>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-inline-attribute-lists" class="page">

    <h1 id="inline-attribute-lists-ials-and-attribute-list-definitions-alds">
      Inline Attribute Lists (IALs) and Attribute List Definitions (ALDs)
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#inline-attribute-lists-ials-and-attribute-list-definitions-alds">Inline Attribute Lists (IALs) and Attribute List Definitions (ALDs)</a><ul><li><a href="#overview">Overview</a></li><li><a href="#block-level-ials">Block-Level IALs</a><ul><li><a href="#paragraphs">Paragraphs</a></li><li><a href="#headings">Headings</a></li><li><a href="#lists">Lists</a></li><li><a href="#blockquotes">Blockquotes</a></li><li><a href="#tables">Tables</a></li></ul></li><li><a href="#inline-ials">Inline IALs</a><ul><li><a href="#links">Links</a></li><li><a href="#images">Images</a></li><li><a href="#emphasis-and-strong">Emphasis and Strong</a></li><li><a href="#code-spans">Code Spans</a></li></ul></li><li><a href="#attribute-syntax">Attribute Syntax</a><ul><li><a href="#1-ids">1. IDs</a></li><li><a href="#2-classes">2. Classes</a></li><li><a href="#3-key-value-pairs">3. Key-Value Pairs</a></li><li><a href="#combining-attributes">Combining Attributes</a></li></ul></li><li><a href="#attribute-list-definitions-alds">Attribute List Definitions (ALDs)</a><ul><li><a href="#defining-alds">Defining ALDs</a></li><li><a href="#ald-syntax">ALD Syntax</a></li><li><a href="#referencing-alds">Referencing ALDs</a></li><li><a href="#mixed-usage">Mixed Usage</a></li></ul></li><li><a href="#important-notes">Important Notes</a><ul><li><a href="#block-level-ial-positioning">Block-Level IAL Positioning</a></li><li><a href="#inline-ial-positioning">Inline IAL Positioning</a></li><li><a href="#multiple-elements-with-same-attributes">Multiple Elements with Same Attributes</a></li><li><a href="#nested-elements">Nested Elements</a></li></ul></li><li><a href="#examples">Examples</a><ul><li><a href="#complete-example">Complete Example</a></li><li><a href="#using-alds-for-consistent-styling">Using ALDs for Consistent Styling</a></li></ul></li><li><a href="#related">Related</a></li></ul></li></ul></nav>

    <p>
      Inline Attribute Lists (IALs) allow you to add HTML attributes (IDs, classes, and custom key-value pairs) to Markdown elements. Attribute List Definitions (ALDs) let you define reusable attribute sets that can be referenced multiple times.
    </p>

    <p>
      This feature is available in <strong>Kramdown</strong> and <strong>unified</strong> modes.
    </p>

    <h2 id="overview">
      Overview
    </h2>

    <p>
      IALs use the syntax <code>{: attributes}</code> (Kramdown-style) or <code>{#id .class}</code> (Pandoc-style) and can be applied to:
    </p>

    <ul>

      <li>
<strong>        Block-level elements</strong>: Headings, paragraphs, lists, blockquotes, code blocks, tables
      </li>

      <li>
<strong>        Span-level elements</strong>: Links, images, emphasis (italic), strong (bold), code spans
      </li>

    </ul>

    <p>
      Apex supports both formats:
    </p>

    <ul>

      <li>
<strong>        Kramdown-style</strong>: <code>{: #id .class key=&quot;value&quot;}</code> - requires a colon after the opening brace
      </li>

      <li>
<strong>        Pandoc-style</strong>: <code>{#id .class key=&quot;value&quot;}</code> - no colon required
      </li>

    </ul>

    <p>
      Both formats work identically. For example, <code>{#my-id .my-class}</code> is equivalent to <code>{:#my-id .my-class}</code>.
    </p>

    <p>
      ALDs define reusable attribute sets with the syntax <code>{🚗 attributes}</code> and can be referenced in IALs using <code>{:ref-name}</code>.
    </p>

    <h2 id="block-level-ials">
      Block-Level IALs
    </h2>

    <p>
      For block-level elements, IALs appear on a separate line immediately after the element (no blank line).
    </p>

    <h3 id="paragraphs">
      Paragraphs
    </h3>

<pre><code class="highlight language-markdown">This is a paragraph with an ID and classes.

{: #para-id .important .note}

This is a paragraph using Pandoc-style IAL.

{#para-id-2 .important .note}

Another paragraph with custom attributes.

{: title="Important Note" lang="en"}
</code></pre>

  <p>
    Output:
  </p>

<pre><code class="highlight language-html"><span class="nt">&lt;p</span> <span class="na">id=</span><span class="s">"para-id"</span> <span class="na">class=</span><span class="s">"important note"</span><span class="nt">&gt;</span>This is a paragraph with an ID and classes.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p</span> <span class="na">id=</span><span class="s">"para-id-2"</span> <span class="na">class=</span><span class="s">"important note"</span><span class="nt">&gt;</span>This is a paragraph using Pandoc-style IAL.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p</span> <span class="na">title=</span><span class="s">"Important Note"</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>Another paragraph with custom attributes.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h3 id="headings">
  Headings
</h3>

<p>
  Headings can have IALs on the same line or the next line:
</p>

<p>
<strong>  Same line:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Heading {: #custom-id}</span>
<span class="gu">## Another Heading {: .highlight .large}</span>
<span class="gu">## Pandoc-style Heading {#pandoc-id .highlight}</span>
</code></pre>

<p>
<strong>  Next line:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Heading</span>

{: #custom-id .highlight}

<span class="gh"># Pandoc-style Heading</span>

{#pandoc-id-2 .highlight}

<span class="gu">## Another Heading</span>

{: .section-title lang="en"}
</code></pre>

<p>
  Output:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"custom-id"</span><span class="nt">&gt;</span>Heading<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h2</span> <span class="na">class=</span><span class="s">"highlight large"</span><span class="nt">&gt;</span>Another Heading<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;h2</span> <span class="na">id=</span><span class="s">"pandoc-id"</span> <span class="na">class=</span><span class="s">"highlight"</span><span class="nt">&gt;</span>Pandoc-style Heading<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"custom-id"</span> <span class="na">class=</span><span class="s">"highlight"</span><span class="nt">&gt;</span>Heading<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"pandoc-id-2"</span> <span class="na">class=</span><span class="s">"highlight"</span><span class="nt">&gt;</span>Pandoc-style Heading<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h2</span> <span class="na">class=</span><span class="s">"section-title"</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>Another Heading<span class="nt">&lt;/h2&gt;</span>
</code></pre>

<h3 id="lists">
  Lists
</h3>

<pre><code class="highlight language-markdown"><span class="p">-</span> Item 1
<span class="p">-</span> Item 2
<span class="p">-</span> Item 3

{: .unordered-list .compact}
<span class="p">
1.</span> First
<span class="p">2.</span> Second
<span class="p">3.</span> Third

{: #ordered-list .numbered}
</code></pre>

<p>
  Output:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"unordered-list compact"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;li&gt;</span>Item 1<span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span>Item 2<span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span>Item 3<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;ol</span> <span class="na">id=</span><span class="s">"ordered-list"</span> <span class="na">class=</span><span class="s">"numbered"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;li&gt;</span>First<span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span>Second<span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span>Third<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ol&gt;</span>
</code></pre>

<h3 id="blockquotes">
  Blockquotes
</h3>

<pre><code class="highlight language-markdown"><span class="gt">&gt; This is a quote.</span>

{: .quote .inspirational}
<span class="gt">
&gt; Another quote with attribution.</span>
</code></pre>

<p>
  Output:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;blockquote</span> <span class="na">class=</span><span class="s">"quote inspirational"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>This is a quote.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/blockquote&gt;</span>
<span class="nt">&lt;blockquote</span> <span class="na">cite=</span><span class="s">"https://example.com"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>Another quote with attribution.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/blockquote&gt;</span>
</code></pre>

<h3 id="tables">
  Tables
</h3>

<p>
  Tables can have IALs applied on a separate line after the table:
</p>

<pre><code class="highlight language-markdown">| Key | Value |
| --- | :---: |
| one |   1   |
| --- | --- |
| two |   2   |

{: #data-table .striped .bordered}
</code></pre>

<p>
  Output:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"data-table"</span> <span class="na">class=</span><span class="s">"striped bordered"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- table content --&gt;</span>
<span class="nt">&lt;/table&gt;</span>
</code></pre>

<p>
<strong>  Pandoc table_attributes extension:</strong>
</p>

<p>
  Apex also supports Pandoc’s <code>table_attributes</code> extension, which allows IAL attributes to be specified in table captions. When using Pandoc-style captions with the <code>: Caption</code> syntax, IAL attributes in the caption are extracted and applied to the table:
</p>

<pre><code class="highlight language-markdown">| Key | Value |
| --- | :---: |
| one |   1   |
| --- | --- |
| two |   2   |

<span class="nt">&lt;dl&gt;</span>
<span class="nt">&lt;dd&gt;</span>Key value table {#table-id .testing key="value"}<span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

</code></pre>

<p>
  This is equivalent to:
</p>

<pre><code class="highlight language-markdown">| Key | Value |
| --- | :---: |
| one |   1   |
| --- | --- |
| two |   2   |

{: #table-id .testing key="value"}
</code></pre>

<p>
  Both Kramdown-style IALs (<code>{: #id .class}</code>) and Pandoc-style IALs without the colon (<code>{#id .class}</code>) are supported in table captions.
</p>

<p>
<strong>  Note:</strong> The <code>: Caption</code> syntax only works when adjacent to a table to avoid conflicts with definition list syntax. See <a href="#syntax" onclick="showPage('syntax'); return false;">Syntax</a> for more details on table captions.
</p>

<h2 id="inline-ials">
  Inline IALs
</h2>

<p>
  Inline IALs appear immediately after the element they apply to, within the same paragraph.
</p>

<h3 id="links">
  Links
</h3>

<pre><code class="highlight language-markdown">This is a <span class="p">[</span><span class="nv">regular link</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span> without attributes.

Here's a <span class="p">[</span><span class="nv">styled link</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span>{:.button} with a button class.

Here's a <span class="p">[</span><span class="nv">Pandoc-style link</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span>{#link-id .button} with attributes.

You can have <span class="p">[</span><span class="nv">multiple links</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span>{:.link-primary} with <span class="p">[</span><span class="nv">different classes</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span>{:.link-secondary} in the same paragraph.

A link with <span class="p">[</span><span class="nv">custom attributes</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span>{:rel="nofollow" title="External Link"}.
</code></pre>

<p>
  Output:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>This is a <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://example.com"</span><span class="nt">&gt;</span>regular link<span class="nt">&lt;/a&gt;</span> without attributes.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Here's a <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://example.com"</span> <span class="na">class=</span><span class="s">"button"</span><span class="nt">&gt;</span>styled link<span class="nt">&lt;/a&gt;</span> with a button class.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Here's a <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://example.com"</span> <span class="na">id=</span><span class="s">"link-id"</span> <span class="na">class=</span><span class="s">"button"</span><span class="nt">&gt;</span>Pandoc-style link<span class="nt">&lt;/a&gt;</span> with attributes.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>You can have <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://example.com"</span> <span class="na">class=</span><span class="s">"link-primary"</span><span class="nt">&gt;</span>multiple links<span class="nt">&lt;/a&gt;</span> with <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://example.com"</span> <span class="na">class=</span><span class="s">"link-secondary"</span><span class="nt">&gt;</span>different classes<span class="nt">&lt;/a&gt;</span> in the same paragraph.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>A link with <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://example.com"</span> <span class="na">rel=</span><span class="s">"nofollow"</span> <span class="na">title=</span><span class="s">"External Link"</span><span class="nt">&gt;</span>custom attributes<span class="nt">&lt;/a&gt;</span>.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h3 id="images">
  Images
</h3>

<pre><code class="highlight language-markdown"><span class="p">![</span><span class="nv">Regular image</span><span class="p">](</span><span class="sx">image.png</span><span class="p">)</span>

<span class="p">![</span><span class="nv">Styled image</span><span class="p">](</span><span class="sx">logo.png</span><span class="p">)</span>

<span class="p">![</span><span class="nv">Image with ID</span><span class="p">](</span><span class="sx">icon.png</span><span class="p">)</span>

<span class="p">![</span><span class="nv">Image with title</span><span class="p">](</span><span class="sx">photo.jpg</span><span class="p">)</span>
</code></pre>

<p>
  Output:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;&lt;img</span> <span class="na">src=</span><span class="s">"image.png"</span> <span class="na">alt=</span><span class="s">"Regular image"</span> <span class="nt">/&gt;&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;&lt;img</span> <span class="na">src=</span><span class="s">"logo.png"</span> <span class="na">alt=</span><span class="s">"Styled image"</span> <span class="na">class=</span><span class="s">"logo centered"</span> <span class="nt">/&gt;&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;&lt;img</span> <span class="na">src=</span><span class="s">"icon.png"</span> <span class="na">alt=</span><span class="s">"Image with ID"</span> <span class="na">id=</span><span class="s">"site-icon"</span> <span class="na">class=</span><span class="s">"icon"</span> <span class="nt">/&gt;&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;&lt;img</span> <span class="na">src=</span><span class="s">"photo.jpg"</span> <span class="na">alt=</span><span class="s">"Image with title"</span> <span class="na">title=</span><span class="s">"Photo Title"</span> <span class="na">alt=</span><span class="s">"Photo description"</span> <span class="nt">/&gt;&lt;/p&gt;</span>
</code></pre>

<h3 id="emphasis-and-strong">
  Emphasis and Strong
</h3>

<pre><code class="highlight language-markdown">This paragraph has <span class="gs">**bold text**</span>{:.bold-style} with a custom class and <span class="ge">*italic text*</span>{:.italic-style} with another class.

You can combine <span class="gs">**bold**</span>{:.bold} and <span class="ge">*italic*</span>{:.italic} in the same paragraph with different styles.

Nested <span class="ge">**</span>bold with <span class="ge">*italic*</span>{:.nested-italic} inside<span class="ge">**</span>{:.bold-wrapper} works too.
</code></pre>

<p>
  Output:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>This paragraph has <span class="nt">&lt;strong</span> <span class="na">class=</span><span class="s">"bold-style"</span><span class="nt">&gt;</span>bold text<span class="nt">&lt;/strong&gt;</span> with a custom class and <span class="nt">&lt;em</span> <span class="na">class=</span><span class="s">"italic-style"</span><span class="nt">&gt;</span>italic text<span class="nt">&lt;/em&gt;</span> with another class.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>You can combine <span class="nt">&lt;strong</span> <span class="na">class=</span><span class="s">"bold"</span><span class="nt">&gt;</span>bold<span class="nt">&lt;/strong&gt;</span> and <span class="nt">&lt;em</span> <span class="na">class=</span><span class="s">"italic"</span><span class="nt">&gt;</span>italic<span class="nt">&lt;/em&gt;</span> in the same paragraph with different styles.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Nested <span class="nt">&lt;strong</span> <span class="na">class=</span><span class="s">"bold-wrapper"</span><span class="nt">&gt;</span>bold with <span class="nt">&lt;em</span> <span class="na">class=</span><span class="s">"nested-italic"</span><span class="nt">&gt;</span>italic<span class="nt">&lt;/em&gt;</span> inside<span class="nt">&lt;/strong&gt;</span> works too.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h3 id="code-spans">
  Code Spans
</h3>

<pre><code class="highlight language-markdown">Use <span class="sb">`inline code`</span>{:.code-inline} for code snippets with styling.

You can have multiple <span class="sb">`code spans`</span>{:.code-1} and <span class="sb">`more code`</span>{:.code-2} with different classes.
</code></pre>

<p>
  Output:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>Use <span class="nt">&lt;code</span> <span class="na">class=</span><span class="s">"code-inline"</span><span class="nt">&gt;</span>inline code<span class="nt">&lt;/code&gt;</span> for code snippets with styling.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>You can have multiple <span class="nt">&lt;code</span> <span class="na">class=</span><span class="s">"code-1"</span><span class="nt">&gt;</span>code spans<span class="nt">&lt;/code&gt;</span> and <span class="nt">&lt;code</span> <span class="na">class=</span><span class="s">"code-2"</span><span class="nt">&gt;</span>more code<span class="nt">&lt;/code&gt;</span> with different classes.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h2 id="attribute-syntax">
  Attribute Syntax
</h2>

<p>
  IALs support three types of attributes:
</p>

<h3 id="1-ids">
  1. IDs
</h3>

<p>
  Use <code>#</code> followed by the ID name:
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Heading {: #section-1}</span>
</code></pre>

<p>
  Output: <code>&lt;h1 id=&quot;section-1&quot;&gt;Heading&lt;/h1&gt;</code>
</p>

<h3 id="2-classes">
  2. Classes
</h3>

<p>
  Use <code>.</code> followed by the class name. Multiple classes can be specified:
</p>

<pre><code class="highlight language-markdown">Paragraph.

{: .important .note .highlight}
</code></pre>

<p>
  Output: <code>&lt;p class=&quot;important note highlight&quot;&gt;Paragraph.&lt;/p&gt;</code>
</p>

<p>
<strong>  Note:</strong> Multiple <code>.class</code> specifiers are equivalent to a single <code>class</code> attribute with space-separated values.
</p>

<h3 id="3-key-value-pairs">
  3. Key-Value Pairs
</h3>

<p>
  Use <code>key=&quot;value&quot;</code> or <code>key='value'</code> for custom attributes. Values can be quoted (single or double quotes) or unquoted:
</p>

<pre><code class="highlight language-markdown">Paragraph.

{: title="Important Note" lang="en" data-id="123"}

Link with attributes.
<span class="p">[</span><span class="nv">Click here</span><span class="p">](</span><span class="sx">url</span><span class="p">)</span>{:rel="nofollow" target="_blank"}
</code></pre>

<p>
  Output:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p</span> <span class="na">title=</span><span class="s">"Important Note"</span> <span class="na">lang=</span><span class="s">"en"</span> <span class="na">data-id=</span><span class="s">"123"</span><span class="nt">&gt;</span>Paragraph.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Link with attributes.
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"url"</span> <span class="na">rel=</span><span class="s">"nofollow"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>Click here<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
</code></pre>

<p>
<strong>  Quoted values:</strong> Use quotes when values contain spaces or special characters:
</p>

<pre><code class="highlight language-markdown">
{: title="This is a title with spaces" lang="en-US"}
</code></pre>

<p>
<strong>  Unquoted values:</strong> Simple values without spaces can be unquoted:
</p>

<pre><code class="highlight language-markdown">
{: lang=en data-visible=true}
</code></pre>

<p>
<strong>  Escaping quotes:</strong> Inside quoted values, escape quotes with backslash:
</p>

<pre><code class="highlight language-markdown">
{: title="He said <span class="se">\"</span>Hello<span class="se">\"</span>"}
</code></pre>

<h3 id="combining-attributes">
  Combining Attributes
</h3>

<p>
  All three types can be combined in a single IAL:
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Heading</span>

{: #section-1 .important .highlight title="Section Title" lang="en"}
</code></pre>

<p>
  Output: <code>&lt;h1 id=&quot;section-1&quot; class=&quot;important highlight&quot; title=&quot;Section Title&quot; lang=&quot;en&quot;&gt;Heading&lt;/h1&gt;</code>
</p>

<h2 id="attribute-list-definitions-alds">
  Attribute List Definitions (ALDs)
</h2>

<p>
  ALDs let you define reusable attribute sets that can be referenced multiple times. This is useful for maintaining consistent styling across a document.
</p>

<h3 id="defining-alds">
  Defining ALDs
</h3>

<p>
  ALDs use the syntax <code>{🚗 attributes}</code> and can appear anywhere in your document (though typically at the end for organization):
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Header 1</span>

{:header-style}

<span class="gh"># Header 2</span>

{:header-style}

<span class="gh"># Header 3</span>

{:header-style}

</code></pre>

<p>
  Output:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"section-title"</span> <span class="na">class=</span><span class="s">"large bold"</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>Header 1<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"section-title"</span> <span class="na">class=</span><span class="s">"large bold"</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>Header 2<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"section-title"</span> <span class="na">class=</span><span class="s">"large bold"</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>Header 3<span class="nt">&lt;/h1&gt;</span>
</code></pre>

<h3 id="ald-syntax">
  ALD Syntax
</h3>

<p>
  ALD definitions follow the same attribute syntax as IALs:
</p>

<pre><code class="highlight language-markdown"></code></pre>

<h3 id="referencing-alds">
  Referencing ALDs
</h3>

<p>
  Reference an ALD in an IAL using just the reference name:
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Heading</span>

{:my-style}

Paragraph.

{:my-style}
</code></pre>

<p>
  If the ALD <code>{💪 ...}</code> is defined, both elements will receive those attributes.
</p>

<h3 id="mixed-usage">
  Mixed Usage
</h3>

<p>
  You can mix ALD references with additional attributes in the same IAL. The additional attributes override or extend the ALD:
</p>

<pre><code class="highlight language-markdown">
<span class="gh"># Heading 1</span>

{:base-style}

<span class="gh"># Heading 2</span>

{:base-style .class3}

<span class="gh"># Heading 3</span>

{:base-style #override-id}

<span class="gh"># Heading 4</span>

{:base-style .class3 rel="nofollow"}
</code></pre>

<p>
  Output:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"main"</span> <span class="na">class=</span><span class="s">"class1 class2"</span><span class="nt">&gt;</span>Heading 1<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"main"</span> <span class="na">class=</span><span class="s">"class1 class2 class3"</span><span class="nt">&gt;</span>Heading 2<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"override-id"</span> <span class="na">class=</span><span class="s">"class1 class2"</span><span class="nt">&gt;</span>Heading 3<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"main"</span> <span class="na">class=</span><span class="s">"class1 class2 class3"</span> <span class="na">rel=</span><span class="s">"nofollow"</span><span class="nt">&gt;</span>Heading 4<span class="nt">&lt;/h1&gt;</span>
</code></pre>

<p>
<strong>  Behavior:</strong>
</p>

<ul>

  <li>
<strong>    Classes</strong>: Additional classes are appended to the ALD classes
  </li>

  <li>
<strong>    IDs</strong>: If an ID is specified in the IAL, it overrides the ALD’s ID
  </li>

  <li>
<strong>    Key-value attributes</strong>: If a key exists in both ALD and IAL, the IAL value overrides the ALD value
  </li>

</ul>

<h2 id="important-notes">
  Important Notes
</h2>

<h3 id="block-level-ial-positioning">
  Block-Level IAL Positioning
</h3>

<p>
  For block-level elements, the IAL <strong>must</strong> appear immediately after the element with <strong>no blank line</strong> between them:
</p>

<p>
<strong>  Correct:</strong>
</p>

<pre><code class="highlight language-markdown">Paragraph text.

{: .class}
</code></pre>

<p>
<strong>  Incorrect:</strong>
</p>

<pre><code class="highlight language-markdown">Paragraph text.

{: .class}
</code></pre>

<p>
  The blank line will cause the IAL to be treated as a separate paragraph.
</p>

<h3 id="inline-ial-positioning">
  Inline IAL Positioning
</h3>

<p>
  For inline elements, the IAL must appear immediately after the element, with optional whitespace:
</p>

<pre><code class="highlight language-markdown"><span class="p">[</span><span class="nv">link</span><span class="p">](</span><span class="sx">url</span><span class="p">)</span>{:.class} text after
<span class="gs">**bold**</span>{:.bold-style} more text
</code></pre>

<h3 id="multiple-elements-with-same-attributes">
  Multiple Elements with Same Attributes
</h3>

<p>
  When multiple links share the same URL, IALs are correctly matched using element indexing:
</p>

<pre><code class="highlight language-markdown">Here's a <span class="p">[</span><span class="nv">regular link</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span> and <span class="p">[</span><span class="nv">another link</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span>{:.button}.
</code></pre>

<p>
  Both links point to the same URL, but only the second one receives the <code>button</code> class.
</p>

<h3 id="nested-elements">
  Nested Elements
</h3>

<p>
  IALs work with nested inline elements:
</p>

<pre><code class="highlight language-markdown"><span class="ge">**</span>Bold text with <span class="ge">*italic*</span>{:.nested} inside<span class="ge">**</span>{:.wrapper}
</code></pre>

<p>
  The italic element gets the <code>nested</code> class, and the bold element gets the <code>wrapper</code> class.
</p>

<h2 id="examples">
  Examples
</h2>

<h3 id="complete-example">
  Complete Example
</h3>

<pre><code class="highlight language-markdown"><span class="gh"># Main Title</span>

{: #main-title .page-title}

<span class="gu">## Section 1</span>

{:section-heading}

This paragraph has <span class="p">[</span><span class="nv">a link</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span>{:.external-link} with styling.

Another paragraph with <span class="gs">**bold text**</span>{:.highlight}.

<span class="gu">## Section 2</span>

{:section-heading}

More content here.

</code></pre>

<p>
  Output:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"main-title"</span> <span class="na">class=</span><span class="s">"page-title"</span><span class="nt">&gt;</span>Main Title<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h2</span> <span class="na">class=</span><span class="s">"section important"</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>Section 1<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;p&gt;</span>This paragraph has <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://example.com"</span> <span class="na">class=</span><span class="s">"external-link"</span><span class="nt">&gt;</span>a link<span class="nt">&lt;/a&gt;</span> with styling.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Another paragraph with <span class="nt">&lt;strong</span> <span class="na">class=</span><span class="s">"highlight"</span><span class="nt">&gt;</span>bold text<span class="nt">&lt;/strong&gt;</span>.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;h2</span> <span class="na">class=</span><span class="s">"section important"</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>Section 2<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;p&gt;</span>More content here.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h3 id="using-alds-for-consistent-styling">
  Using ALDs for Consistent Styling
</h3>

<pre><code class="highlight language-markdown"><span class="gh"># Introduction</span>

{:intro}

<span class="gu">## Overview</span>

{:intro}

<span class="gu">## Details</span>

{:intro}

<span class="gh"># Conclusion</span>

{:conclusion}

<span class="gu">## Summary</span>

{:conclusion}

</code></pre>

<p>
  This allows you to maintain consistent styling across multiple elements by defining the attributes once and referencing them multiple times.
</p>

<h2 id="related">
  Related
</h2>

<ul>

  <li>
<a href="#syntax" onclick="showPage('syntax'); return false;">    Syntax</a> - Complete syntax reference
  </li>

  <li>
<a href="#modes" onclick="showPage('modes'); return false;">    Modes</a> - Understanding processor modes (IALs available in Kramdown and unified modes)
  </li>

</ul>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-modes" class="page">

    <h1 id="processor-modes">
      Processor Modes
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#processor-modes">Processor Modes</a><ul><li><a href="#overview">Overview</a></li><li><a href="#unified-mode-default">Unified Mode (Default)</a><ul><li><a href="#enabled-features">Enabled Features</a></li><li><a href="#id-format">ID Format</a></li></ul></li><li><a href="#gfm-mode">GFM Mode</a><ul><li><a href="#enabled-features">Enabled Features</a></li><li><a href="#disabled-features">Disabled Features</a></li><li><a href="#id-format">ID Format</a></li></ul></li><li><a href="#multimarkdown-mode">MultiMarkdown Mode</a><ul><li><a href="#enabled-features">Enabled Features</a></li><li><a href="#disabled-features">Disabled Features</a></li><li><a href="#id-format">ID Format</a></li></ul></li><li><a href="#kramdown-mode">Kramdown Mode</a><ul><li><a href="#enabled-features">Enabled Features</a></li><li><a href="#disabled-features">Disabled Features</a></li><li><a href="#id-format">ID Format</a></li></ul></li><li><a href="#commonmark-mode">CommonMark Mode</a><ul><li><a href="#enabled-features">Enabled Features</a></li><li><a href="#disabled-features">Disabled Features</a></li><li><a href="#id-format">ID Format</a></li></ul></li><li><a href="#feature-comparison-table">Feature Comparison Table</a></li><li><a href="#choosing-a-mode">Choosing a Mode</a></li><li><a href="#overriding-mode-defaults">Overriding Mode Defaults</a></li><li><a href="#related">Related</a></li></ul></li></ul></nav>

    <p>
      Apex supports multiple processor modes, each optimized for compatibility with different Markdown flavors.
    </p>

    <h2 id="overview">
      Overview
    </h2>

    <table>

      <thead>

        <tr>

          <th>
            Mode
          </th>

          <th>
            Description
          </th>

          <th>
            Default ID Format
          </th>

        </tr>

      </thead>

      <tbody>

        <tr>

          <td>
<code>unified</code>
          </td>

          <td>
            All features enabled
          </td>

          <td>
            GFM
          </td>

        </tr>
        <tr>

          <td>
<code>gfm</code>
          </td>

          <td>
            GitHub Flavored Markdown
          </td>

          <td>
            GFM
          </td>

        </tr>
        <tr>

          <td>
<code>mmd</code>
          </td>

          <td>
            MultiMarkdown compatibility
          </td>

          <td>
            MultiMarkdown
          </td>

        </tr>
        <tr>

          <td>
<code>kramdown</code>
          </td>

          <td>
            Kramdown compatibility
          </td>

          <td>
            Kramdown
          </td>

        </tr>
        <tr>

          <td>
<code>commonmark</code>
          </td>

          <td>
            Pure CommonMark spec
          </td>

          <td>
            GFM
          </td>

        </tr>
      </tbody>

    </table>

    <h2 id="unified-mode-default">
      Unified Mode (Default)
    </h2>

    <p>
<strong>      Command:</strong> <code>apex document.md</code> or <code>apex --mode unified document.md</code>
    </p>

    <p>
      Unified mode enables all features from all other modes. This is the default mode.
    </p>

    <h3 id="enabled-features">
      Enabled Features
    </h3>

    <ul>

      <li>
        ✅ Tables (GFM style)
      </li>

      <li>
        ✅ Strikethrough (<code>~~text~~</code>)
      </li>

      <li>
        ✅ Task lists (<code>- [ ]</code> and <code>- [x]</code>)
      </li>

      <li>
        ✅ Autolinks (URLs and emails)
      </li>

      <li>
        ✅ Footnotes (reference and inline styles)
      </li>

      <li>
        ✅ Definition lists
      </li>

      <li>
        ✅ Smart typography
      </li>

      <li>
        ✅ Math support (<code>$inline$</code> and <code>$$display$$</code>)
      </li>

      <li>
        ✅ Wiki links (<code>[[Page]]</code>) - <strong>Requires <code>--wikilinks</code> flag</strong> (disabled by default)
      </li>

      <li>
        ✅ Critic Markup
      </li>

      <li>
        ✅ Callouts
      </li>

      <li>
        ✅ File includes
      </li>

      <li>
        ✅ Metadata blocks (YAML, MMD, Pandoc)
      </li>

      <li>
        ✅ Metadata variables (<code>[%key]</code>) - See <a href="#metadata-transforms" onclick="showPage('metadata-transforms'); return false;">Metadata Transforms</a> for transform syntax - See <a href="#metadata-transforms" onclick="showPage('metadata-transforms'); return false;">Metadata Transforms</a> for transform syntax
      </li>

      <li>
        ✅ Abbreviations
      </li>

      <li>
        ✅ Inline Attribute Lists (IAL)
      </li>

      <li>
        ✅ Relaxed tables (default)
      </li>

      <li>
        ✅ GitHub Emoji (<code>:emoji_name:</code>)
      </li>

    </ul>

    <h3 id="id-format">
      ID Format
    </h3>

    <ul>

      <li>
        Default: GFM format
      </li>

      <li>
        Can be overridden with <code>--id-format</code>
      </li>

    </ul>

    <h2 id="gfm-mode">
      GFM Mode
    </h2>

    <p>
<strong>      Command:</strong> <code>apex --mode gfm document.md</code>
    </p>

    <p>
      GitHub Flavored Markdown compatibility mode.
    </p>

    <h3 id="enabled-features">
      Enabled Features
    </h3>

    <ul>

      <li>
        ✅ Tables
      </li>

      <li>
        ✅ Strikethrough
      </li>

      <li>
        ✅ Task lists
      </li>

      <li>
        ✅ Autolinks
      </li>

      <li>
        ✅ Hard line breaks (newlines become <code>&lt;br&gt;</code>)
      </li>

    </ul>

    <h3 id="disabled-features">
      Disabled Features
    </h3>

    <ul>

      <li>
        ❌ Footnotes
      </li>

      <li>
        ❌ Definition lists
      </li>

      <li>
        ❌ Smart typography
      </li>

      <li>
        ❌ Math
      </li>

      <li>
        ❌ Wiki links
      </li>

      <li>
        ❌ Critic Markup
      </li>

      <li>
        ❌ Callouts
      </li>

      <li>
        ❌ File includes
      </li>

      <li>
        ❌ Metadata
      </li>

      <li>
        ❌ Abbreviations
      </li>

      <li>
        ❌ IAL
      </li>

      <li>
        ❌ Relaxed tables
      </li>

    </ul>

    <h3 id="id-format">
      ID Format
    </h3>

    <ul>

      <li>
        GFM format (cannot be changed)
      </li>

    </ul>

    <h2 id="multimarkdown-mode">
      MultiMarkdown Mode
    </h2>

    <p>
<strong>      Command:</strong> <code>apex --mode mmd document.md</code> or <code>apex --mode multimarkdown document.md</code>
    </p>

    <p>
      MultiMarkdown compatibility mode.
    </p>

    <h3 id="enabled-features">
      Enabled Features
    </h3>

    <ul>

      <li>
        ✅ Tables
      </li>

      <li>
        ✅ Footnotes (reference style)
      </li>

      <li>
        ✅ Definition lists
      </li>

      <li>
        ✅ Smart typography
      </li>

      <li>
        ✅ Math support
      </li>

      <li>
        ✅ Metadata blocks (YAML, MMD, Pandoc)
      </li>

      <li>
        ✅ Metadata variables (<code>[%key]</code>) - See <a href="#metadata-transforms" onclick="showPage('metadata-transforms'); return false;">Metadata Transforms</a> for transform syntax
      </li>

      <li>
        ✅ Abbreviations
      </li>

      <li>
        ✅ File includes
      </li>

    </ul>

    <h3 id="disabled-features">
      Disabled Features
    </h3>

    <ul>

      <li>
        ❌ Strikethrough
      </li>

      <li>
        ❌ Task lists
      </li>

      <li>
        ❌ Wiki links
      </li>

      <li>
        ❌ Critic Markup
      </li>

      <li>
        ❌ Callouts
      </li>

      <li>
        ❌ IAL
      </li>

      <li>
        ❌ Relaxed tables
      </li>

    </ul>

    <h3 id="id-format">
      ID Format
    </h3>

    <ul>

      <li>
        MultiMarkdown format (cannot be changed)
      </li>

    </ul>

    <h2 id="kramdown-mode">
      Kramdown Mode
    </h2>

    <p>
<strong>      Command:</strong> <code>apex --mode kramdown document.md</code>
    </p>

    <p>
      Kramdown compatibility mode.
    </p>

    <h3 id="enabled-features">
      Enabled Features
    </h3>

    <ul>

      <li>
        ✅ Tables
      </li>

      <li>
        ✅ Footnotes (reference and inline styles)
      </li>

      <li>
        ✅ Definition lists
      </li>

      <li>
        ✅ Smart typography
      </li>

      <li>
        ✅ Math support
      </li>

      <li>
        ✅ Inline Attribute Lists (IAL)
      </li>

      <li>
        ✅ Abbreviations
      </li>

      <li>
        ✅ Relaxed tables (default)
      </li>

    </ul>

    <h3 id="disabled-features">
      Disabled Features
    </h3>

    <ul>

      <li>
        ❌ Strikethrough
      </li>

      <li>
        ❌ Task lists
      </li>

      <li>
        ❌ Wiki links
      </li>

      <li>
        ❌ Critic Markup
      </li>

      <li>
        ❌ Callouts
      </li>

      <li>
        ❌ File includes
      </li>

      <li>
        ❌ Metadata
      </li>

      <li>
        ❌ Autolinks
      </li>

    </ul>

    <h3 id="id-format">
      ID Format
    </h3>

    <ul>

      <li>
        Kramdown format (cannot be changed)
      </li>

    </ul>

    <h2 id="commonmark-mode">
      CommonMark Mode
    </h2>

    <p>
<strong>      Command:</strong> <code>apex --mode commonmark document.md</code>
    </p>

    <p>
      Pure CommonMark specification compliance. No extensions.
    </p>

    <h3 id="enabled-features">
      Enabled Features
    </h3>

    <ul>

      <li>
        ✅ Basic Markdown only (headers, lists, emphasis, links, code, blockquotes, etc.)
      </li>

    </ul>

    <h3 id="disabled-features">
      Disabled Features
    </h3>

    <ul>

      <li>
        ❌ All extensions (tables, footnotes, etc.)
      </li>

    </ul>

    <h3 id="id-format">
      ID Format
    </h3>

    <ul>

      <li>
        GFM format (for consistency)
      </li>

    </ul>

    <h2 id="feature-comparison-table">
      Feature Comparison Table
    </h2>

    <table>

      <thead>

        <tr>

          <th>
            Feature
          </th>

          <th>
            Unified
          </th>

          <th>
            GFM
          </th>

          <th>
            MMD
          </th>

          <th>
            Kramdown
          </th>

          <th>
            CommonMark
          </th>

        </tr>

      </thead>

      <tbody>

        <tr>

          <td>
            Tables
          </td>

          <td>
            ✅
          </td>

          <td>
            ✅
          </td>

          <td>
            ✅
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

        </tr>
        <tr>

          <td>
            Strikethrough
          </td>

          <td>
            ✅
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

        </tr>
        <tr>

          <td>
            Task Lists
          </td>

          <td>
            ✅
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

        </tr>
        <tr>

          <td>
            Footnotes
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ✅
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

        </tr>
        <tr>

          <td>
            Definition Lists
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ✅
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

        </tr>
        <tr>

          <td>
            Smart Typography
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ✅
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

        </tr>
        <tr>

          <td>
            Math
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ✅
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

        </tr>
        <tr>

          <td>
            Wiki Links
          </td>

          <td>
            ✅*
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

        </tr>
        <tr>

          <td>
            Critic Markup
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

        </tr>
        <tr>

          <td>
            Callouts
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

        </tr>
        <tr>

          <td>
            File Includes
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

        </tr>
        <tr>

          <td>
            Metadata
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

        </tr>
        <tr>

          <td>
            Abbreviations
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ✅
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

        </tr>
        <tr>

          <td>
            IAL
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

        </tr>
        <tr>

          <td>
            Relaxed Tables
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

          <td>
            ❌
          </td>

          <td>
            ✅
          </td>

          <td>
            ❌
          </td>

        </tr>
      </tbody>

    </table>

    <p>
      * Wiki links are available in unified mode but <strong>disabled by default</strong>. Use <code>--wikilinks</code> to enable.
    </p>

    <h2 id="choosing-a-mode">
      Choosing a Mode
    </h2>

    <ul>

      <li>
<strong>        Unified</strong> - Use when you want all features or need compatibility with multiple Markdown flavors
      </li>

      <li>
<strong>        GFM</strong> - Use for GitHub compatibility or when publishing to GitHub
      </li>

      <li>
<strong>        MMD</strong> - Use for MultiMarkdown compatibility or when you need metadata
      </li>

      <li>
<strong>        Kramdown</strong> - Use for Kramdown compatibility or when you need IAL attributes
      </li>

      <li>
<strong>        CommonMark</strong> - Use for strict CommonMark compliance or minimal output
      </li>

    </ul>

    <h2 id="overriding-mode-defaults">
      Overriding Mode Defaults
    </h2>

    <p>
      In unified mode, you can enable or disable specific features:
    </p>

<pre><code class="highlight language-bash"><span class="c"># Unified mode but disable footnotes</span>
apex <span class="nt">--mode</span> unified <span class="nt">--no-footnotes</span> document.md

<span class="c"># Unified mode but disable math</span>
apex <span class="nt">--mode</span> unified <span class="nt">--no-math</span> document.md

<span class="c"># Enable wiki links (disabled by default)</span>
apex <span class="nt">--mode</span> unified <span class="nt">--wikilinks</span> document.md
</code></pre>

  <h2 id="related">
    Related
  </h2>

  <ul>

    <li>
<a href="#header-ids" onclick="showPage('header-ids'); return false;">      Header IDs</a> - How ID formats differ by mode
    </li>

    <li>
<a href="#syntax" onclick="showPage('syntax'); return false;">      Syntax</a> - Syntax available in each mode
    </li>

    <li>
<a href="#command-line-options" onclick="showPage('command-line-options'); return false;">      Command Line Options</a> - Mode selection and feature flags
    </li>

  </ul>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-command-line-options" class="page">

    <h1 id="command-line-options">
      Command Line Options
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#command-line-options">Command Line Options</a><ul><li><a href="#basic-options">Basic Options</a><ul><li><a href="#h-help">-h, --help</a></li><li><a href="#v-version">-v, --version</a></li><li><a href="#no-progress">--[no-]progress</a></li><li><a href="#combine">--combine</a></li><li><a href="#mmd-merge">--mmd-merge</a></li><li><a href="#m-mode-mode">-m, --mode MODE</a></li><li><a href="#o-output-file">-o, --output FILE</a></li></ul></li><li><a href="#output-options">Output Options</a><ul><li><a href="#s-standalone">-s, --standalone</a></li><li><a href="#style-file-css-file">--style FILE, --css FILE</a></li><li><a href="#embed-css">--embed-css</a></li><li><a href="#script-value">--script VALUE</a></li><li><a href="#title-title">--title TITLE</a></li><li><a href="#pretty">--pretty</a></li><li><a href="#aria">--aria</a></li></ul></li><li><a href="#plugin-management">Plugin Management</a><ul><li><a href="#plugins-no-plugins">--plugins, --no-plugins</a></li><li><a href="#list-plugins">--list-plugins</a></li><li><a href="#install-plugin-id-or-url">--install-plugin ID-or-URL</a></li><li><a href="#uninstall-plugin-id">--uninstall-plugin ID</a></li></ul></li><li><a href="#header-id-options">Header ID Options</a><ul><li><a href="#id-format-format">--id-format FORMAT</a></li><li><a href="#no-ids">--no-ids</a></li><li><a href="#header-anchors">--header-anchors</a></li></ul></li><li><a href="#table-options">Table Options</a><ul><li><a href="#relaxed-tables">--relaxed-tables</a></li><li><a href="#no-relaxed-tables">--no-relaxed-tables</a></li><li><a href="#captions-position">--captions POSITION</a></li><li><a href="#no-tables">--no-tables</a></li></ul></li><li><a href="#list-options">List Options</a><ul><li><a href="#no-alpha-lists">--[no-]alpha-lists</a></li><li><a href="#no-mixed-lists">--[no-]mixed-lists</a></li></ul></li><li><a href="#feature-flags">Feature Flags</a><ul><li><a href="#no-footnotes">--no-footnotes</a></li><li><a href="#no-smart">--no-smart</a></li><li><a href="#no-math">--no-math</a></li><li><a href="#no-autolink">--[no-]autolink</a></li><li><a href="#obfuscate-emails">--obfuscate-emails</a></li><li><a href="#includes-no-includes">--includes, --no-includes</a></li></ul></li><li><a href="#image-embedding">Image Embedding</a><ul><li><a href="#embed-images">--embed-images</a></li></ul></li><li><a href="#path-resolution">Path Resolution</a><ul><li><a href="#base-dir-dir">--base-dir DIR</a></li><li><a href="#no-transforms">--[no-]transforms</a></li></ul></li><li><a href="#metadata-options">Metadata Options</a><ul><li><a href="#meta-file-file">--meta-file FILE</a></li><li><a href="#meta-keyvalue">--meta KEY=VALUE</a></li><li><a href="#controlling-options-via-metadata">Controlling Options via Metadata</a></li></ul></li><li><a href="#citations-and-bibliography">Citations and Bibliography</a><ul><li><a href="#bibliography-file">--bibliography FILE</a></li><li><a href="#csl-file">--csl FILE</a></li><li><a href="#no-bibliography">--no-bibliography</a></li><li><a href="#link-citations">--link-citations</a></li><li><a href="#show-tooltips">--show-tooltips</a></li></ul></li><li><a href="#indices">Indices</a><ul><li><a href="#indices">--indices</a></li><li><a href="#no-indices">--no-indices</a></li><li><a href="#no-index">--no-index</a></li><li><a href="#hardbreaks">--hardbreaks</a></li><li><a href="#no-sup-sub">--[no-]sup-sub</a></li><li><a href="#no-divs">--[no-]divs</a></li><li><a href="#no-spans">--[no-]spans</a></li><li><a href="#no-emoji-autocorrect">--[no-]emoji-autocorrect</a></li><li><a href="#no-unsafe">--[no-]unsafe</a></li><li><a href="#no-wikilinks">--[no-]wikilinks</a></li><li><a href="#wikilink-space-mode">--wikilink-space MODE</a></li><li><a href="#wikilink-extension-ext">--wikilink-extension EXT</a></li></ul></li><li><a href="#critic-markup-options">Critic Markup Options</a><ul><li><a href="#accept">--accept</a></li><li><a href="#reject">--reject</a></li></ul></li><li><a href="#inputoutput">Input/Output</a><ul><li><a href="#reading-from-stdin">Reading from stdin</a></li><li><a href="#writing-to-stdout">Writing to stdout</a></li></ul></li><li><a href="#combining-options">Combining Options</a></li><li><a href="#option-precedence">Option Precedence</a></li><li><a href="#examples">Examples</a><ul><li><a href="#blog-post">Blog Post</a></li><li><a href="#github-compatible-output">GitHub-Compatible Output</a></li><li><a href="#documentation-with-custom-ids">Documentation with Custom IDs</a></li><li><a href="#review-document-with-critic-markup">Review Document with Critic Markup</a></li><li><a href="#academic-document-with-citations">Academic Document with Citations</a></li></ul></li><li><a href="#related">Related</a></li><li><a href="#plugin-options">Plugin Options</a><ul><li><a href="#no-plugins">--[no-]plugins</a></li><li><a href="#list-plugins">--list-plugins</a></li><li><a href="#install-plugin-id">--install-plugin ID</a></li><li><a href="#uninstall-plugin-id">--uninstall-plugin ID</a></li></ul></li></ul></li></ul></nav>

    <p>
      Complete reference for all Apex command-line flags.
    </p>

    <h2 id="basic-options">
      Basic Options
    </h2>

    <h3 id="h-help">
<code>-h, --help</code>
    </h3>

    <p>
      Display help message and exit.
    </p>

<pre><code class="highlight language-bash">apex <span class="nt">--help</span>
</code></pre>

  <h3 id="v-version">
<code>-v, --version</code>
  </h3>

  <p>
    Display version information and exit.
  </p>

<pre><code class="highlight language-bash">apex <span class="nt">--version</span>
</code></pre>

<h3 id="no-progress">
<code>--[no-]progress</code>
</h3>

<p>
  Show progress indicator during processing. Progress is displayed on stderr for operations that take longer than 1 second.
</p>

<p>
<strong>  Default behavior:</strong>
</p>

<ul>

  <li>
<strong>    Enabled</strong> when stderr is a TTY (interactive terminal)
  </li>

  <li>
<strong>    Disabled</strong> when stderr is not a TTY (pipes, redirects, etc.)
  </li>

</ul>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Explicitly enable progress (useful when piping)</span>

apex document.md <span class="nt">--progress</span> | less
<span class="c"># Explicitly disable progress</span>
apex document.md <span class="nt">--no-progress</span>

<span class="c"># Progress is automatically enabled in interactive terminals</span>
apex document.md
</code></pre>

<p>
<strong>  Behavior:</strong>
</p>

<ul>

  <li>
    Progress messages appear on stderr (not stdout)
  </li>

  <li>
    Only shown for operations taking longer than 1 second
  </li>

  <li>
    Automatically cleared when processing completes
  </li>

  <li>
    Useful for monitoring long-running operations or when processing large files
  </li>

</ul>

<p>
<strong>  Note:</strong> Progress can also be controlled via the <code>APEX_PROGRESS</code> environment variable:
</p>

<pre><code class="highlight language-bash"><span class="nb">export </span><span class="nv">APEX_PROGRESS</span><span class="o">=</span>1  <span class="c"># Enable</span>
<span class="nb">export </span><span class="nv">APEX_PROGRESS</span><span class="o">=</span>0  <span class="c"># Disable</span>
</code></pre>

<h3 id="combine">
<code>--combine</code>
</h3>

<p>
  Concatenate one or more Markdown files into a single Markdown stream, expanding all supported include syntaxes (Marked ``, MultiMarkdown <code>{{file}}</code>, iA Writer `/file`, CSV/TSV includes, etc.).
</p>

<ul>

  <li>
    File arguments are processed <strong>in the order given</strong>.
  </li>

  <li>
    Includes inside those files are expanded exactly as in normal processing.
  </li>

  <li>
    Output is <strong>raw Markdown</strong>, suitable for piping back into Apex for full rendering (indices, TOCs, citations, etc.).
  </li>

</ul>

<p>
  When a <code>SUMMARY.md</code> file is provided, Apex treats it as a <strong>GitBook-style index</strong>:
</p>

<ul>

  <li>
    Parses Markdown links in <code>SUMMARY.md</code> (e.g. <code>[Intro](intro.md)</code>).
  </li>

  <li>
    Resolves linked files relative to the <code>SUMMARY.md</code> location.
  </li>

  <li>
    Combines the linked files in link order.
  </li>

  <li>
    Ignores external links containing <code>://</code> for combination purposes.
  </li>

</ul>

<h3 id="mmd-merge">
<code>--mmd-merge</code>
</h3>

<p>
  Merge files from one or more MultiMarkdown <code>mmd_merge</code>-style index files into a single Markdown stream.
</p>

<p>
<strong>  Behavior:</strong>
</p>

<ul>

  <li>
    Each non-empty, non-comment line in an index file specifies a document to include
  </li>

  <li>
    Lines whose first non-whitespace character is <code>#</code> are treated as comments and ignored
  </li>

  <li>
    Indentation (tabs or groups of four spaces) before the filename controls header level shifting
  </li>

  <li>
    Each indent level shifts all Markdown headings in that file down one level (adds one <code>#</code>)
  </li>

  <li>
    Output is raw Markdown suitable for piping into Apex
  </li>

</ul>

<p>
<strong>  Example index file (<code>index.txt</code>):</strong>
</p>

<pre><code class="highlight ">chapter1.md
    section1.md
    section2.md
chapter2.md
    section1.md
</code></pre>

<p>
<strong>  Usage:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Merge and process in one step</span>

apex <span class="nt">--mmd-merge</span> index.txt | apex <span class="nt">--mode</span> mmd <span class="nt">--standalone</span> <span class="nt">-o</span> book.html
<span class="c"># Merge multiple index files</span>
apex <span class="nt">--mmd-merge</span> index1.txt index2.txt | apex <span class="nt">--standalone</span> <span class="nt">-o</span> combined.html
</code></pre>

<h3 id="m-mode-mode">
<code>-m, --mode MODE</code>
</h3>

<p>
  Set processor mode. See <a href="#modes" onclick="showPage('modes'); return false;">Modes</a> for details.
</p>

<p>
<strong>  Values:</strong>
</p>

<ul>

  <li>
<code>commonmark</code> - Pure CommonMark specification
  </li>

  <li>
<code>gfm</code> - GitHub Flavored Markdown
  </li>

  <li>
<code>mmd</code> or <code>multimarkdown</code> - MultiMarkdown compatibility
  </li>

  <li>
<code>kramdown</code> - Kramdown compatibility
  </li>

  <li>
<code>unified</code> - All features enabled (default)
  </li>

</ul>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-bash">apex <span class="nt">--mode</span> gfm document.md
</code></pre>

<h3 id="o-output-file">
<code>-o, --output FILE</code>
</h3>

<p>
  Write output to a file instead of stdout.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">-o</span> output.html
</code></pre>

<h2 id="output-options">
  Output Options
</h2>

<h3 id="s-standalone">
<code>-s, --standalone</code>
</h3>

<p>
  Generate a complete HTML document with <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, and <code>&lt;body&gt;</code> tags.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--standalone</span>
</code></pre>

<h3 id="style-file-css-file">
<code>--style FILE</code>, <code>--css FILE</code>
</h3>

<p>
  Link to a CSS file in the document head. Requires <code>--standalone</code>. <code>--css</code> is an alias for <code>--style</code>. Overrides CSS metadata if present.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--standalone</span> <span class="nt">--style</span> styles.css
apex document.md <span class="nt">--standalone</span> <span class="nt">--css</span> styles.css
</code></pre>

<h3 id="embed-css">
<code>--embed-css</code>
</h3>

<p>
  Embed the CSS file contents into a <code>&lt;style&gt;</code> tag in the document head instead of using a <code>&lt;link rel=&quot;stylesheet&quot;&gt;</code> tag. Intended to be used together with <code>--css</code>.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--standalone</span> <span class="nt">--css</span> styles.css <span class="nt">--embed-css</span>
</code></pre>

<h3 id="script-value">
<code>--script VALUE</code>
</h3>

<p>
  Inject <code>&lt;script&gt;</code> tags either before <code>&lt;/body&gt;</code> in standalone mode or at the end of the HTML fragment in snippet mode.
</p>

<ul>

  <li>
<strong>    VALUE</strong>: A path, URL, or one of the following shorthands: <code>mermaid</code>, <code>mathjax</code>, <code>katex</code>, <code>highlightjs</code>, <code>highlight.js</code>, <code>prism</code>, <code>prismjs</code>, <code>htmx</code>, <code>alpine</code>, <code>alpinejs</code>.
  </li>

  <li>
<strong>    Multiple values</strong>: Use the flag multiple times or provide a comma-separated list.
  </li>

</ul>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--standalone</span> <span class="nt">--script</span> mermaid,mathjax
apex document.md <span class="nt">--script</span> /assets/app.js <span class="nt">--script</span> https://cdn.example.com/widget.js
</code></pre>

<h3 id="title-title">
<code>--title TITLE</code>
</h3>

<p>
  Set the document title. Requires <code>--standalone</code>. Default is “Document”.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My Document"</span>
</code></pre>

<h3 id="pretty">
<code>--pretty</code>
</h3>

<p>
  Pretty-print HTML with indentation and whitespace.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--pretty</span>
</code></pre>

<h3 id="aria">
<code>--aria</code>
</h3>

<p>
  Add ARIA labels and accessibility attributes to HTML output for better screen reader support.
</p>

<p>
<strong>  When enabled, adds:</strong>
</p>

<ul>

  <li>
<code>aria-label=&quot;Table of contents&quot;</code> to TOC navigation elements (<code>&lt;nav class=&quot;toc&quot;&gt;</code>)
  </li>

  <li>
<code>role=&quot;figure&quot;</code> to <code>&lt;figure&gt;</code> elements
  </li>

  <li>
<code>role=&quot;table&quot;</code> to <code>&lt;table&gt;</code> elements
  </li>

  <li>
<code>id</code> attributes to <code>&lt;figcaption&gt;</code> elements within table figures (generated if missing, e.g., <code>table-caption-1</code>, <code>table-caption-2</code>)
  </li>

  <li>
<code>aria-describedby</code> attributes to tables linking them to their captions
  </li>

</ul>

<p>
<strong>  Default:</strong> Disabled (backward compatibility)
</p>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Generate accessible HTML output</span>
apex document.md <span class="nt">--aria</span>

<span class="c"># Combine with other options</span>
apex document.md <span class="nt">--aria</span> <span class="nt">--standalone</span> <span class="nt">--pretty</span>
</code></pre>

<p>
<strong>  Output examples:</strong>
</p>

<p>
  With <code>--aria</code> enabled, a table of contents generates:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">"toc"</span> <span class="na">aria-label=</span><span class="s">"Table of contents"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#section"</span><span class="nt">&gt;</span>Section<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</code></pre>

<p>
  Tables with captions get proper ARIA attributes:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;figure</span> <span class="na">class=</span><span class="s">"table-figure"</span> <span class="na">role=</span><span class="s">"figure"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;figcaption</span> <span class="na">id=</span><span class="s">"table-caption-1"</span><span class="nt">&gt;</span>Table Title<span class="nt">&lt;/figcaption&gt;</span>
  <span class="nt">&lt;table</span> <span class="na">role=</span><span class="s">"table"</span> <span class="na">aria-describedby=</span><span class="s">"table-caption-1"</span><span class="nt">&gt;</span>
    ...
  <span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;/figure&gt;</span>
</code></pre>

<p>
<strong>  Note:</strong> This option enhances accessibility without changing the visual appearance of the HTML. It’s particularly useful for documents that will be read by screen readers or other assistive technologies.
</p>

<h2 id="plugin-management">
  Plugin Management
</h2>

<h3 id="plugins-no-plugins">
<code>--plugins</code>, <code>--no-plugins</code>
</h3>

<p>
  Enable or disable external/plugin processing. Plugins are <strong>disabled by default</strong>; enable them per run or via metadata (<code>plugins: true</code> / <code>enable-plugins: true</code>).
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--plugins</span>
apex document.md <span class="nt">--no-plugins</span>
</code></pre>

<h3 id="list-plugins">
<code>--list-plugins</code>
</h3>

<p>
  List installed plugins and available plugins from the remote directory. Shows IDs, titles, authors, and descriptions when available.
</p>

<pre><code class="highlight language-bash">apex <span class="nt">--list-plugins</span>
</code></pre>

<h3 id="install-plugin-id-or-url">
<code>--install-plugin ID-or-URL</code>
</h3>

<p>
  Install a plugin either:
</p>

<ul>

  <li>
    By <strong>ID</strong> from the central plugin directory (e.g. <code>kbd</code>), or
  </li>

  <li>
    Directly from a <strong>Git URL</strong> or <strong>GitHub shorthand</strong> (<code>user/repo</code>).
  </li>

</ul>

<p>
  When installing from a URL, Apex prints a security warning before cloning, since plugins execute unverified code.
</p>

<pre><code class="highlight language-bash">apex <span class="nt">--install-plugin</span> kbd
apex <span class="nt">--install-plugin</span> https://github.com/user/apex-plugin-example.git
apex <span class="nt">--install-plugin</span> user/apex-plugin-example
</code></pre>

<h3 id="uninstall-plugin-id">
<code>--uninstall-plugin ID</code>
</h3>

<p>
  Uninstall a locally installed plugin by ID. This removes the plugin’s directory from the user plugin location, but does not delete any external support data the plugin may have created.
</p>

<pre><code class="highlight language-bash">apex <span class="nt">--uninstall-plugin</span> kbd
</code></pre>

<h2 id="header-id-options">
  Header ID Options
</h2>

<h3 id="id-format-format">
<code>--id-format FORMAT</code>
</h3>

<p>
  Set header ID generation format. See <a href="#header-ids" onclick="showPage('header-ids'); return false;">Header IDs</a> for details.
</p>

<p>
<strong>  Values:</strong>
</p>

<ul>

  <li>
<code>gfm</code> - GitHub Flavored Markdown format (default)
  </li>

  <li>
<code>mmd</code> - MultiMarkdown format
  </li>

  <li>
<code>kramdown</code> - Kramdown format
  </li>

</ul>

<p>
<strong>  Note:</strong> Modes automatically set the format. This option is useful to override in unified mode.
</p>

<p>
<strong>  GFM Format Features:</strong>
</p>

<ul>

  <li>
    In GFM format, emojis in headers are automatically converted to their textual names in IDs (e.g., <code># 😄 Support</code> → <code>id=&quot;smile-support&quot;</code>), matching Pandoc’s GFM behavior.
  </li>

</ul>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--id-format</span> mmd
</code></pre>

<h3 id="no-ids">
<code>--no-ids</code>
</h3>

<p>
  Disable automatic header ID generation.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--no-ids</span>
</code></pre>

<h3 id="header-anchors">
<code>--header-anchors</code>
</h3>

<p>
  Generate <code>&lt;a&gt;</code> anchor tags instead of <code>id</code> attributes on headers.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--header-anchors</span>
</code></pre>

<p>
<strong>  Output:</strong>
</p>

<pre><code class="highlight language-html"><span class="c">&lt;!-- Default --&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"my-header"</span><span class="nt">&gt;</span>My Header<span class="nt">&lt;/h1&gt;</span>

<span class="c">&lt;!-- With --header-anchors --&gt;</span>
<span class="nt">&lt;h1&gt;&lt;a</span> <span class="na">id=</span><span class="s">"my-header"</span> <span class="na">href=</span><span class="s">"#my-header"</span><span class="nt">&gt;</span>My Header<span class="nt">&lt;/a&gt;&lt;/h1&gt;</span>
</code></pre>

<h2 id="table-options">
  Table Options
</h2>

<h3 id="relaxed-tables">
<code>--relaxed-tables</code>
</h3>

<p>
  Enable relaxed table parsing (tables without separator rows). Default in unified and kramdown modes.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--relaxed-tables</span>
</code></pre>

<h3 id="no-relaxed-tables">
<code>--no-relaxed-tables</code>
</h3>

<p>
  Disable relaxed table parsing.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--no-relaxed-tables</span>
</code></pre>

<h3 id="captions-position">
<code>--captions POSITION</code>
</h3>

<p>
  Control the position of table captions. Captions are rendered as <code>&lt;figcaption&gt;</code> elements within <code>&lt;figure class=&quot;table-figure&quot;&gt;</code> wrappers.
</p>

<p>
<strong>  Values:</strong>
</p>

<ul>

  <li>
<code>above</code> - Place captions above the table
  </li>

  <li>
<code>below</code> - Place captions below the table (default)
  </li>

</ul>

<p>
<strong>  Default:</strong> <code>below</code>
</p>

<pre><code class="highlight language-bash"><span class="c"># Place captions above tables</span>
apex document.md <span class="nt">--captions</span> above

<span class="c"># Place captions below tables (default)</span>
apex document.md <span class="nt">--captions</span> below
</code></pre>

<p>
<strong>  Note:</strong> In standalone HTML output, table figures are styled with default CSS that centers and formats captions appropriately. The figure element shrinks to fit the table width, ensuring captions are properly aligned with the table.
</p>

<h3 id="no-tables">
<code>--no-tables</code>
</h3>

<p>
  Disable table support entirely.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--no-tables</span>
</code></pre>

<h2 id="list-options">
  List Options
</h2>

<h3 id="no-alpha-lists">
<code>--[no-]alpha-lists</code>
</h3>

<p>
  Control support for alphabetic list markers (a., b., c. and A., B., C.).
</p>

<p>
<strong>  Default behavior by mode:</strong>
</p>

<ul>

  <li>
<strong>    Enabled</strong> in: unified
  </li>

  <li>
<strong>    Disabled</strong> in: commonmark, gfm, mmd, kramdown
  </li>

</ul>

<p>
  Alpha lists are automatically converted to HTML with <code>style=&quot;list-style-type: lower-alpha&quot;</code> or <code>style=&quot;list-style-type: upper-alpha&quot;</code>.
</p>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Enable alpha lists in GFM mode</span>
apex document.md <span class="nt">--mode</span> gfm <span class="nt">--alpha-lists</span>

<span class="c"># Disable alpha lists in unified mode</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--no-alpha-lists</span>
</code></pre>

<p>
<strong>  Input:</strong>
</p>

<pre><code class="highlight language-markdown">[apex-alpha-list:lower]
<span class="p">
1.</span>  First item
<span class="p">2.</span>  Second item
<span class="p">3.</span>  Third item

[apex-alpha-list:upper]
<span class="p">
1.</span>  Uppercase item
<span class="p">2.</span>  Another uppercase
</code></pre>

<p>
<strong>  Output:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;ol</span> <span class="na">style=</span><span class="s">"list-style-type: lower-alpha"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;li&gt;</span>First item<span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span>Second item<span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span>Third item<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ol&gt;</span>

<span class="nt">&lt;ol</span> <span class="na">style=</span><span class="s">"list-style-type: upper-alpha"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;li&gt;</span>Uppercase item<span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span>Another uppercase<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ol&gt;</span>
</code></pre>

<h3 id="no-mixed-lists">
<code>--[no-]mixed-lists</code>
</h3>

<p>
  Control whether different list marker types can be mixed at the same indentation level.
</p>

<p>
<strong>  Default behavior by mode:</strong>
</p>

<ul>

  <li>
<strong>    Enabled</strong> in: unified, multimarkdown
  </li>

  <li>
<strong>    Disabled</strong> in: commonmark, gfm, kramdown
  </li>

</ul>

<p>
  When enabled, mixed markers inherit the type from the first item in the list.
</p>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Enable mixed lists in GFM mode</span>
apex document.md <span class="nt">--mode</span> gfm <span class="nt">--mixed-lists</span>

<span class="c"># Disable mixed lists in unified mode</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--no-mixed-lists</span>
</code></pre>

<p>
<strong>  Input with mixed-lists enabled:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="p">1.</span> First numbered item
<span class="p">*</span> Second item (becomes numbered)
<span class="p">*</span> Third item (becomes numbered)
</code></pre>

<p>
<strong>  Output:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;ol&gt;</span>
  <span class="nt">&lt;li&gt;</span>First numbered item<span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span>Second item (becomes numbered)<span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span>Third item (becomes numbered)<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ol&gt;</span>
</code></pre>

<h2 id="feature-flags">
  Feature Flags
</h2>

<h3 id="no-footnotes">
<code>--no-footnotes</code>
</h3>

<p>
  Disable footnote support.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--no-footnotes</span>
</code></pre>

<h3 id="no-smart">
<code>--no-smart</code>
</h3>

<p>
  Disable smart typography (smart quotes, dashes, ellipsis).
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--no-smart</span>
</code></pre>

<h3 id="no-math">
<code>--no-math</code>
</h3>

<p>
  Disable math support.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--no-math</span>
</code></pre>

<h3 id="no-autolink">
<code>--[no-]autolink</code>
</h3>

<p>
  Control automatic linking of URLs and email addresses.
</p>

<p>
<strong>  Default behavior by mode:</strong>
</p>

<ul>

  <li>
<strong>    Enabled</strong> in: GFM, MultiMarkdown, Kramdown, unified
  </li>

  <li>
<strong>    Disabled</strong> in: CommonMark
  </li>

</ul>

<p>
<strong>  What gets autolinked:</strong>
</p>

<ul>

  <li>
    Angle-bracket URLs: <code>&lt;https://example.com&gt;</code>, <code>&lt;http://example.com&gt;</code>, <code>&lt;mailto:user@example.com&gt;</code>
  </li>

  <li>
    Bare URLs: <code>https://example.com</code>, <code>http://example.com</code>
  </li>

  <li>
    Email addresses: <code>user@example.com</code>
  </li>

</ul>

<p>
<strong>  Important:</strong> Autolinks are <strong>not</strong> processed inside code spans (<code>`code`</code>) or code blocks (<code> </code> ```).
</p>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Enable autolinking in CommonMark mode</span>
apex document.md <span class="nt">--mode</span> commonmark <span class="nt">--autolink</span>

<span class="c"># Disable autolinking in unified mode</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--no-autolink</span>
</code></pre>

<p>
<strong>  Input:</strong>
</p>

<pre><code class="highlight language-markdown">Visit <span class="p">[</span><span class="nv">https://example.com</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span> or contact <span class="p">[</span><span class="nv">me@example.com</span><span class="p">](</span><span class="sx">mailto:me@example.com</span><span class="p">)</span>.
See <span class="sb">`&lt;https://example.com&gt;`</span> in code.
</code></pre>

<p>
<strong>  Output with autolink enabled:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>Visit <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://example.com"</span><span class="nt">&gt;</span>[https://example.com](https://example.com)<span class="nt">&lt;/a&gt;</span> or contact <span class="nt">&lt;a</span> <span class="na">[href=</span><span class="s">"me@example.com"</span><span class="na">](mailto:href=</span><span class="s">%22me@example.com%22)</span><span class="nt">&gt;</span>me@example.com<span class="nt">&lt;/a&gt;</span>.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>See <span class="nt">&lt;code&gt;</span><span class="ni">&amp;lt;</span>[https://example.com<span class="ni">&amp;gt](https://example.com&amp;gt);</span><span class="nt">&lt;/code&gt;</span> in code.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<p>
<strong>  Output with autolink disabled:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>Visit [https://example.com](https://example.com) or contact [me@example.com](mailto:me@example.com).<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>See <span class="nt">&lt;code&gt;</span><span class="ni">&amp;lt;</span>[https://example.com<span class="ni">&amp;gt](https://example.com&amp;gt);</span><span class="nt">&lt;/code&gt;</span> in code.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h3 id="obfuscate-emails">
<code>--obfuscate-emails</code>
</h3>

<p>
  Obfuscate email links (including autolinked emails) by hex-encoding both the <code>mailto:</code> href and the visible address. Useful to deter scraping.
</p>

<p>
<strong>  Default:</strong> Off (emails are plain <code>mailto:</code> links)
</p>

<pre><code class="highlight language-bash"><span class="c"># Encode all mailto links in the output</span>
apex document.md <span class="nt">--obfuscate-emails</span>
</code></pre>

<p>
<strong>  Output:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"&amp;#x6D;&amp;#x61;&amp;#x69;&amp;#x6C;&amp;#x74;&amp;#x6F;&amp;#x3A;&amp;#x6D;&amp;#x65;&amp;#x40;&amp;#x65;&amp;#x78;&amp;#x61;&amp;#x6D;&amp;#x70;&amp;#x6C;&amp;#x65;&amp;#x2E;&amp;#x63;&amp;#x6F;&amp;#x6D;"</span><span class="nt">&gt;</span>
<span class="ni">&amp;#x6D;&amp;#x65;&amp;#x40;&amp;#x65;&amp;#x78;&amp;#x61;&amp;#x6D;&amp;#x70;&amp;#x6C;&amp;#x65;&amp;#x2E;&amp;#x63;&amp;#x6F;&amp;#x6D;</span>
<span class="nt">&lt;/a&gt;</span>
</code></pre>

<h3 id="includes-no-includes">
<code>--includes</code>, <code>--no-includes</code>
</h3>

<p>
  Enable or disable file inclusion features. Enabled by default in unified mode.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--includes</span>
apex document.md <span class="nt">--no-includes</span>
</code></pre>

<h2 id="image-embedding">
  Image Embedding
</h2>

<h3 id="embed-images">
<code>--embed-images</code>
</h3>

<p>
  Embed local images as base64 data URLs in HTML output.
</p>

<p>
<strong>  Behavior:</strong>
</p>

<ul>

  <li>
    Only <strong>local images</strong> (file paths) are embedded
  </li>

  <li>
<strong>    Remote images</strong> (http://, https://, //) are <strong>not</strong> processed and remain as URLs
  </li>

  <li>
    Images are read from the filesystem and encoded as base64
  </li>

  <li>
    Relative paths are resolved using the base directory (see <code>--base-dir</code>)
  </li>

  <li>
    Images that are already data URLs are not processed again
  </li>

  <li>
    If an image file doesn’t exist, the original path is preserved
  </li>

</ul>

<p>
<strong>  Supported image formats:</strong>
</p>

<ul>

  <li>
    JPEG (<code>.jpg</code>, <code>.jpeg</code>)
  </li>

  <li>
    PNG (<code>.png</code>)
  </li>

  <li>
    GIF (<code>.gif</code>)
  </li>

  <li>
    WebP (<code>.webp</code>)
  </li>

  <li>
    SVG (<code>.svg</code>)
  </li>

  <li>
    BMP (<code>.bmp</code>)
  </li>

  <li>
    ICO (<code>.ico</code>)
  </li>

</ul>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Embed local images</span>
apex document.md <span class="nt">--embed-images</span>

<span class="c"># Embed images with custom base directory</span>
apex document.md <span class="nt">--embed-images</span> <span class="nt">--base-dir</span> /path/to/images
</code></pre>

<p>
<strong>  Input:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="p">![</span><span class="nv">Local Image</span><span class="p">](</span><span class="sx">images/photo.png</span><span class="p">)</span>
<span class="p">![</span><span class="nv">Remote Image</span><span class="p">](</span><span class="sx">https://example.com/image.jpg</span><span class="p">)</span>
<span class="p">![</span><span class="nv">Already Embedded</span><span class="p">](</span><span class="sx">data:image/png;base64,iVBORw0KGgo...</span><span class="p">)</span>
</code></pre>

<p>
<strong>  Output with <code>--embed-images</code>:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"data:image/png;base64,iVBORw0KGgo..."</span> <span class="na">alt=</span><span class="s">"Local Image"</span><span class="nt">&gt;</span>
<span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"https://example.com/image.jpg"</span> <span class="na">alt=</span><span class="s">"Remote Image"</span><span class="nt">&gt;</span>
<span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"data:image/png;base64,iVBORw0KGgo..."</span> <span class="na">alt=</span><span class="s">"Already Embedded"</span><span class="nt">&gt;</span>
</code></pre>

<h2 id="path-resolution">
  Path Resolution
</h2>

<h3 id="base-dir-dir">
<code>--base-dir DIR</code>
</h3>

<p>
  Set the base directory for resolving relative paths.
</p>

<p>
<strong>  Used for:</strong>
</p>

<ul>

  <li>
    Image embedding (with <code>--embed-images</code>)
  </li>

  <li>
    File includes/transclusions
  </li>

  <li>
    Resolving relative paths when reading from stdin
  </li>

  <li>
    Resolving relative paths when the working directory differs from the document location
  </li>

</ul>

<p>
<strong>  Behavior:</strong>
</p>

<ul>

  <li>
    If not specified and reading from a <strong>file</strong>, the base directory is automatically set to the input file’s directory
  </li>

  <li>
    When reading from <strong>stdin</strong>, this flag must be used to resolve relative paths
  </li>

  <li>
    Absolute paths are not affected by this setting
  </li>

  <li>
    Relative paths are resolved by combining the base directory with the relative path
  </li>

</ul>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Read from file (base directory auto-set to file's directory)</span>
apex document.md <span class="nt">--embed-images</span>

<span class="c"># Read from stdin with base directory</span>

<span class="nb">cat </span>document.md | apex <span class="nt">--base-dir</span> /path/to/document <span class="nt">--embed-images</span>
<span class="c"># Override auto-detected base directory</span>
apex document.md <span class="nt">--base-dir</span> /custom/path <span class="nt">--embed-images</span>

<span class="c"># Use for includes</span>
apex document.md <span class="nt">--base-dir</span> /path/to/project <span class="nt">--includes</span>
</code></pre>

<p>
<strong>  Input (reading from stdin):</strong>
</p>

<pre><code class="highlight language-markdown"><span class="p">![</span><span class="nv">Image</span><span class="p">](</span><span class="sx">images/photo.png</span><span class="p">)</span>
</code></pre>

<p>
<strong>  Without <code>--base-dir</code>:</strong>
</p>

<pre><code class="highlight language-html"><span class="c">&lt;!-- Image not found, path preserved --&gt;</span>
<span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"images/photo.png"</span> <span class="na">alt=</span><span class="s">"Image"</span><span class="nt">&gt;</span>
</code></pre>

<p>
<strong>  With <code>--base-dir /path/to/document</code>:</strong>
</p>

<pre><code class="highlight language-html"><span class="c">&lt;!-- Image found at /path/to/document/images/photo.png and embedded --&gt;</span>
<span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"data:image/png;base64,..."</span> <span class="na">alt=</span><span class="s">"Image"</span><span class="nt">&gt;</span>
</code></pre>

<h3 id="no-transforms">
<code>--[no-]transforms</code>
</h3>

<p>
  Control metadata variable transforms. Enables <code>[%key:transform]</code> syntax for transforming metadata values.
</p>

<p>
<strong>  Default behavior by mode:</strong>
</p>

<ul>

  <li>
<strong>    Enabled</strong> in: unified (default)
  </li>

  <li>
<strong>    Disabled</strong> in: commonmark, gfm, mmd, kramdown
  </li>

</ul>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Enable transforms in GFM mode</span>
apex document.md <span class="nt">--mode</span> gfm <span class="nt">--transforms</span>

<span class="c"># Disable transforms in unified mode</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--no-transforms</span>
</code></pre>

<p>
<strong>  Input:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">hello world</span>
<span class="nn">---</span>

<span class="gh"># [%title:upper]</span>
</code></pre>

<p>
<strong>  Output with transforms enabled:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;h1&gt;</span>HELLO WORLD<span class="nt">&lt;/h1&gt;</span>
</code></pre>

<p>
<strong>  Output with transforms disabled:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;h1&gt;</span>[%title:upper]<span class="nt">&lt;/h1&gt;</span>
</code></pre>

<p>
  For complete documentation of available transforms, see <a href="#metadata-transforms" onclick="showPage('metadata-transforms'); return false;">Metadata Transforms</a>.
</p>

<h2 id="metadata-options">
  Metadata Options
</h2>

<h3 id="meta-file-file">
<code>--meta-file FILE</code>
</h3>

<p>
  Load metadata from an external file. The file format is auto-detected (YAML, MultiMarkdown, or Pandoc format).
</p>

<p>
<strong>  Supported formats:</strong>
</p>

<ul>

  <li>
<strong>    YAML</strong> (<code>.yml</code>, <code>.yaml</code>, or <code>---</code> delimited blocks)
  </li>

  <li>
<strong>    MultiMarkdown</strong> (key: value pairs)
  </li>

  <li>
<strong>    Pandoc</strong> (<code>%</code> lines)
  </li>

</ul>

<p>
<strong>  Metadata precedence (highest to lowest):</strong>
</p>

<ol>

  <li>
    Command-line metadata (<code>--meta</code>)
  </li>

  <li>
    Document metadata (in the document itself)
  </li>

  <li>
    File metadata (<code>--meta-file</code>)
  </li>

</ol>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--meta-file</span> defaults.yml
</code></pre>

<p>
<strong>  Reusable Metadata Files:</strong>
</p>

<p>
  You can create reusable metadata files for common settings like language and quotes language. This is especially useful for maintaining consistent settings across multiple documents.
</p>

<p>
<strong>  Example metadata file (<code>lang-fr.yml</code>):</strong>
</p>

<pre><code class="highlight language-yaml"><span class="nn">---</span>
<span class="na">language</span><span class="pi">:</span> <span class="s">fr</span>
<span class="na">quoteslanguage</span><span class="pi">:</span> <span class="s">french</span>
<span class="nn">---</span>
</code></pre>

<p>
<strong>  Note:</strong> In YAML, keys with spaces must be quoted (e.g., <code>&quot;Quotes Language&quot;: french</code>). Since Apex normalizes metadata keys (removes spaces, case-insensitive), you can use keys without spaces for cleaner YAML syntax. Both <code>quoteslanguage</code> and <code>&quot;Quotes Language&quot;</code> will work.
</p>

<p>
<strong>  Example metadata file (<code>lang-de.mmd</code>):</strong>
</p>

<pre><code class="highlight ">Language: de
Quotes Language: german
</code></pre>

<p>
<strong>  Note:</strong> MultiMarkdown format allows spaces in keys, so <code>Quotes Language</code> works without quotes.
</p>

<p>
<strong>  Usage:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Use French language settings for all documents</span>
apex document1.md <span class="nt">--meta-file</span> lang-fr.yml
apex document2.md <span class="nt">--meta-file</span> lang-fr.yml

<span class="c"># Use German language settings</span>
apex document.md <span class="nt">--meta-file</span> lang-de.mmd
</code></pre>

<p>
<strong>  Global configuration file:</strong>
</p>

<p>
  If you do not provide <code>--meta-file</code>, Apex will automatically look for a global configuration file named <code>config.yml</code> and load it as if it had been passed via <code>--meta-file</code> when it exists:
</p>

<ul>

  <li>
    If <code>$XDG_CONFIG_HOME</code> is set: <code>$XDG_CONFIG_HOME/apex/config.yml</code>
  </li>

  <li>
    Otherwise: <code>~/.config/apex/config.yml</code>
  </li>

</ul>

<p>
  This makes it easy to define defaults (mode, language, feature flags, etc.) that apply to all documents unless overridden by document metadata or command-line options. See <a href="Configuration">Configuration</a> for example <code>config.yml</code> files and a complete list of available keys.
</p>

<p>
<strong>  Benefits:</strong>
</p>

<ul>

  <li>
<strong>    Consistency</strong>: Ensure all documents use the same language and feature defaults
  </li>

  <li>
<strong>    Reusability</strong>: Define configuration once and reuse across many documents
  </li>

  <li>
<strong>    Maintainability</strong>: Update defaults in one place
  </li>

  <li>
<strong>    Flexibility</strong>: Override with document-specific metadata or command-line flags when needed
  </li>

</ul>

<p>
<strong>  Note:</strong> The <code>language</code> metadata sets the HTML <code>lang</code> attribute in standalone documents, and if <code>Quotes Language</code> is not specified, it will automatically use the <code>language</code> value for quote styling.
</p>

<h3 id="meta-keyvalue">
<code>--meta KEY=VALUE</code>
</h3>

<p>
  Set metadata from the command line. Can be used multiple times or with comma-separated pairs.
</p>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Single metadata value</span>
apex document.md <span class="nt">--meta</span> <span class="nv">title</span><span class="o">=</span><span class="s2">"My Document"</span>

<span class="c"># Multiple metadata values</span>
apex document.md <span class="nt">--meta</span> <span class="nv">title</span><span class="o">=</span><span class="s2">"My Document"</span> <span class="nt">--meta</span> <span class="nv">author</span><span class="o">=</span><span class="s2">"John Doe"</span>

<span class="c"># Comma-separated pairs</span>
apex document.md <span class="nt">--meta</span> <span class="nv">title</span><span class="o">=</span><span class="s2">"My Document"</span>,author<span class="o">=</span><span class="s2">"John Doe"</span>

<span class="c"># Quoted values with spaces</span>
apex document.md <span class="nt">--meta</span> <span class="nv">title</span><span class="o">=</span><span class="s2">"My Document Title"</span>
</code></pre>

<p>
<strong>  Precedence:</strong> Command-line metadata overrides both document metadata and file metadata.
</p>

<h3 id="controlling-options-via-metadata">
  Controlling Options via Metadata
</h3>

<p>
  Most command-line options can be controlled via document metadata, allowing different files to be processed with different settings when processing batches. This enables per-document configuration without needing separate command-line invocations.
</p>

<p>
<strong>  Boolean options</strong> accept <code>true</code>/<code>false</code>, <code>yes</code>/<code>no</code>, or <code>1</code>/<code>0</code> (case-insensitive, downcased). <strong>String options</strong> use the value directly.
</p>

<p>
<strong>  Supported boolean options:</strong>
</p>

<ul>

  <li>
<code>indices</code>, <code>wikilinks</code>, <code>includes</code>, <code>relaxed-tables</code>, <code>alpha-lists</code>, <code>mixed-lists</code>
  </li>

  <li>
<code>sup-sub</code>, <code>autolink</code>, <code>transforms</code>, <code>unsafe</code>, <code>tables</code>, <code>footnotes</code>
  </li>

  <li>
<code>smart</code>, <code>math</code>, <code>ids</code>, <code>header-anchors</code>, <code>embed-images</code>
  </li>

  <li>
<code>link-citations</code>, <code>show-tooltips</code>, <code>suppress-bibliography</code>, <code>suppress-index</code>
  </li>

  <li>
<code>group-index-by-letter</code>, <code>obfuscate-emails</code>, <code>pretty</code>, <code>standalone</code>, <code>hardbreaks</code>
  </li>

  <li>
<code>plugins</code> (see <a href="#plugins" onclick="showPage('plugins'); return false;">Plugins</a> for details on per-document plugin control)
  </li>

</ul>

<p>
<strong>  Supported string options:</strong>
</p>

<ul>

  <li>
<code>bibliography</code>, <code>csl</code>, <code>title</code>, <code>style</code> (or <code>css</code>), <code>id-format</code>, <code>base-dir</code>, <code>mode</code>
  </li>

  <li>
<code>language</code>, <code>quoteslanguage</code> (or <code>Quotes Language</code>), for locale and quote-style control
  </li>

</ul>

<p>
<strong>  Example YAML front matter:</strong>
</p>

<pre><code class="highlight language-yaml"><span class="nn">---</span>
<span class="na">indices</span><span class="pi">:</span> <span class="kc">false</span>
<span class="na">wikilinks</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">bibliography</span><span class="pi">:</span> <span class="s">references.bib</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">My Research Paper</span>
<span class="na">pretty</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">standalone</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">language</span><span class="pi">:</span> <span class="s">en</span>
<span class="na">quoteslanguage</span><span class="pi">:</span> <span class="s">english</span>
<span class="nn">---</span>
</code></pre>

<p>
<strong>  Example MultiMarkdown metadata:</strong>
</p>

<pre><code class="highlight ">indices: false
wikilinks: true
bibliography: references.bib
title: My Research Paper
</code></pre>

<p>
<strong>  Batch Processing:</strong>
  When processing multiple files with <code>apex *.md</code>, each file can use its own configuration via metadata. You can also use <code>--meta-file</code> or a global <code>config.yml</code> to specify shared configuration that applies to all processed files.
</p>

<pre><code class="highlight language-bash"><span class="c"># Process all markdown files, each with its own configuration</span>
apex <span class="k">*</span>.md

<span class="c"># Process all files with a shared configuration file</span>
apex <span class="k">*</span>.md <span class="nt">--meta-file</span> defaults.yml
</code></pre>

<p>
<strong>  Note:</strong> If <code>mode</code> is specified in metadata, it resets all options to that mode’s defaults before applying other metadata options. This ensures mode-specific defaults are applied first.
</p>

<h2 id="citations-and-bibliography">
  Citations and Bibliography
</h2>

<h3 id="bibliography-file">
<code>--bibliography FILE</code>
</h3>

<p>
  Specify a bibliography file in BibTeX, CSL JSON, or CSL YAML format. Can be used multiple times to load multiple bibliography files.
</p>

<p>
<strong>  Supported formats:</strong>
</p>

<ul>

  <li>
<strong>    BibTeX</strong> (<code>.bib</code>) - Standard bibliography format
  </li>

  <li>
<strong>    CSL JSON</strong> (<code>.json</code>) - Citation Style Language JSON format
  </li>

  <li>
<strong>    CSL YAML</strong> (<code>.yml</code>, <code>.yaml</code>) - Citation Style Language YAML format
  </li>

</ul>

<p>
<strong>  Behavior:</strong>
</p>

<ul>

  <li>
    Citations are automatically enabled when this option is used
  </li>

  <li>
    Bibliography can also be specified in document metadata (see <a href="#citations" onclick="showPage('citations'); return false;">Citations</a>)
  </li>

  <li>
    Multiple bibliography files are merged together
  </li>

  <li>
    Relative paths are resolved using the base directory (see <code>--base-dir</code>)
  </li>

</ul>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Single bibliography file</span>
apex document.md <span class="nt">--bibliography</span> refs.bib

<span class="c"># Multiple bibliography files</span>
apex document.md <span class="nt">--bibliography</span> refs1.bib <span class="nt">--bibliography</span> refs2.bib

<span class="c"># With base directory for relative paths</span>
apex document.md <span class="nt">--bibliography</span> references.bib <span class="nt">--base-dir</span> /path/to/docs
</code></pre>

<p>
<strong>  Input:</strong>
</p>

<pre><code class="highlight language-markdown">See [@doe99] for details.

<span class="c">&lt;!-- REFERENCES --&gt;</span>
</code></pre>

<p>
<strong>  Output:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>See <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"doe99"</span><span class="nt">&gt;</span>(Doe, John 1999)<span class="nt">&lt;/span&gt;</span> for details.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"refs"</span> <span class="na">class=</span><span class="s">"references csl-bib-body"</span><span class="nt">&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"ref-doe99"</span> <span class="na">class=</span><span class="s">"csl-entry"</span><span class="nt">&gt;</span>Doe, John 1999. <span class="nt">&lt;em&gt;</span>Article Title<span class="nt">&lt;/em&gt;</span>. <span class="nt">&lt;em&gt;</span>Journal Name<span class="nt">&lt;/em&gt;</span> 1: 1--10<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<h3 id="csl-file">
<code>--csl FILE</code>
</h3>

<p>
  Specify a Citation Style Language (CSL) file for formatting citations and bibliography.
</p>

<p>
<strong>  Behavior:</strong>
</p>

<ul>

  <li>
    Citations are automatically enabled when this option is used
  </li>

  <li>
    CSL file can also be specified in document metadata
  </li>

  <li>
    If no CSL file is specified, a default author-date style is used
  </li>

</ul>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--bibliography</span> refs.bib <span class="nt">--csl</span> apa.csl
</code></pre>

<h3 id="no-bibliography">
<code>--no-bibliography</code>
</h3>

<p>
  Suppress bibliography output even when citations are present in the document.
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--bibliography</span> refs.bib <span class="nt">--no-bibliography</span>
</code></pre>

<p>
<strong>  Note:</strong> Citations will still be processed and formatted, but the bibliography section will not be generated.
</p>

<h3 id="link-citations">
<code>--link-citations</code>
</h3>

<p>
  Link citations to their corresponding bibliography entries. Citations will include <code>href</code> attributes pointing to the bibliography entry.
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--bibliography</span> refs.bib <span class="nt">--link-citations</span>
</code></pre>

<p>
<strong>  Output with <code>--link-citations</code>:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>See <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#ref-doe99"</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"doe99"</span><span class="nt">&gt;</span>(Doe, John 1999)<span class="nt">&lt;/a&gt;</span> for details.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<p>
<strong>  Output without <code>--link-citations</code>:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>See <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"doe99"</span><span class="nt">&gt;</span>(Doe, John 1999)<span class="nt">&lt;/span&gt;</span> for details.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h3 id="show-tooltips">
<code>--show-tooltips</code>
</h3>

<p>
  Enable tooltips on citations when hovering (requires CSS support).
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--bibliography</span> refs.bib <span class="nt">--show-tooltips</span>
</code></pre>

<p>
<strong>  Note:</strong> This adds <code>title</code> attributes to citation links. CSS is required to style the tooltips.
</p>

<p>
  For complete documentation of citation syntax and bibliography features, see <a href="#citations" onclick="showPage('citations'); return false;">Citations</a>.
</p>

<h2 id="indices">
  Indices
</h2>

<p>
<strong>  Note:</strong> Indices are supported in <strong>MultiMarkdown</strong> and <strong>unified</strong> modes. Enabled by default in these modes.
</p>

<h3 id="indices">
<code>--indices</code>
</h3>

<p>
  Enable index processing with both mmark and TextIndex syntax support.
</p>

<p>
<strong>  Default:</strong> Enabled in MultiMarkdown and unified modes
</p>

<p>
<strong>  Behavior:</strong>
</p>

<ul>

  <li>
    Enables both mmark syntax (<code>(!item)</code>, <code>(!item, subitem)</code>, <code>(!!item, subitem)</code>) and TextIndex syntax (<code>{^}</code>, <code>[term]{^}</code>)
  </li>

  <li>
    Index entries are collected during parsing
  </li>

  <li>
    Index is automatically generated at the end of the document or at <code>&lt;!--INDEX--&gt;</code> marker
  </li>

  <li>
    Entries are sorted alphabetically and can be grouped by first letter
  </li>

</ul>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--indices</span>
</code></pre>

<p>
<strong>  Input:</strong>
</p>

<pre><code class="highlight language-markdown">This is about protocols (!Protocol).

And implementations (!Implementation).
</code></pre>

<p>
<strong>  Output:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>This is about protocols <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"index"</span> <span class="na">id=</span><span class="s">"idxref:0"</span><span class="nt">&gt;&lt;/span&gt;</span>.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>And implementations <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"index"</span> <span class="na">id=</span><span class="s">"idxref:1"</span><span class="nt">&gt;&lt;/span&gt;</span>.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"index-section"</span><span class="nt">&gt;</span>Index<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"index"</span><span class="nt">&gt;</span>
...
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<h3 id="no-indices">
<code>--no-indices</code>
</h3>

<p>
  Disable index processing entirely.
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--no-indices</span>
</code></pre>

<p>
<strong>  Note:</strong> When disabled, index syntax is treated as plain text and no index markers or index section are generated.
</p>

<h3 id="no-index">
<code>--no-index</code>
</h3>

<p>
  Suppress index generation while still creating index markers in the document.
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--no-index</span>
</code></pre>

<p>
<strong>  Behavior:</strong>
</p>

<ul>

  <li>
    Index markers (<code>&lt;span class=&quot;index&quot;&gt;</code>) are still created in the document
  </li>

  <li>
    Index section is not generated at the end
  </li>

  <li>
    Useful when you want to mark terms but generate the index separately
  </li>

</ul>

<p>
  For complete documentation of index syntax, see <a href="Syntax#indices">Syntax</a>.
</p>

<h3 id="hardbreaks">
<code>--hardbreaks</code>
</h3>

<p>
  Treat newlines as hard breaks (GFM style). Newlines become <code>&lt;br&gt;</code> tags.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--hardbreaks</span>
</code></pre>

<h3 id="no-sup-sub">
<code>--[no-]sup-sub</code>
</h3>

<p>
  Control MultiMarkdown-style superscript and subscript syntax.
</p>

<p>
<strong>  Syntax:</strong>
</p>

<ul>

  <li>
    The <code>^</code> character creates superscript for the text immediately following it. The superscript stops at the first space, punctuation, or newline.
  </li>

  <li>
    The <code>~</code> character creates subscript when used <strong>within a word/identifier</strong> with paired tildes (e.g., <code>H~2~O</code> creates H₂O). When tildes are at word boundaries (e.g., <code>~text~</code>), they create underline instead.
  </li>

</ul>

<p>
<strong>  Important:</strong> Subscript uses <strong>paired tildes within word boundaries</strong>. The tildes must be part of a word/identifier (alphanumeric characters) to create subscript. Tildes at word boundaries create underline.
</p>

<p>
<strong>  Default behavior by mode:</strong>
</p>

<ul>

  <li>
<strong>    Enabled</strong> in: unified, multimarkdown
  </li>

  <li>
<strong>    Disabled</strong> in: commonmark, gfm, kramdown
  </li>

</ul>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Enable sup/sub in GFM mode</span>
apex document.md <span class="nt">--mode</span> gfm <span class="nt">--sup-sub</span>

<span class="c"># Disable sup/sub in unified mode</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--no-sup-sub</span>
</code></pre>

<p>
<strong>  Input:</strong>
</p>

<pre><code class="highlight language-markdown">Water: H<span class="nt">&lt;sub&gt;</span>2<span class="nt">&lt;/sub&gt;</span>O          # Subscript (tildes within word)
Area: m<span class="nt">&lt;sup&gt;</span>2<span class="nt">&lt;/sup&gt;</span>              # Superscript
Formula: E = mc<span class="nt">&lt;sup&gt;</span>2<span class="nt">&lt;/sup&gt;</span>      # Superscript
Chemical: H<span class="nt">&lt;sub&gt;</span>2<span class="nt">&lt;/sub&gt;</span>SO<span class="nt">&lt;sub&gt;</span>4<span class="nt">&lt;/sub&gt;</span>    # Multiple subscripts within word
<span class="nt">&lt;u&gt;</span>h2o<span class="nt">&lt;/u&gt;</span>                  # Underline (tildes at word boundaries)
</code></pre>

<h3 id="no-divs">
<code>--[no-]divs</code>
</h3>

<p>
  Control Pandoc fenced divs syntax processing. Fenced divs allow you to create HTML <code>&lt;div&gt;</code> elements with attributes using a special fence syntax (<code>::::: {#id .class} ... :::::</code>).
</p>

<p>
<strong>  Default behavior:</strong>
</p>

<ul>

  <li>
<strong>    Enabled</strong> in: unified mode
  </li>

  <li>
<strong>    Disabled</strong> in: all other modes
  </li>

</ul>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Enable fenced divs in unified mode (default)</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--divs</span>

<span class="c"># Disable fenced divs in unified mode</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--no-divs</span>
</code></pre>

<p>
<strong>  Input:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"special"</span> <span class="na">class=</span><span class="s">"sidebar"</span><span class="nt">&gt;&lt;p&gt;</span>Here is a paragraph.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>And another.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>
<strong>  Output:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"special"</span> <span class="na">class=</span><span class="s">"sidebar"</span><span class="nt">&gt;</span>
<span class="nt">&lt;p&gt;</span>Here is a paragraph.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>And another.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>
<strong>  Features:</strong>
</p>

<ul>

  <li>
    Opening fences require at least 3 colons and must have attributes
  </li>

  <li>
    Closing fences need at least 3 colons (no attributes)
  </li>

  <li>
    Supports nested divs
  </li>

  <li>
    Attributes can include ID (<code>{#id}</code>), classes (<code>{.class}</code>), and custom attributes (<code>key=&quot;value&quot;</code>)
  </li>

  <li>
    Single unbraced word is treated as a class name
  </li>

  <li>
    Attributes can optionally be followed by trailing colons
  </li>

  <li>
    Supports different HTML block elements using <code>&gt;blocktype</code> syntax (e.g., <code>::: &gt;aside {.sidebar} ... :::</code> creates <code>&lt;aside&gt;</code> instead of <code>&lt;div&gt;</code>)
  </li>

</ul>

<p>
  See <a href="Syntax#pandoc-fenced-divs">Syntax</a> for complete documentation, including block types like <code>&gt;aside</code>, <code>&gt;article</code>, <code>&gt;section</code>, <code>&gt;details</code>, and <code>&gt;summary</code>.
</p>

<h3 id="no-spans">
<code>--[no-]spans</code>
</h3>

<p>
  Control Pandoc-style bracketed spans syntax (<code>[text]{IAL}</code>). Bracketed spans convert to HTML <code>&lt;span&gt;</code> elements with attributes.
</p>

<p>
<strong>  Default behavior:</strong>
</p>

<ul>

  <li>
<strong>    Enabled</strong> in: unified mode
  </li>

  <li>
<strong>    Disabled</strong> in: all other modes
  </li>

</ul>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Enable bracketed spans in unified mode (default)</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--spans</span>

<span class="c"># Disable bracketed spans in unified mode</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--no-spans</span>
</code></pre>

<p>
<strong>  Input:</strong>
</p>

<pre><code class="highlight language-markdown">This is <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"highlight"</span><span class="nt">&gt;</span>highlighted text<span class="nt">&lt;/span&gt;</span>
 in a sentence.
<span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"id"</span> <span class="na">class=</span><span class="s">"class"</span> <span class="na">key=</span><span class="s">"value"</span><span class="nt">&gt;</span>Custom span<span class="nt">&lt;/span&gt;</span>

</code></pre>

<p>
<strong>  Output:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>This is <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"highlight"</span><span class="nt">&gt;</span>highlighted text<span class="nt">&lt;/span&gt;</span> in a sentence.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;&lt;span</span> <span class="na">id=</span><span class="s">"id"</span> <span class="na">class=</span><span class="s">"class"</span> <span class="na">key=</span><span class="s">"value"</span><span class="nt">&gt;</span>Custom span<span class="nt">&lt;/span&gt;&lt;/p&gt;</span>
</code></pre>

<p>
<strong>  Features:</strong>
</p>

<ul>

  <li>
    Supports IAL syntax for attributes (ID, classes, custom attributes)
  </li>

  <li>
    Works with both Kramdown-style <code>{: #id .class}</code> and Pandoc-style <code>{#id .class}</code> attribute formats
  </li>

  <li>
    Can be nested within other inline elements
  </li>

</ul>

<p>
  See <a href="Syntax#bracketed-spans">Syntax</a> for complete documentation.
</p>

<h3 id="no-emoji-autocorrect">
<code>--[no-]emoji-autocorrect</code>
</h3>

<p>
  Control emoji name autocorrect. When enabled, emoji names like <code>🚀</code> are automatically converted to Unicode emoji characters.
</p>

<p>
<strong>  Default behavior:</strong>
</p>

<ul>

  <li>
<strong>    Enabled</strong> in: unified mode
  </li>

  <li>
<strong>    Disabled</strong> in: all other modes
  </li>

</ul>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Enable emoji autocorrect in unified mode (default)</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--emoji-autocorrect</span>

<span class="c"># Disable emoji autocorrect in unified mode</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--no-emoji-autocorrect</span>

<span class="c"># Enable emoji autocorrect in GFM mode</span>
apex document.md <span class="nt">--mode</span> gfm <span class="nt">--emoji-autocorrect</span>
</code></pre>

<p>
<strong>  Input:</strong>
</p>

<pre><code class="highlight language-markdown">Success! 🚀 🎉 ✨
I ❤️ Markdown!
</code></pre>

<p>
<strong>  Output with emoji-autocorrect enabled:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>Success! 🚀 🎉 ✨<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>I ❤️ Markdown!<span class="nt">&lt;/p&gt;</span>
</code></pre>

<p>
<strong>  Output with emoji-autocorrect disabled:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>Success! 🚀 🎉 ✨<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>I ❤️ Markdown!<span class="nt">&lt;/p&gt;</span>
</code></pre>

<p>
<strong>  Note:</strong> Apex supports 350+ GitHub emoji names. See <a href="Syntax#github-emoji">Syntax</a> for more information.
</p>

<p>
<strong>  Output:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>Water: H<span class="nt">&lt;sub&gt;</span>2<span class="nt">&lt;/sub&gt;</span>O<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Area: m<span class="nt">&lt;sup&gt;</span>2<span class="nt">&lt;/sup&gt;&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Formula: E = mc<span class="nt">&lt;sup&gt;</span>2<span class="nt">&lt;/sup&gt;&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Chemical: H<span class="nt">&lt;sub&gt;</span>2<span class="nt">&lt;/sub&gt;</span>SO<span class="nt">&lt;sub&gt;</span>4<span class="nt">&lt;/sub&gt;&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;&lt;u&gt;</span>h2o<span class="nt">&lt;/u&gt;&lt;/p&gt;</span>
</code></pre>

<h3 id="no-unsafe">
<code>--[no-]unsafe</code>
</h3>

<p>
  Control whether raw HTML is allowed in output.
</p>

<p>
<strong>  Default behavior by mode:</strong>
</p>

<ul>

  <li>
<strong>    Enabled</strong> in: unified, multimarkdown, kramdown
  </li>

  <li>
<strong>    Disabled</strong> in: commonmark, gfm
  </li>

</ul>

<p>
  When disabled, HTML tags are escaped or removed for security (GFM tag filter).
</p>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Enable raw HTML in GFM mode</span>
apex document.md <span class="nt">--mode</span> gfm <span class="nt">--unsafe</span>

<span class="c"># Disable raw HTML in unified mode</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--no-unsafe</span>
</code></pre>

<p>
<strong>  Input:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"custom"</span><span class="nt">&gt;</span>Custom HTML<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>
<strong>  Output with unsafe enabled:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"custom"</span><span class="nt">&gt;</span>Custom HTML<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>
<strong>  Output with unsafe disabled (GFM mode):</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span><span class="ni">&amp;lt;</span>div class="custom"<span class="ni">&amp;gt;</span>Custom HTML<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span><span class="nt">&lt;/p&gt;</span>
</code></pre>

<h3 id="no-wikilinks">
<code>--[no-]wikilinks</code>
</h3>

<p>
  Control wiki link syntax (<code>[[PageName]]</code>).
</p>

<p>
<strong>  Default:</strong> Disabled in all modes
</p>

<p>
  Wiki links must be explicitly enabled with <code>--wikilinks</code> to process <code>[[PageName]]</code>, <code>[[Page|Display]]</code>, and <code>[[Page#Section]]</code> syntax.
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Enable wiki links in unified mode</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--wikilinks</span>

<span class="c"># Enable wiki links in any mode</span>
apex document.md <span class="nt">--mode</span> gfm <span class="nt">--wikilinks</span>

<span class="c"># Disable wiki links (explicit)</span>
apex document.md <span class="nt">--no-wikilinks</span>
</code></pre>

<p>
<strong>  Input:</strong>
</p>

<pre><code class="highlight language-markdown">Check out [[Main Page]] for details.
Or see [[Main Page|the main page]] with custom text.
Link to [[Main Page#Section]] for a specific section.
</code></pre>

<p>
<strong>  Output with wikilinks enabled (default - spaces converted to dashes):</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>Check out <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"Main-Page"</span><span class="nt">&gt;</span>Main Page<span class="nt">&lt;/a&gt;</span> for details.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Or see <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"Main-Page"</span><span class="nt">&gt;</span>the main page<span class="nt">&lt;/a&gt;</span> with custom text.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Link to <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"Main-Page#Section"</span><span class="nt">&gt;</span>Main Page<span class="nt">&lt;/a&gt;</span> for a specific section.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<p>
<strong>  Output with wikilinks disabled:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>Check out [[Main Page]] for details.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Or see [[Main Page|the main page]] for custom text.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Link to [[Main Page#Section]] for a specific section.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h3 id="wikilink-space-mode">
<code>--wikilink-space MODE</code>
</h3>

<p>
  Control how spaces in wiki link page names are handled in the generated URL.
</p>

<p>
<strong>  Default:</strong> <code>dash</code> (spaces converted to dashes)
</p>

<p>
<strong>  Options:</strong>
</p>

<ul>

  <li>
<code>dash</code> - Convert spaces to dashes: <code>[[Home Page]]</code> → <code>href=&quot;Home-Page&quot;</code>
  </li>

  <li>
<code>none</code> - Remove spaces: <code>[[Home Page]]</code> → <code>href=&quot;HomePage&quot;</code>
  </li>

  <li>
<code>underscore</code> - Convert spaces to underscores: <code>[[Home Page]]</code> → <code>href=&quot;Home_Page&quot;</code>
  </li>

  <li>
<code>space</code> - Keep spaces (rendered as <code>%20</code> in HTML): <code>[[Home Page]]</code> → <code>href=&quot;Home%20Page&quot;</code>
  </li>

</ul>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Use dashes (default)</span>
apex document.md <span class="nt">--wikilinks</span> <span class="nt">--wikilink-space</span> dash

<span class="c"># Remove spaces</span>
apex document.md <span class="nt">--wikilinks</span> <span class="nt">--wikilink-space</span> none

<span class="c"># Use underscores</span>
apex document.md <span class="nt">--wikilinks</span> <span class="nt">--wikilink-space</span> underscore

<span class="c"># Keep spaces (not recommended for URLs)</span>
apex document.md <span class="nt">--wikilinks</span> <span class="nt">--wikilink-space</span> space
</code></pre>

<h3 id="wikilink-extension-ext">
<code>--wikilink-extension EXT</code>
</h3>

<p>
  Add a file extension to wiki link URLs.
</p>

<p>
<strong>  Default:</strong> No extension
</p>

<p>
  The extension is automatically prefixed with a dot if not provided. For example, <code>--wikilink-extension html</code> creates <code>href=&quot;Page.html&quot;</code> and <code>--wikilink-extension .html</code> also creates <code>href=&quot;Page.html&quot;</code>.
</p>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-bash"><span class="c"># Add .html extension</span>
apex document.md <span class="nt">--wikilinks</span> <span class="nt">--wikilink-extension</span> html

<span class="c"># Add .md extension</span>
apex document.md <span class="nt">--wikilinks</span> <span class="nt">--wikilink-extension</span> md

<span class="c"># Combine with space mode</span>
apex document.md <span class="nt">--wikilinks</span> <span class="nt">--wikilink-space</span> dash <span class="nt">--wikilink-extension</span> html
</code></pre>

<p>
<strong>  Input:</strong>
</p>

<pre><code class="highlight language-markdown">See [[Home Page]] for details.
</code></pre>

<p>
<strong>  Output with <code>--wikilink-space dash --wikilink-extension html</code>:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>See <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"Home-Page.html"</span><span class="nt">&gt;</span>Home Page<span class="nt">&lt;/a&gt;</span> for details.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h2 id="critic-markup-options">
  Critic Markup Options
</h2>

<h3 id="accept">
<code>--accept</code>
</h3>

<p>
  Accept all Critic Markup changes. Applies all additions, removes all deletions, keeps substitutions.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--accept</span>
</code></pre>

<p>
<strong>  Behavior:</strong>
</p>

<ul>

  <li>
<code>&lt;ins class=&quot;critic&quot;&gt;add&lt;/ins&gt;</code> → <code>add</code> (kept)
  </li>

  <li>
<code>&lt;del class=&quot;critic&quot;&gt;del&lt;/del&gt;</code> → (removed)
  </li>

  <li>
<code>&lt;del class=&quot;critic break&quot;&gt;old&lt;/del&gt;&lt;ins class=&quot;critic break&quot;&gt;new&lt;/ins&gt;</code> → <code>new</code> (kept)
  </li>

  <li>
<code>&lt;mark class=&quot;critic&quot;&gt;mark&lt;/mark&gt;</code> → <code>mark</code> (markup removed)
  </li>

  <li>
<code>&lt;span class=&quot;critic comment&quot;&gt;comment&lt;/span&gt;</code> → (removed)
  </li>

</ul>

<h3 id="reject">
<code>--reject</code>
</h3>

<p>
  Reject all Critic Markup changes. Reverts all changes, keeps original text.
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--reject</span>
</code></pre>

<p>
<strong>  Behavior:</strong>
</p>

<ul>

  <li>
<code>&lt;ins class=&quot;critic&quot;&gt;add&lt;/ins&gt;</code> → (removed)
  </li>

  <li>
<code>&lt;del class=&quot;critic&quot;&gt;del&lt;/del&gt;</code> → <code>del</code> (kept)
  </li>

  <li>
<code>&lt;del class=&quot;critic break&quot;&gt;old&lt;/del&gt;&lt;ins class=&quot;critic break&quot;&gt;new&lt;/ins&gt;</code> → <code>old</code> (kept)
  </li>

  <li>
<code>&lt;mark class=&quot;critic&quot;&gt;mark&lt;/mark&gt;</code> → <code>mark</code> (markup removed)
  </li>

  <li>
<code>&lt;span class=&quot;critic comment&quot;&gt;comment&lt;/span&gt;</code> → (removed)
  </li>

</ul>

<h2 id="inputoutput">
  Input/Output
</h2>

<h3 id="reading-from-stdin">
  Reading from stdin
</h3>

<p>
  If no file is specified, Apex reads from stdin:
</p>

<pre><code class="highlight language-bash"><span class="nb">echo</span> <span class="s2">"# Hello"</span> | apex
<span class="nt">---</span>|---|
<span class="nb">cat </span>document.md | apex <span class="o">&gt;</span> output.html
</code></pre>

<h3 id="writing-to-stdout">
  Writing to stdout
</h3>

<p>
  By default, Apex writes to stdout. Use <code>-o</code> or <code>&gt;</code> to redirect:
</p>

<pre><code class="highlight language-bash">apex document.md <span class="o">&gt;</span> output.html
apex document.md <span class="nt">-o</span> output.html
</code></pre>

<h2 id="combining-options">
  Combining Options
</h2>

<p>
  You can combine multiple options:
</p>

<pre><code class="highlight language-bash"><span class="c"># Standalone document with custom title and stylesheet, pretty-printed</span>
apex document.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"Report"</span> <span class="nt">--style</span> report.css <span class="nt">--pretty</span>

<span class="c"># GFM mode with no header IDs</span>
apex <span class="nt">--mode</span> gfm <span class="nt">--no-ids</span> document.md

<span class="c"># Unified mode with MMD-style header IDs</span>
apex <span class="nt">--mode</span> unified <span class="nt">--id-format</span> mmd document.md
</code></pre>

<h2 id="option-precedence">
  Option Precedence
</h2>

<p>
  Options are processed in order. Later options override earlier ones:
</p>

<pre><code class="highlight language-bash"><span class="c"># This will use GFM mode (unified is default, but --mode gfm overrides)</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--mode</span> gfm
</code></pre>

<h2 id="examples">
  Examples
</h2>

<h3 id="blog-post">
  Blog Post
</h3>

<pre><code class="highlight language-bash">apex post.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My Blog Post"</span> <span class="nt">--style</span> blog.css <span class="nt">--pretty</span> <span class="nt">-o</span> post.html
</code></pre>

<h3 id="github-compatible-output">
  GitHub-Compatible Output
</h3>

<pre><code class="highlight language-bash">apex README.md <span class="nt">--mode</span> gfm <span class="nt">--pretty</span> <span class="o">&gt;</span> README.html
</code></pre>

<h3 id="documentation-with-custom-ids">
  Documentation with Custom IDs
</h3>

<pre><code class="highlight language-bash">apex docs.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"Documentation"</span> <span class="nt">--id-format</span> mmd <span class="nt">--pretty</span>
</code></pre>

<h3 id="review-document-with-critic-markup">
  Review Document with Critic Markup
</h3>

<pre><code class="highlight language-bash"><span class="c"># Show all changes</span>
apex draft.md

<span class="c"># Apply all changes (final version)</span>
apex draft.md <span class="nt">--accept</span>

<span class="c"># Revert all changes (original version)</span>
apex draft.md <span class="nt">--reject</span>
</code></pre>

<h3 id="academic-document-with-citations">
  Academic Document with Citations
</h3>

<pre><code class="highlight language-bash"><span class="c"># Process document with bibliography</span>
apex paper.md <span class="nt">--bibliography</span> refs.bib

<span class="c"># With citation style and linked citations</span>
apex paper.md <span class="nt">--bibliography</span> refs.bib <span class="nt">--csl</span> apa.csl <span class="nt">--link-citations</span>

<span class="c"># Multiple bibliography files</span>
apex paper.md <span class="nt">--bibliography</span> refs1.bib <span class="nt">--bibliography</span> refs2.bib
</code></pre>

<h2 id="related">
  Related
</h2>

<ul>

  <li>
<a href="#modes" onclick="showPage('modes'); return false;">    Modes</a> - How modes affect available options
  </li>

  <li>
<a href="#header-ids" onclick="showPage('header-ids'); return false;">    Header IDs</a> - Header ID generation options
  </li>

  <li>
<a href="#usage" onclick="showPage('usage'); return false;">    Usage</a> - Basic usage examples
  </li>

</ul>

<h2 id="plugin-options">
  Plugin Options
</h2>

<h3 id="no-plugins">
<code>--[no-]plugins</code>
</h3>

<p>
  Enable or disable plugin processing.
</p>

<ul>

  <li>
<strong>    Default</strong>: Plugins are disabled unless you explicitly enable them.
  </li>

  <li>
<strong>    Enable</strong>: <code>--plugins</code>
  </li>

  <li>
<strong>    Disable</strong>: <code>--no-plugins</code>
  </li>

</ul>

<p>
  Plugins can also be enabled per document using metadata (e.g. <code>plugins: true</code>). See <a href="#plugins" onclick="showPage('plugins'); return false;">Plugins</a> for details.
</p>

<pre><code class="highlight language-bash">apex <span class="nt">--plugins</span> document.md
</code></pre>

<h3 id="list-plugins">
<code>--list-plugins</code>
</h3>

<p>
  List installed plugins and available plugins from the central directory.
</p>

<ul>

  <li>
    Prints a <code>## Installed Plugins</code> section for plugins found in your user plugin directory.
  </li>

  <li>
    Prints a <code>---</code> separator and a <code>## Available Plugins</code> section with plugins from the remote JSON directory that are <strong>not</strong> already installed.
  </li>

</ul>

<pre><code class="highlight language-bash">apex <span class="nt">--list-plugins</span>
</code></pre>

<h3 id="install-plugin-id">
<code>--install-plugin ID</code>
</h3>

<p>
  Install a plugin from the central directory by its <code>id</code>.
</p>

<ul>

  <li>
    Fetches <code>apex-plugins.json</code> from the <code>ApexMarkdown/apex-plugins</code> repository.
  </li>

  <li>
    Locates the plugin entry with matching <code>id</code>.
  </li>

  <li>
    Clones the plugin repository into your user plugin directory (e.g. <code>~/.config/apex/plugins/ID</code>).
  </li>

  <li>
    If the plugin’s <code>plugin.yml</code> defines a <code>post_install</code> command, Apex runs it from the plugin directory after cloning.
  </li>

</ul>

<pre><code class="highlight language-bash">apex <span class="nt">--install-plugin</span> kbd
</code></pre>

<h3 id="uninstall-plugin-id">
<code>--uninstall-plugin ID</code>
</h3>

<p>
  Uninstall a locally installed plugin by its <code>id</code>.
</p>

<ul>

  <li>
    Verifies that the plugin directory exists under the user plugin path.
  </li>

  <li>
    Prompts for confirmation before deleting the plugin directory.
  </li>

  <li>
    Removes only the plugin’s directory; support data under <code>.../apex/support</code> is left intact.
  </li>

</ul>

<pre><code class="highlight language-bash">apex <span class="nt">--uninstall-plugin</span> kbd
</code></pre>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-multi-file-documents" class="page">

    <h1 id="multi-file-documents-with-apex">
      Multi-file documents with Apex
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#multi-file-documents-with-apex">Multi-file documents with Apex</a><ul><li><a href="#using-combine">Using --combine</a><ul><li><a href="#basic-usage-with-multiple-files">Basic usage with multiple files</a></li><li><a href="#using-a-gitbook-style-summarymd">Using a GitBook-style SUMMARY.md</a></li></ul></li><li><a href="#using-mmd-merge-multimarkdown-style">Using --mmd-merge (MultiMarkdown-style)</a><ul><li><a href="#example-mmdmerge-index-file">Example mmd_merge index file</a></li><li><a href="#running-mmd-merge-and-piping-back-to-apex">Running --mmd-merge and piping back to Apex</a></li></ul></li><li><a href="#combining-multiple-files-directly-on-the-command-line">Combining multiple files directly on the command line</a></li><li><a href="#building-multi-file-documents-with-include-syntax">Building multi-file documents with include syntax</a><ul><li><a href="#multimarkdown-include-example">MultiMarkdown include example</a></li><li><a href="#marked-style-include-example">Marked-style include example</a></li><li><a href="#ia-writer-style-include-example">iA Writer-style include example</a></li><li><a href="#combining-includes-with-combine">Combining includes with --combine</a></li></ul></li><li><a href="#choosing-between-combine-mmd-merge-and-includes">Choosing between --combine, --mmd-merge, and includes</a></li></ul></li></ul></nav>

    <p>
      Apex can assemble larger documents from many smaller Markdown files. There are two primary tools for this:
    </p>

    <ul>

      <li>
<strong><code>--combine</code></strong>: Apex’s native Markdown combiner, with optional GitBook-style <code>SUMMARY.md</code> support.
      </li>

      <li>
<strong><code>--mmd-merge</code></strong>: A MultiMarkdown-compatible mode that emulates <code>mmd_merge.pl</code>, reading a plain-text index file to stitch documents together.
      </li>

    </ul>

    <p>
      Both modes output <strong>raw Markdown</strong>, which you can then pipe back into <code>apex</code> for full HTML rendering.
    </p>

<hr />
    <h2 id="using-combine">
      Using <code>--combine</code>
    </h2>

    <h3 id="basic-usage-with-multiple-files">
      Basic usage with multiple files
    </h3>

    <p>
      You can pass multiple Markdown files after <code>--combine</code>. Apex will:
    </p>

    <ul>

      <li>
        Read each file in order
      </li>

      <li>
        Expand any include syntax it supports (Marked, MultiMarkdown, iA Writer)
      </li>

      <li>
        Separate each document with blank lines
      </li>

    </ul>

    <p>
      Example:
    </p>

<pre><code class="highlight language-bash">apex <span class="nt">--combine</span> intro.md chapter1.md chapter2.md <span class="o">&gt;</span> combined.md

<span class="c"># Then render the combined Markdown:</span>
apex combined.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My Book"</span> <span class="nt">-o</span> book.html
</code></pre>

  <p>
    Or in a single pipeline:
  </p>

<pre><code class="highlight language-bash">apex <span class="nt">--combine</span> intro.md chapter1.md chapter2.md <span class="se">\</span>
  | apex <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My Book"</span> <span class="nt">-o</span> book.html
</code></pre>

<h3 id="using-a-gitbook-style-summarymd">
  Using a GitBook-style <code>SUMMARY.md</code>
</h3>

<p>
  When one of the inputs to <code>--combine</code> is named <code>SUMMARY.md</code>, Apex treats it as a <strong>GitBook index</strong>. It scans the file for Markdown links and combines the referenced pages in order:
</p>

<p>
  Example <code>SUMMARY.md</code>:
</p>

<pre><code class="highlight language-markdown"><span class="gh"># My Book</span>
<span class="p">
-</span> <span class="p">[</span><span class="nv">Introduction</span><span class="p">](</span><span class="sx">intro.md</span><span class="p">)</span>
<span class="p">-</span> <span class="p">[</span><span class="nv">Getting Started</span><span class="p">](</span><span class="sx">getting-started.md</span><span class="p">)</span>
<span class="p">-</span> <span class="p">[</span><span class="nv">Advanced Topics</span><span class="p">](</span><span class="sx">advanced.md</span><span class="p">)</span>
<span class="p">  -</span> <span class="p">[</span><span class="nv">Performance</span><span class="p">](</span><span class="sx">performance.md</span><span class="p">)</span>
<span class="p">  -</span> <span class="p">[</span><span class="nv">Appendix</span><span class="p">](</span><span class="sx">appendix.md</span><span class="p">)</span>
</code></pre>

<p>
  To build your book:
</p>

<pre><code class="highlight language-bash">apex <span class="nt">--combine</span> SUMMARY.md <span class="se">\</span>
  | apex <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My Book"</span> <span class="nt">-o</span> book.html
</code></pre>

<p>
<code>--combine</code> will:
</p>

<ul>

  <li>
    Follow the link targets (<code>intro.md</code>, <code>getting-started.md</code>, etc.)
  </li>

  <li>
    Expand any file includes inside those documents
  </li>

  <li>
    Output a single Markdown stream to stdout, ready for final processing
  </li>

</ul>

<hr />
<h2 id="using-mmd-merge-multimarkdown-style">
  Using <code>--mmd-merge</code> (MultiMarkdown-style)
</h2>

<p>
<code>--mmd-merge</code> emulates the original MultiMarkdown <code>mmd_merge.pl</code> script. It reads one or more <strong>plain text index files</strong> and:
</p>

<ul>

  <li>
    Skips blank lines
  </li>

  <li>
    Treats lines whose first non-whitespace character is <code>#</code> as <strong>comments</strong>
  </li>

  <li>
    Treats all other lines as filenames to include
  </li>

  <li>
    Uses <strong>indentation</strong> (tabs or groups of four spaces) to increase the header level of the included file
  </li>

</ul>

<h3 id="example-mmdmerge-index-file">
  Example mmd_merge index file
</h3>

<pre><code class="highlight language-text">metadata.txt
Chapter-1.md
    sub-chapter-1-1.md
    sub-chapter-1-2.md
Chapter-2.md
    sub-chapter-2-1.md
    sub-chapter-2-2.md
FAQ.md
Acknowledgments.md
</code></pre>

<p>
  Behavior:
</p>

<ul>

  <li>
<code>metadata.txt</code>, <code>Chapter-1.md</code>, <code>Chapter-2.md</code>, <code>FAQ.md</code>, <code>Acknowledgments.md</code> are included at their original heading levels.
  </li>

  <li>
    Files indented by <strong>one tab or four spaces</strong> (<code>sub-chapter-1-1.md</code>, <code>sub-chapter-1-2.md</code>, etc.) have all headings shifted <strong>down one level</strong>:
    <ul>

      <li>
<code># Heading</code> → <code>## Heading</code>
      </li>

      <li>
<code>## Subheading</code> → <code>### Subheading</code>, etc.
      </li>

    </ul>

  </li>

</ul>

<p>
  Comments are supported:
</p>

<pre><code class="highlight language-text"># This is my book index
metadata.txt

# Part 1
Chapter-1.md
    sub-chapter-1-1.md
</code></pre>

<p>
  Lines starting with <code>#</code> after optional whitespace are ignored.
</p>

<h3 id="running-mmd-merge-and-piping-back-to-apex">
  Running <code>--mmd-merge</code> and piping back to Apex
</h3>

<p>
  Assuming the index file above is named <code>index.txt</code>:
</p>

<pre><code class="highlight language-bash">apex <span class="nt">--mmd-merge</span> index.txt <span class="se">\</span>
  | apex <span class="nt">--mode</span> mmd <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My MMD Book"</span> <span class="nt">-o</span> book.html
</code></pre>

<p>
  You can also merge multiple index files:
</p>

<pre><code class="highlight language-bash">apex <span class="nt">--mmd-merge</span> part1.txt part2.txt <span class="se">\</span>
  | apex <span class="nt">--mode</span> mmd <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My Two-Part Book"</span> <span class="nt">-o</span> book.html
</code></pre>

<p>
  Notes:
</p>

<ul>

  <li>
<code>--mmd-merge</code> does <strong>not</strong> itself expand includes; it just concatenates files and shifts headings.
  </li>

  <li>
    For full MultiMarkdown semantics, use <code>--mode mmd</code> when piping the merged Markdown back into Apex.
  </li>

</ul>

<hr />
<h2 id="combining-multiple-files-directly-on-the-command-line">
  Combining multiple files directly on the command line
</h2>

<p>
  You don’t need an index file to combine documents. With <code>--combine</code>, you can just list the files in order:
</p>

<pre><code class="highlight language-bash">apex <span class="nt">--combine</span> metadata.md intro.md chapter1.md chapter2.md <span class="se">\</span>
  | apex <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"Direct Combine"</span> <span class="nt">-o</span> book.html
</code></pre>

<p>
  This approach works well when:
</p>

<ul>

  <li>
    The order is simple and fixed
  </li>

  <li>
    You don’t need header-level shifting based on indentation
  </li>

</ul>

<p>
  If you need finer control over header levels, use:
</p>

<ul>

  <li>
<code>--mmd-merge</code> with an index file (indentation-based)
  </li>

  <li>
    Or explicit headings inside your individual files
  </li>

</ul>

<hr />
<h2 id="building-multi-file-documents-with-include-syntax">
  Building multi-file documents with include syntax
</h2>

<p>
  In addition to <code>--combine</code> and <code>--mmd-merge</code>, Apex supports <strong>file includes</strong> inside Markdown. This lets you treat one file as the “root” and pull in other files at specific points.
</p>

<p>
  Supported include syntaxes:
</p>

<ul>

  <li>
<strong>    MultiMarkdown</strong>: <code>{{file.md}}</code>
  </li>

  <li>
<strong>    Marked</strong>: <code>(Markdown include),</code> (code include), `` (raw HTML)
  </li>

  <li>
<strong>    iA Writer</strong>: <code>/file.md</code> at the start of a line
  </li>

</ul>

<h3 id="multimarkdown-include-example">
  MultiMarkdown include example
</h3>

<p>
<code>book.md</code>:
</p>

<pre><code class="highlight language-markdown">Title: My Included Book

{{metadata.md}}

{{intro.md}}
{{chapter1.md}}
{{chapter2.md}}
{{appendix.md}}
</code></pre>

<p>
  Build and render:
</p>

<pre><code class="highlight language-bash">apex book.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My Included Book"</span> <span class="nt">-o</span> book.html
</code></pre>

<h3 id="marked-style-include-example">
  Marked-style include example
</h3>

<p>
<code>book.md</code>:
</p>

<pre><code class="highlight language-markdown"><span class="gh"># My Marked-Style Book</span>

</code></pre>

<p>
  Render:
</p>

<pre><code class="highlight language-bash">apex book.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My Marked Book"</span> <span class="nt">-o</span> book.html
</code></pre>

<h3 id="ia-writer-style-include-example">
  iA Writer-style include example
</h3>

<p>
<code>book.md</code>:
</p>

<pre><code class="highlight language-markdown"><span class="gh"># My iA Writer-Style Book</span>

/intro.md
/chapter1.md
/chapter2.md
</code></pre>

<p>
  Render:
</p>

<pre><code class="highlight language-bash">apex book.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My iA Book"</span> <span class="nt">-o</span> book.html
</code></pre>

<h3 id="combining-includes-with-combine">
  Combining includes with <code>--combine</code>
</h3>

<p>
  You can combine both approaches: use includes inside files and then use <code>--combine</code> on top:
</p>

<pre><code class="highlight language-bash"><span class="c"># Each chapter uses includes, and we combine chapters into one big stream:</span>
apex <span class="nt">--combine</span> part1.md part2.md part3.md <span class="se">\</span>
  | apex <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"Big Included Book"</span> <span class="nt">-o</span> book.html
</code></pre>

<p>
  This is especially useful when:
</p>

<ul>

  <li>
    Each part has its own local includes
  </li>

  <li>
    You want a single final HTML output
  </li>

</ul>

<hr />
<h2 id="choosing-between-combine-mmd-merge-and-includes">
  Choosing between <code>--combine</code>, <code>--mmd-merge</code>, and includes
</h2>

<ul>

  <li>

    <p>
<strong>      Use <code>--combine</code></strong> when:
    </p>

    <ul>

      <li>
        You want Apex to expand includes
      </li>

      <li>
        You like GitBook-style <code>SUMMARY.md</code> navigation
      </li>

      <li>
        You just want to pass multiple files and let Apex concatenate them
      </li>

    </ul>

  </li>

  <li>

    <p>
<strong>      Use <code>--mmd-merge</code></strong> when:
    </p>

    <ul>

      <li>
        You have existing MultiMarkdown workflows or <code>mmd_merge.pl</code> index files
      </li>

      <li>
        You want indentation-based header level shifting
      </li>

      <li>
        You want a very simple, text-only index format
      </li>

    </ul>

  </li>

  <li>

    <p>
<strong>      Use include syntax</strong> when:
    </p>

    <ul>

      <li>
        You want one “master” document that controls where content appears
      </li>

      <li>
        You prefer to keep structure inside Markdown files rather than an external index
      </li>

    </ul>

  </li>

</ul>

<p>
  All three can be mixed and matched, and all ultimately produce <strong>Markdown</strong> that you can feed back into <code>apex</code> to generate the final HTML, PDF (via Pandoc), or other formats in your toolchain.
</p>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-citations" class="page">

    <h1 id="citations-and-bibliography">
      Citations and Bibliography
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#citations-and-bibliography">Citations and Bibliography</a><ul><li><a href="#quick-start">Quick Start</a></li><li><a href="#citation-syntaxes">Citation Syntaxes</a><ul><li><a href="#pandoc-syntax">Pandoc Syntax</a></li><li><a href="#multimarkdown-syntax">MultiMarkdown Syntax</a></li><li><a href="#mmark-syntax">mmark Syntax</a></li></ul></li><li><a href="#bibliography-formats">Bibliography Formats</a><ul><li><a href="#bibtex-bib">BibTeX (.bib)</a></li><li><a href="#csl-json-json">CSL JSON (.json)</a></li><li><a href="#csl-yaml-yml-yaml">CSL YAML (.yml, .yaml)</a></li></ul></li><li><a href="#specifying-bibliography">Specifying Bibliography</a><ul><li><a href="#command-line">Command Line</a></li><li><a href="#document-metadata">Document Metadata</a></li></ul></li><li><a href="#bibliography-generation">Bibliography Generation</a></li><li><a href="#citation-options">Citation Options</a><ul><li><a href="#link-citations">Link Citations</a></li><li><a href="#suppress-bibliography">Suppress Bibliography</a></li><li><a href="#citation-style-csl">Citation Style (CSL)</a></li></ul></li><li><a href="#mode-support">Mode Support</a></li><li><a href="#performance">Performance</a></li><li><a href="#related">Related</a></li></ul></li></ul></nav>

    <p>
      Apex supports citations and bibliographies with multiple syntax styles and bibliography formats. Citations are processed in <strong>MultiMarkdown</strong> and <strong>unified</strong> modes.
    </p>

    <h2 id="quick-start">
      Quick Start
    </h2>

    <p>
<strong>      1. Create a bibliography file:</strong>
    </p>

    <p>
      Create a BibTeX file (<code>references.bib</code>):
    </p>

<pre><code class="highlight language-bibtex"><span class="nc">@article</span><span class="p">{</span><span class="nl">doe99</span><span class="p">,</span>
  <span class="na">author</span> <span class="p">=</span> <span class="s">{Doe, John}</span><span class="p">,</span>
  <span class="na">title</span> <span class="p">=</span> <span class="s">{Article Title}</span><span class="p">,</span>
  <span class="na">journal</span> <span class="p">=</span> <span class="s">{Journal Name}</span><span class="p">,</span>
  <span class="na">year</span> <span class="p">=</span> <span class="s">{1999}</span><span class="p">,</span>
  <span class="na">volume</span> <span class="p">=</span> <span class="s">{1}</span><span class="p">,</span>
  <span class="na">pages</span> <span class="p">=</span> <span class="s">{1--10}</span>
<span class="p">}</span>

<span class="nc">@book</span><span class="p">{</span><span class="nl">smith2000</span><span class="p">,</span>
  <span class="na">author</span> <span class="p">=</span> <span class="s">{Smith, Jane}</span><span class="p">,</span>
  <span class="na">title</span> <span class="p">=</span> <span class="s">{Book Title}</span><span class="p">,</span>
  <span class="na">publisher</span> <span class="p">=</span> <span class="s">{Publisher}</span><span class="p">,</span>
  <span class="na">year</span> <span class="p">=</span> <span class="s">{2000}</span>
<span class="p">}</span>
</code></pre>

  <p>
<strong>    2. Add citations to your document:</strong>
  </p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">bibliography</span><span class="pi">:</span> <span class="s">references.bib</span>
<span class="nn">---</span>

See [@doe99] for details. Smith discusses this in [@smith2000].

<span class="gu">## References</span>

<span class="c">&lt;!-- REFERENCES --&gt;</span>
</code></pre>

<p>
<strong>  3. Process with Apex:</strong>
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--bibliography</span> references.bib
</code></pre>

<p>
  Or specify in metadata (as shown above) and just run:
</p>

<pre><code class="highlight language-bash">apex document.md
</code></pre>

<h2 id="citation-syntaxes">
  Citation Syntaxes
</h2>

<p>
  Apex supports three citation syntax styles, automatically detected in unified mode:
</p>

<h3 id="pandoc-syntax">
  Pandoc Syntax
</h3>

<p>
  Pandoc-style citations use square brackets with <code>@</code> prefix:
</p>

<p>
<strong>  Basic citation:</strong>
</p>

<pre><code class="highlight language-markdown">See [@doe99] for details.
</code></pre>

<p>
<strong>  Multiple citations:</strong>
</p>

<pre><code class="highlight language-markdown">See [@doe99; @smith2000; @smith2004] for more information.
</code></pre>

<p>
<strong>  Author in text:</strong>
</p>

<pre><code class="highlight language-markdown">@smith04 says blah.
</code></pre>

<p>
<strong>  Author suppressed (year only):</strong>
</p>

<pre><code class="highlight language-markdown">Smith says blah [-@smith04].
</code></pre>

<p>
<strong>  With locator (page numbers):</strong>
</p>

<pre><code class="highlight language-markdown">@smith04 [p. 33] says blah.
See @doe99, pp. 33-35 and <span class="ge">*passim*</span>.
</code></pre>

<p>
<strong>  Output:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>See <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"doe99"</span><span class="nt">&gt;</span>(Doe, John 1999)<span class="nt">&lt;/span&gt;</span> for details.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>See <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"doe99 smith2000 smith2004"</span><span class="nt">&gt;</span>(Doe, John 1999; Smith, Jane 2000, 2004)<span class="nt">&lt;/span&gt;</span> for more information.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;&lt;span</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"smith04"</span><span class="nt">&gt;</span>Smith, John (2004)<span class="nt">&lt;/span&gt;</span> says blah.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Smith says blah <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"smith04"</span><span class="nt">&gt;</span>(2004)<span class="nt">&lt;/span&gt;</span>.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h3 id="multimarkdown-syntax">
  MultiMarkdown Syntax
</h3>

<p>
  MultiMarkdown-style citations use <code>#</code> prefix:
</p>

<p>
<strong>  Basic citation:</strong>
</p>

<pre><code class="highlight language-markdown">This is a statement[#Doe:2006].
</code></pre>

<p>
<strong>  With locator:</strong>
</p>

<pre><code class="highlight language-markdown">This is a statement<span class="p">[</span><span class="nv">p. 23</span><span class="p">][</span><span class="ss">#Doe:2006</span><span class="p">]</span>.
</code></pre>

<p>
<strong>  Empty locator:</strong>
</p>

<pre><code class="highlight language-markdown">This is a statement<span class="p">[][</span><span class="ss">#Doe:2006</span><span class="p">]</span>.
</code></pre>

<p>
<strong>  Inline citation:</strong>
</p>

<pre><code class="highlight language-markdown">As per Doe.[#John Doe. <span class="ge">*A Totally Fake Book 1*</span>. Vanity Press, 2006.]
</code></pre>

<p>
<strong>  Output:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>This is a statement<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"Doe:2006"</span><span class="nt">&gt;</span>(Doe:2006)<span class="nt">&lt;/span&gt;</span>.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>This is a statement[p. 23]<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"Doe:2006"</span><span class="nt">&gt;</span>(Doe:2006)<span class="nt">&lt;/span&gt;</span>.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h3 id="mmark-syntax">
  mmark Syntax
</h3>

<p>
  mmark-style citations use <code>@</code> prefix (similar to Pandoc but with different conventions):
</p>

<p>
<strong>  Basic citation:</strong>
</p>

<pre><code class="highlight language-markdown">This references [@RFC2535].
</code></pre>

<p>
<strong>  Normative citation:</strong>
</p>

<pre><code class="highlight language-markdown">This references [@!RFC1034] (normative).
</code></pre>

<p>
<strong>  Multiple citations:</strong>
</p>

<pre><code class="highlight language-markdown">Multiple citations: [@RFC1034;@RFC1035].
</code></pre>

<p>
<strong>  Combined reference:</strong>
</p>

<pre><code class="highlight language-markdown">Combined reference: [@RFC1034@STD3].
</code></pre>

<p>
<strong>  Output:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>This references <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"RFC2535"</span><span class="nt">&gt;</span>(RFC2535)<span class="nt">&lt;/span&gt;</span>.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Multiple citations: <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"RFC1034"</span><span class="nt">&gt;</span>(RFC1034)<span class="nt">&lt;/span&gt;</span>;<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"RFC1035"</span><span class="nt">&gt;</span>(RFC1035)<span class="nt">&lt;/span&gt;</span>.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h2 id="bibliography-formats">
  Bibliography Formats
</h2>

<p>
  Apex supports three bibliography formats:
</p>

<h3 id="bibtex-bib">
  BibTeX (<code>.bib</code>)
</h3>

<p>
  Standard BibTeX format:
</p>

<pre><code class="highlight language-bibtex"><span class="nc">@article</span><span class="p">{</span><span class="nl">doe99</span><span class="p">,</span>
  <span class="na">author</span> <span class="p">=</span> <span class="s">{Doe, John}</span><span class="p">,</span>
  <span class="na">title</span> <span class="p">=</span> <span class="s">{Article Title}</span><span class="p">,</span>
  <span class="na">journal</span> <span class="p">=</span> <span class="s">{Journal Name}</span><span class="p">,</span>
  <span class="na">year</span> <span class="p">=</span> <span class="s">{1999}</span><span class="p">,</span>
  <span class="na">volume</span> <span class="p">=</span> <span class="s">{1}</span><span class="p">,</span>
  <span class="na">pages</span> <span class="p">=</span> <span class="s">{1--10}</span>
<span class="p">}</span>

<span class="nc">@book</span><span class="p">{</span><span class="nl">smith2000</span><span class="p">,</span>
  <span class="na">author</span> <span class="p">=</span> <span class="s">{Smith, Jane}</span><span class="p">,</span>
  <span class="na">title</span> <span class="p">=</span> <span class="s">{Book Title}</span><span class="p">,</span>
  <span class="na">publisher</span> <span class="p">=</span> <span class="s">{Publisher}</span><span class="p">,</span>
  <span class="na">year</span> <span class="p">=</span> <span class="s">{2000}</span>
<span class="p">}</span>
</code></pre>

<h3 id="csl-json-json">
  CSL JSON (<code>.json</code>)
</h3>

<p>
  Citation Style Language JSON format:
</p>

<pre><code class="highlight language-json"><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"doe99"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"article-journal"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Article Title"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"family"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"given"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"container-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Journal Name"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"issued"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"date-parts"</span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="mi">1999</span><span class="p">]]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1-10"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="csl-yaml-yml-yaml">
  CSL YAML (<code>.yml</code>, <code>.yaml</code>)
</h3>

<p>
  Citation Style Language YAML format:
</p>

<pre><code class="highlight language-yaml"><span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s">doe99</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">article-journal</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s">Article Title</span>
  <span class="na">author</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">family</span><span class="pi">:</span> <span class="s">Doe</span>
      <span class="na">given</span><span class="pi">:</span> <span class="s">John</span>
  <span class="na">container-title</span><span class="pi">:</span> <span class="s">Journal Name</span>
  <span class="na">issued</span><span class="pi">:</span>
    <span class="na">date-parts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="pi">-</span> <span class="m">1999</span>
  <span class="na">volume</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">page</span><span class="pi">:</span> <span class="s">1-10</span>
</code></pre>

<h2 id="specifying-bibliography">
  Specifying Bibliography
</h2>

<h3 id="command-line">
  Command Line
</h3>

<pre><code class="highlight language-bash"><span class="c"># Single file</span>
apex document.md <span class="nt">--bibliography</span> references.bib

<span class="c"># Multiple files</span>
apex document.md <span class="nt">--bibliography</span> refs1.bib <span class="nt">--bibliography</span> refs2.bib

<span class="c"># With base directory</span>
apex document.md <span class="nt">--bibliography</span> refs.bib <span class="nt">--base-dir</span> /path/to/docs
</code></pre>

<h3 id="document-metadata">
  Document Metadata
</h3>

<p>
<strong>  YAML front matter:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">bibliography</span><span class="pi">:</span> <span class="s">references.bib</span>
<span class="nn">---</span>

See [@doe99] for details.
</code></pre>

<p>
<strong>  Multiple files:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">bibliography</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">refs1.bib</span>
  <span class="pi">-</span> <span class="s">refs2.bib</span>
<span class="nn">---</span>

See [@doe99] for details.
</code></pre>

<p>
<strong>  MultiMarkdown metadata:</strong>
</p>

<pre><code class="highlight language-markdown">Bibliography: references.bib

See [@doe99] for details.
</code></pre>

<p>
<strong>  Pandoc title block:</strong>
</p>

<pre><code class="highlight language-markdown">% Bibliography: references.bib

See [@doe99] for details.
</code></pre>

<h2 id="bibliography-generation">
  Bibliography Generation
</h2>

<p>
  Bibliography is automatically generated from all cited entries and inserted at the <code>&lt;!-- REFERENCES --&gt;</code> marker:
</p>

<pre><code class="highlight language-markdown">See [@doe99] and [@smith2000] for details.

<span class="gu">## References</span>

<span class="c">&lt;!-- REFERENCES --&gt;</span>
</code></pre>

<p>
<strong>  Output:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>See <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"doe99"</span><span class="nt">&gt;</span>(Doe, John 1999)<span class="nt">&lt;/span&gt;</span> and <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"smith2000"</span><span class="nt">&gt;</span>(Smith, Jane 2000)<span class="nt">&lt;/span&gt;</span> for details.<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;h2&gt;</span>References<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"refs"</span> <span class="na">class=</span><span class="s">"references csl-bib-body"</span><span class="nt">&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"ref-doe99"</span> <span class="na">class=</span><span class="s">"csl-entry"</span><span class="nt">&gt;</span>Doe, John 1999. <span class="nt">&lt;em&gt;</span>Article Title<span class="nt">&lt;/em&gt;</span>. <span class="nt">&lt;em&gt;</span>Journal Name<span class="nt">&lt;/em&gt;</span> 1: 1--10<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"ref-smith2000"</span> <span class="na">class=</span><span class="s">"csl-entry"</span><span class="nt">&gt;</span>Smith, Jane 2000. <span class="nt">&lt;em&gt;</span>Book Title<span class="nt">&lt;/em&gt;</span>. Publisher<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>
  If no <code>&lt;!-- REFERENCES --&gt;</code> marker is found, the bibliography is appended to the end of the document.
</p>

<h2 id="citation-options">
  Citation Options
</h2>

<h3 id="link-citations">
  Link Citations
</h3>

<p>
  Use <code>--link-citations</code> to make citations link to their bibliography entries:
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--bibliography</span> refs.bib <span class="nt">--link-citations</span>
</code></pre>

<p>
<strong>  Output:</strong>
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;p&gt;</span>See <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#ref-doe99"</span> <span class="na">class=</span><span class="s">"citation"</span> <span class="na">data-cites=</span><span class="s">"doe99"</span><span class="nt">&gt;</span>(Doe, John 1999)<span class="nt">&lt;/a&gt;</span> for details.<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h3 id="suppress-bibliography">
  Suppress Bibliography
</h3>

<p>
  Use <code>--no-bibliography</code> to suppress bibliography output while still processing citations:
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--bibliography</span> refs.bib <span class="nt">--no-bibliography</span>
</code></pre>

<h3 id="citation-style-csl">
  Citation Style (CSL)
</h3>

<p>
  Specify a Citation Style Language file to control citation and bibliography formatting:
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--bibliography</span> refs.bib <span class="nt">--csl</span> apa.csl
</code></pre>

<p>
  CSL files can also be specified in metadata:
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">bibliography</span><span class="pi">:</span> <span class="s">refs.bib</span>
<span class="na">csl</span><span class="pi">:</span> <span class="s">apa.csl</span>
<span class="nn">---</span>
</code></pre>

<h2 id="mode-support">
  Mode Support
</h2>

<p>
<strong>  Unified mode:</strong>
</p>

<ul>

  <li>
    All citation syntaxes supported (auto-detected)
  </li>

  <li>
    All bibliography formats supported
  </li>

  <li>
    Citations enabled by default when bibliography is provided
  </li>

</ul>

<p>
<strong>  MultiMarkdown mode:</strong>
</p>

<ul>

  <li>
    MultiMarkdown citation syntax (<code>[#key]</code>)
  </li>

  <li>
    All bibliography formats supported
  </li>

  <li>
    Citations enabled by default when bibliography is provided
  </li>

</ul>

<p>
<strong>  CommonMark/GFM modes:</strong>
</p>

<ul>

  <li>
    Citations disabled (pure CommonMark/GFM)
  </li>

</ul>

<p>
<strong>  Kramdown mode:</strong>
</p>

<ul>

  <li>
    Citations disabled (Kramdown uses different citation system)
  </li>

</ul>

<h2 id="performance">
  Performance
</h2>

<p>
  Citations are only processed when a bibliography is actually provided (via <code>--bibliography</code> flag or metadata). This ensures no performance impact when citations aren’t being used.
</p>

<h2 id="related">
  Related
</h2>

<ul>

  <li>
<a href="#command-line-options" onclick="showPage('command-line-options'); return false;">    Command Line Options</a> - Citation-related CLI flags
  </li>

  <li>
<a href="#syntax" onclick="showPage('syntax'); return false;">    Syntax</a> - Citation syntax reference
  </li>

  <li>
<a href="#modes" onclick="showPage('modes'); return false;">    Modes</a> - Mode-specific citation support
  </li>

</ul>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-metadata-transforms" class="page">

    <h1 id="metadata-transforms">
      Metadata Transforms
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#metadata-transforms">Metadata Transforms</a><ul><li><a href="#metadata-sources">Metadata Sources</a></li><li><a href="#basic-usage">Basic Usage</a></li><li><a href="#enabling-transforms">Enabling Transforms</a></li><li><a href="#case-transforms">Case Transforms</a><ul><li><a href="#upper">upper</a></li><li><a href="#lower">lower</a></li><li><a href="#title">title</a></li><li><a href="#capitalize">capitalize</a></li></ul></li><li><a href="#string-manipulation">String Manipulation</a><ul><li><a href="#trim">trim</a></li><li><a href="#slug-slugify">slug / slugify</a></li><li><a href="#replaceoldnew-replaceregexpatternreplacement">replace(OLD,NEW) / replace(regex:PATTERN,REPLACEMENT)</a></li><li><a href="#substringstartend-substrstartend">substring(START,END) / substr(START,END)</a></li><li><a href="#truncatelengthsuffix">truncate(LENGTH,SUFFIX)</a></li><li><a href="#reverse">reverse</a></li></ul></li><li><a href="#array-transforms">Array Transforms</a><ul><li><a href="#splitdelimiter">split(DELIMITER)</a></li><li><a href="#joindelimiter">join(DELIMITER)</a></li><li><a href="#first">first</a></li><li><a href="#last">last</a></li><li><a href="#slicestartlength">slice(START,LENGTH)</a></li></ul></li><li><a href="#utility-transforms">Utility Transforms</a><ul><li><a href="#defaultvalue">default(VALUE)</a></li><li><a href="#escape-htmlescape">escape / html_escape</a></li><li><a href="#basename">basename</a></li><li><a href="#urlencode">urlencode</a></li><li><a href="#urldecode">urldecode</a></li><li><a href="#prefixvalue">prefix(VALUE)</a></li><li><a href="#suffixvalue">suffix(VALUE)</a></li><li><a href="#removestring">remove(STRING)</a></li><li><a href="#repeatcount">repeat(COUNT)</a></li></ul></li><li><a href="#formatting-transforms">Formatting Transforms</a><ul><li><a href="#formatformatstring">format(FORMAT_STRING)</a></li><li><a href="#length">length</a></li><li><a href="#padwidthchar">pad(WIDTH,CHAR)</a></li><li><a href="#containsstring">contains(STRING)</a></li></ul></li><li><a href="#datetime-transforms">Date/Time Transforms</a><ul><li><a href="#strftimeformat">strftime(FORMAT)</a></li></ul></li><li><a href="#transform-chaining">Transform Chaining</a></li><li><a href="#notes">Notes</a></li></ul></li></ul></nav>

    <p>
      Metadata transforms allow you to modify metadata values using the <code>[%key:transform]</code> syntax. Transforms can be chained together, and many accept optional parameters.
    </p>

    <h2 id="metadata-sources">
      Metadata Sources
    </h2>

    <p>
      Metadata can come from three sources (merged in priority order):
    </p>

    <ol>

      <li>
<strong>        Command-line</strong>: <code>--meta KEY=VALUE</code> (highest priority)
      </li>

      <li>
<strong>        Document</strong>: Metadata embedded in the document (YAML, MMD, or Pandoc format)
      </li>

      <li>
<strong>        External file</strong>: <code>--meta-file FILE</code> (lowest priority)
      </li>

    </ol>

    <p>
      See <a href="#command-line-options" onclick="showPage('command-line-options'); return false;">Command Line Options</a> for details on <code>--meta-file</code> and <code>--meta</code> flags.
    </p>

    <h2 id="basic-usage">
      Basic Usage
    </h2>

    <p>
      The basic syntax is <code>[%key:transform]</code> where <code>key</code> is a metadata key and <code>transform</code> is one of the available transforms:
    </p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">hello world</span>
<span class="nn">---</span>

<span class="gh"># [%title:upper]</span>
<span class="c">&lt;!-- Outputs: # HELLO WORLD --&gt;</span>
</code></pre>

  <p>
    Transforms can be chained using colons:
  </p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">hello world</span>
<span class="nn">---</span>

<span class="gh"># [%title🐢split( ):first]</span>
<span class="c">&lt;!-- Outputs: # Hello --&gt;</span>
</code></pre>

<h2 id="enabling-transforms">
  Enabling Transforms
</h2>

<p>
  Metadata transforms are <strong>enabled by default in unified mode</strong>. For other modes, use the <code>--transforms</code> flag:
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--transforms</span>
</code></pre>

<p>
  To disable transforms (even in unified mode), use <code>--no-transforms</code>.
</p>

<h2 id="case-transforms">
  Case Transforms
</h2>

<h3 id="upper">
<code>upper</code>
</h3>

<p>
  Converts the value to uppercase.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">hello world</span>
<span class="nn">---</span>

[%title:upper]
<span class="c">&lt;!-- Outputs: HELLO WORLD --&gt;</span>
</code></pre>

<h3 id="lower">
<code>lower</code>
</h3>

<p>
  Converts the value to lowercase.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">HELLO WORLD</span>
<span class="nn">---</span>

[%title:lower]
<span class="c">&lt;!-- Outputs: hello world --&gt;</span>
</code></pre>

<h3 id="title">
<code>title</code>
</h3>

<p>
  Converts the value to title case (capitalizes first letter of each word).
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">hello world</span>
<span class="nn">---</span>

[%title:title]
<span class="c">&lt;!-- Outputs: Hello World --&gt;</span>
</code></pre>

<h3 id="capitalize">
<code>capitalize</code>
</h3>

<p>
  Capitalizes only the first letter of the value.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">hello world</span>
<span class="nn">---</span>

[%title:capitalize]
<span class="c">&lt;!-- Outputs: Hello world --&gt;</span>
</code></pre>

<h2 id="string-manipulation">
  String Manipulation
</h2>

<h3 id="trim">
<code>trim</code>
</h3>

<p>
  Removes leading and trailing whitespace.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="nv">  </span><span class="s">hello</span><span class="nv"> </span><span class="s">world</span><span class="nv">  </span><span class="s">"</span>
<span class="nn">---</span>

[%title:trim]
<span class="c">&lt;!-- Outputs: hello world --&gt;</span>
</code></pre>

<h3 id="slug-slugify">
<code>slug</code> / <code>slugify</code>
</h3>

<p>
  Converts the value to a URL-friendly slug (lowercase, spaces and special characters replaced with hyphens).
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">My Great Post!</span>
<span class="nn">---</span>

[%title:slug]
<span class="c">&lt;!-- Outputs: my-great-post --&gt;</span>
</code></pre>

<h3 id="replaceoldnew-replaceregexpatternreplacement">
<code>replace(OLD,NEW)</code> / <code>replace(regex:PATTERN,REPLACEMENT)</code>
</h3>

<p>
  Replaces occurrences of <code>OLD</code> with <code>NEW</code>. Supports both simple string replacement and regex patterns.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">url</span><span class="pi">:</span> <span class="s">http://example.com</span>
<span class="nn">---</span>

[%url:replace(http:,https:)]
<span class="c">&lt;!-- Outputs: https://example.com --&gt;</span>
</code></pre>

<p>
<strong>  Regex replacement:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">text</span><span class="pi">:</span> <span class="s">Hello 123 World</span>
<span class="nn">---</span>

[%text:replace(regex:[0-9]+,N)]
<span class="c">&lt;!-- Outputs: Hello N World --&gt;</span>
</code></pre>

<h3 id="substringstartend-substrstartend">
<code>substring(START,END)</code> / <code>substr(START,END)</code>
</h3>

<p>
  Extracts a substring. Supports negative indices (from end).
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Hello World</span>
<span class="nn">---</span>

[%title:substr(0,5)]
<span class="c">&lt;!-- Outputs: Hello --&gt;</span>

[%title:substr(-5)]
<span class="c">&lt;!-- Outputs: World (last 5 characters) --&gt;</span>
</code></pre>

<h3 id="truncatelengthsuffix">
<code>truncate(LENGTH,SUFFIX)</code>
</h3>

<p>
  Truncates the value to the specified length, optionally appending a suffix.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">This is a very long title</span>
<span class="nn">---</span>

[%title:truncate(15,...)]
<span class="c">&lt;!-- Outputs: This is a very... --&gt;</span>
</code></pre>

<h3 id="reverse">
<code>reverse</code>
</h3>

<p>
  Reverses the order of characters in the value.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">text</span><span class="pi">:</span> <span class="s">Hello</span>
<span class="nn">---</span>

[%text:reverse]
<span class="c">&lt;!-- Outputs: olleH --&gt;</span>
</code></pre>

<h2 id="array-transforms">
  Array Transforms
</h2>

<h3 id="splitdelimiter">
<code>split(DELIMITER)</code>
</h3>

<p>
  Splits a string into an array using the specified delimiter (default: space).
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">tags</span><span class="pi">:</span> <span class="s">tag1,tag2,tag3</span>
<span class="nn">---</span>

[%tags:split(,)]
<span class="c">&lt;!-- Outputs: tag1 (first element as representation) --&gt;</span>
<span class="c">&lt;!-- Use with :first, :last, :slice, or :join to work with the array --&gt;</span>
</code></pre>

<h3 id="joindelimiter">
<code>join(DELIMITER)</code>
</h3>

<p>
  Joins an array into a string using the specified delimiter.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">tags</span><span class="pi">:</span> <span class="s">tag1,tag2,tag3</span>
<span class="nn">---</span>

[%tags:split(,):join( | )]
<span class="c">&lt;!-- Outputs: tag1 | tag2 | tag3 --&gt;</span>
</code></pre>

<h3 id="first">
<code>first</code>
</h3>

<p>
  Returns the first element of an array.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">tags</span><span class="pi">:</span> <span class="s">tag1,tag2,tag3</span>
<span class="nn">---</span>

[%tags:split(,):first]
<span class="c">&lt;!-- Outputs: tag1 --&gt;</span>
</code></pre>

<h3 id="last">
<code>last</code>
</h3>

<p>
  Returns the last element of an array.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">tags</span><span class="pi">:</span> <span class="s">tag1,tag2,tag3</span>
<span class="nn">---</span>

[%tags:split(,):last]
<span class="c">&lt;!-- Outputs: tag3 --&gt;</span>
</code></pre>

<h3 id="slicestartlength">
<code>slice(START,LENGTH)</code>
</h3>

<p>
  Extracts a slice from an array. If applied to a non-array value, splits the string into individual characters.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">tags</span><span class="pi">:</span> <span class="s">tag1,tag2,tag3</span>
<span class="nn">---</span>

[%tags:split(,):slice(0,2):join(,)]
<span class="c">&lt;!-- Outputs: tag1,tag2 --&gt;</span>
<span class="p">
---</span>
<span class="gh">text: Hello
---
</span>
[%text:slice(0,5)]
<span class="c">&lt;!-- Outputs: Hello (characters 0-5) --&gt;</span>
</code></pre>

<h2 id="utility-transforms">
  Utility Transforms
</h2>

<h3 id="defaultvalue">
<code>default(VALUE)</code>
</h3>

<p>
  Returns the specified default value if the metadata value is empty.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">desc</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
<span class="nn">---</span>

[%desc:default(No description)]
<span class="c">&lt;!-- Outputs: No description --&gt;</span>
</code></pre>

<h3 id="escape-htmlescape">
<code>escape</code> / <code>html_escape</code>
</h3>

<p>
  Escapes HTML special characters (<code>&amp;</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&quot;</code>, <code>'</code>).
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">A &amp; B</span>
<span class="nn">---</span>

[%title:html_escape]
<span class="c">&lt;!-- Outputs: A &amp;amp; B --&gt;</span>
</code></pre>

<h3 id="basename">
<code>basename</code>
</h3>

<p>
  Extracts the filename from a path.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">image</span><span class="pi">:</span> <span class="s">/path/to/image.jpg</span>
<span class="nn">---</span>

[%image:basename]
<span class="c">&lt;!-- Outputs: image.jpg --&gt;</span>
</code></pre>

<h3 id="urlencode">
<code>urlencode</code>
</h3>

<p>
  URL-encodes the value.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">search</span><span class="pi">:</span> <span class="s">hello world</span>
<span class="nn">---</span>

[%search:urlencode]
<span class="c">&lt;!-- Outputs: hello%20world --&gt;</span>
</code></pre>

<h3 id="urldecode">
<code>urldecode</code>
</h3>

<p>
  URL-decodes the value.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">search</span><span class="pi">:</span> <span class="s">hello%20world</span>
<span class="nn">---</span>

[%search:urldecode]
<span class="c">&lt;!-- Outputs: hello world --&gt;</span>
</code></pre>

<h3 id="prefixvalue">
<code>prefix(VALUE)</code>
</h3>

<p>
  Adds a prefix to the value.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">url</span><span class="pi">:</span> <span class="s">example.com</span>
<span class="nn">---</span>

[%url:prefix(https://)]
<span class="c">&lt;!-- Outputs: https://example.com --&gt;</span>
</code></pre>

<h3 id="suffixvalue">
<code>suffix(VALUE)</code>
</h3>

<p>
  Adds a suffix to the value.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Hello</span>
<span class="nn">---</span>

[%title:suffix(!)]
<span class="c">&lt;!-- Outputs: Hello! --&gt;</span>
</code></pre>

<h3 id="removestring">
<code>remove(STRING)</code>
</h3>

<p>
  Removes all occurrences of the specified string.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Hello'World</span>
<span class="nn">---</span>

[%title:remove(')]
<span class="c">&lt;!-- Outputs: HelloWorld --&gt;</span>
</code></pre>

<h3 id="repeatcount">
<code>repeat(COUNT)</code>
</h3>

<p>
  Repeats the value the specified number of times.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">sep</span><span class="pi">:</span> <span class="s">-</span>
<span class="nn">---</span>

[%sep:repeat(3)]
<span class="c">&lt;!-- Outputs: --- --&gt;</span>
</code></pre>

<h2 id="formatting-transforms">
  Formatting Transforms
</h2>

<h3 id="formatformatstring">
<code>format(FORMAT_STRING)</code>
</h3>

<p>
  Formats a numeric value using <code>sprintf</code>-style formatting.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">price</span><span class="pi">:</span> <span class="m">42.5</span>
<span class="nn">---</span>

[%price:format($%.2f)]
<span class="c">&lt;!-- Outputs: $42.50 --&gt;</span>
</code></pre>

<h3 id="length">
<code>length</code>
</h3>

<p>
  Returns the length of the value as a string.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">text</span><span class="pi">:</span> <span class="s">Hello</span>
<span class="nn">---</span>

[%text:length]
<span class="c">&lt;!-- Outputs: 5 --&gt;</span>
</code></pre>

<h3 id="padwidthchar">
<code>pad(WIDTH,CHAR)</code>
</h3>

<p>
  Pads the value to the specified width with the specified character (default: space).
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">number</span><span class="pi">:</span> <span class="m">42</span>
<span class="nn">---</span>

[%number:pad(5,0)]
<span class="c">&lt;!-- Outputs: 00042 --&gt;</span>
</code></pre>

<h3 id="containsstring">
<code>contains(STRING)</code>
</h3>

<p>
  Returns <code>&quot;true&quot;</code> if the value contains the specified string, <code>&quot;false&quot;</code> otherwise.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">tags</span><span class="pi">:</span> <span class="s">javascript,html,css</span>
<span class="nn">---</span>

[%tags:contains(javascript)]
<span class="c">&lt;!-- Outputs: true --&gt;</span>
</code></pre>

<h2 id="datetime-transforms">
  Date/Time Transforms
</h2>

<h3 id="strftimeformat">
<code>strftime(FORMAT)</code>
</h3>

<p>
  Formats a date using <code>strftime</code>-style format strings. Parses dates in formats like <code>YYYY-MM-DD</code>, <code>YYYY-MM-DD HH:MM</code>, or <code>YYYY-MM-DD HHⓂ️SS</code>.
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2024-03-15</span>
<span class="nn">---</span>

[%date:strftime(%Y)]
<span class="c">&lt;!-- Outputs: 2024 --&gt;</span>

[%date:strftime(%B %d, %Y)]
<span class="c">&lt;!-- Outputs: March 15, 2024 --&gt;</span>
</code></pre>

<h2 id="transform-chaining">
  Transform Chaining
</h2>

<p>
  Multiple transforms can be chained together using colons. Each transform operates on the result of the previous transform:
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">hello world</span>
<span class="nn">---</span>

[%title🐢split( ):first]
&lt;!--
<span class="p">  1.</span> title -&gt; "Hello World"
<span class="p">  2.</span> split( ) -&gt; ["Hello", "World"] (array)
<span class="p">  3.</span> first -&gt; "Hello"
--&gt;
</code></pre>

<p>
<strong>  Example with dates:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2024-03-15 14:30</span>
<span class="nn">---</span>

[%date:strftime(%Y)]
<span class="c">&lt;!-- Outputs: 2024 --&gt;</span>
</code></pre>

<h2 id="notes">
  Notes
</h2>

<ul>

  <li>
    Transforms are case-sensitive
  </li>

  <li>
    Array transforms (<code>split</code>, <code>join</code>, <code>first</code>, <code>last</code>, <code>slice</code>) work together - use <code>split</code> to create an array, then apply other array transforms
  </li>

  <li>
    The <code>slice</code> transform automatically converts non-array strings into character arrays if needed
  </li>

  <li>
    Regex patterns in <code>replace</code> support POSIX Extended Regular Expressions and can include character classes like <code>[0-9]+</code>
  </li>

  <li>
    Date parsing supports common formats but may not handle all date string formats
  </li>

  <li>
    Unknown transforms are ignored and return the original value
  </li>

</ul>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-pandoc-integration" class="page">

    <h1 id="integrating-with-pandoc">
      Integrating with Pandoc
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#integrating-with-pandoc">Integrating with Pandoc</a><ul><li><a href="#converting-to-docx">Converting to DOCX</a></li><li><a href="#converting-to-pdf">Converting to PDF</a></li><li><a href="#including-a-css-stylesheet">Including a CSS Stylesheet</a><ul><li><a href="#linking-an-external-stylesheet">Linking an external stylesheet</a></li><li><a href="#embedding-css-into-the-html">Embedding CSS into the HTML</a></li></ul></li><li><a href="#using-metadata-and-title">Using Metadata and Title</a><ul><li><a href="#yaml-front-matter">YAML front matter</a></li><li><a href="#external-metadata-file">External metadata file</a></li><li><a href="#inline-cli-metadata">Inline CLI metadata</a></li></ul></li><li><a href="#other-useful-formats">Other Useful Formats</a></li></ul></li></ul></nav>

    <p>
      Apex focuses on producing high‑quality HTML. For richer publishing targets like DOCX, PDF, RTF, OPML, ODT, and more, you can combine Apex with <a href="https://pandoc.org">Pandoc</a> by piping Apex’s HTML output into Pandoc.
    </p>

    <p>
      The general pattern is:
    </p>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> | pandoc <span class="nt">-f</span> html <span class="nt">-t</span> FORMAT <span class="nt">-o</span> output.FILE
</code></pre>

  <ul>

    <li>
<code>--standalone</code> tells Apex to generate a full HTML5 document (<code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, <code>&lt;body&gt;</code>).
    </li>

    <li>
<code>-f html</code> tells Pandoc to read HTML.
    </li>

    <li>
<code>-t FORMAT</code> and <code>-o output.FILE</code> select Pandoc’s output format and destination file.
    </li>

  </ul>

  <p>
    Pandoc must be installed separately (<code>brew install pandoc</code> on macOS, or your platform’s package manager).
  </p>

<hr />
  <h2 id="converting-to-docx">
    Converting to DOCX
  </h2>

  <p>
    Use Pandoc’s DOCX writer to produce Word documents from Apex HTML output:
  </p>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="se">\</span>
  | pandoc <span class="nt">-f</span> html <span class="nt">-t</span> docx <span class="nt">-o</span> output.docx
</code></pre>

<p>
  You can also write the HTML to a file first:
</p>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="nt">-o</span> output.html
pandoc <span class="nt">-f</span> html <span class="nt">-t</span> docx output.html <span class="nt">-o</span> output.docx
</code></pre>

<p>
  To set the document title from Apex:
</p>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My Document"</span> <span class="se">\</span>
  | pandoc <span class="nt">-f</span> html <span class="nt">-t</span> docx <span class="nt">-o</span> output.docx
</code></pre>

<p>
  Pandoc will use the <code>&lt;title&gt;</code> element from the HTML when available.
</p>

<hr />
<h2 id="converting-to-pdf">
  Converting to PDF
</h2>

<p>
  You can generate PDFs by letting Pandoc handle the PDF engine (usually via LaTeX or a PDF HTML engine, depending on your Pandoc setup):
</p>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="se">\</span>
  | pandoc <span class="nt">-f</span> html <span class="nt">-t</span> pdf <span class="nt">-o</span> output.pdf
</code></pre>

<p>
  With an explicit title:
</p>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"My PDF Document"</span> <span class="se">\</span>
  | pandoc <span class="nt">-f</span> html <span class="nt">-t</span> pdf <span class="nt">-o</span> output.pdf
</code></pre>

<p>
  If you prefer an intermediate HTML file:
</p>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="nt">-o</span> output.html
pandoc <span class="nt">-f</span> html <span class="nt">-t</span> pdf output.html <span class="nt">-o</span> output.pdf
</code></pre>

<hr />
<h2 id="including-a-css-stylesheet">
  Including a CSS Stylesheet
</h2>

<p>
  Apex can link or embed a CSS stylesheet in the generated HTML. Pandoc will respect this styling when converting formats that support it (especially PDF via HTML engines, and some DOCX templates).
</p>

<h3 id="linking-an-external-stylesheet">
  Linking an external stylesheet
</h3>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="nt">--style</span> styles.css <span class="se">\</span>
  | pandoc <span class="nt">-f</span> html <span class="nt">-t</span> pdf <span class="nt">-o</span> output.pdf
</code></pre>

<p>
  This produces HTML with:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"styles.css"</span><span class="nt">&gt;</span>
</code></pre>

<p>
  Pandoc uses this when rendering HTML‑based outputs.
</p>

<h3 id="embedding-css-into-the-html">
  Embedding CSS into the HTML
</h3>

<p>
  To avoid external file dependencies, embed CSS directly:
</p>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="nt">--style</span> styles.css <span class="nt">--embed-css</span> <span class="se">\</span>
  | pandoc <span class="nt">-f</span> html <span class="nt">-t</span> pdf <span class="nt">-o</span> output.pdf
</code></pre>

<p>
  This inlines <code>styles.css</code> into a <code>&lt;style&gt;</code> block in the HTML <code>&lt;head&gt;</code>, which is convenient for sharing a single self‑contained document pipeline.
</p>

<hr />
<h2 id="using-metadata-and-title">
  Using Metadata and Title
</h2>

<p>
  Apex supports metadata via YAML front matter, external metadata files, and <code>--meta</code> CLI flags. This metadata can influence both Apex output and what Pandoc sees.
</p>

<h3 id="yaml-front-matter">
  YAML front matter
</h3>

<p>
  In your Markdown:
</p>

<pre><code class="highlight language-yaml"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">My Research Paper</span>
<span class="na">author</span><span class="pi">:</span> <span class="s">Jane Example</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2024-01-01</span>
<span class="nn">---</span>
</code></pre>

<p>
  Then:
</p>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="se">\</span>
  | pandoc <span class="nt">-f</span> html <span class="nt">-t</span> docx <span class="nt">-o</span> output.docx
</code></pre>

<p>
  Apex will turn this into appropriate HTML metadata (including <code>&lt;title&gt;</code>), which Pandoc can map into the target format’s title and author fields.
</p>

<h3 id="external-metadata-file">
  External metadata file
</h3>

<p>
  You can load shared metadata for multiple documents:
</p>

<pre><code class="highlight language-yaml"><span class="c1"># meta.yml</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Shared Title</span>
<span class="na">author</span><span class="pi">:</span> <span class="s">Team Apex</span>
</code></pre>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="nt">--meta-file</span> meta.yml <span class="se">\</span>
  | pandoc <span class="nt">-f</span> html <span class="nt">-t</span> pdf <span class="nt">-o</span> output.pdf
</code></pre>

<h3 id="inline-cli-metadata">
  Inline CLI metadata
</h3>

<p>
  You can set or override metadata from the command line:
</p>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="se">\</span>
  | pandoc <span class="nt">-f</span> html <span class="nt">-t</span> docx <span class="nt">-o</span> output.docx <span class="se">\</span>
      <span class="nt">--metadata</span><span class="o">=</span><span class="nv">author</span><span class="o">=</span><span class="s2">"Your Name"</span> <span class="se">\</span>
      <span class="nt">--metadata</span><span class="o">=</span><span class="nv">subject</span><span class="o">=</span><span class="s2">"Project Report"</span>
</code></pre>

<p>
  This lets you mix Apex’s metadata (front matter, <code>--meta-file</code>) with Pandoc’s own metadata flags.
</p>

<hr />
<h2 id="other-useful-formats">
  Other Useful Formats
</h2>

<p>
  The same pattern works for many other Pandoc targets:
</p>

<ul>

  <li>

    <p>
      RTF
    </p>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="se">\</span>
  | pandoc <span class="nt">-f</span> html <span class="nt">-t</span> rtf <span class="nt">-o</span> output.rtf
</code></pre>

</li>

<li>

  <p>
    OPML (outline)
  </p>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="se">\</span>
  | pandoc <span class="nt">-f</span> html <span class="nt">-t</span> opml <span class="nt">-o</span> output.opml
</code></pre>

</li>

<li>

  <p>
    ODT (LibreOffice/OpenOffice)
  </p>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="se">\</span>
  | pandoc <span class="nt">-f</span> html <span class="nt">-t</span> odt <span class="nt">-o</span> output.odt
</code></pre>

</li>

<li>

  <p>
    EPUB
  </p>

<pre><code class="highlight language-bash">apex input.md <span class="nt">--standalone</span> <span class="se">\</span>
  | pandoc <span class="nt">-f</span> html <span class="nt">-t</span> epub <span class="nt">-o</span> output.epub
</code></pre>

</li>

</ul>

<p>
  By combining Apex and Pandoc, you can keep Apex focused on Markdown parsing and HTML generation while Pandoc handles the heavy lifting for complex document formats.
</p>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-header-ids" class="page">

    <h1 id="header-ids">
      Header IDs
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#header-ids">Header IDs</a><ul><li><a href="#automatic-generation">Automatic Generation</a></li><li><a href="#id-formats">ID Formats</a><ul><li><a href="#gfm-format-default">GFM Format (Default)</a></li><li><a href="#multimarkdown-format">MultiMarkdown Format</a></li><li><a href="#kramdown-format">Kramdown Format</a></li></ul></li><li><a href="#setting-id-format">Setting ID Format</a><ul><li><a href="#by-mode">By Mode</a></li><li><a href="#override-in-unified-mode">Override in Unified Mode</a></li></ul></li><li><a href="#manual-header-ids">Manual Header IDs</a><ul><li><a href="#multimarkdown-syntax">MultiMarkdown Syntax</a></li><li><a href="#kramdown-syntax">Kramdown Syntax</a></li><li><a href="#inline-attribute-list-ial">Inline Attribute List (IAL)</a></li></ul></li><li><a href="#anchor-tags-vs-ids">Anchor Tags vs. IDs</a></li><li><a href="#examples">Examples</a><ul><li><a href="#gfm-format">GFM Format</a></li><li><a href="#multimarkdown-format">MultiMarkdown Format</a></li><li><a href="#kramdown-format">Kramdown Format</a></li></ul></li><li><a href="#linking-to-headers">Linking to Headers</a></li><li><a href="#table-of-contents">Table of Contents</a></li><li><a href="#related">Related</a></li></ul></li></ul></nav>

    <p>
      Apex automatically generates unique IDs for all headers, making it easy to link to specific sections. Different processor modes use different ID generation rules.
    </p>

    <h2 id="automatic-generation">
      Automatic Generation
    </h2>

    <p>
      By default, Apex generates header IDs automatically. You can disable this with <code>--no-ids</code>:
    </p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--no-ids</span>
</code></pre>

  <h2 id="id-formats">
    ID Formats
  </h2>

  <p>
    Apex supports three ID formats, each matching the behavior of different Markdown processors:
  </p>

  <h3 id="gfm-format-default">
    GFM Format (Default)
  </h3>

  <p>
    Used by default in unified and GFM modes. Matches GitHub’s header ID generation:
  </p>

  <p>
<strong>    Rules:</strong>
  </p>

  <ul>

    <li>
      Spaces become single dashes
    </li>

    <li>
      Em dashes (—) and en dashes (–) are removed
    </li>

    <li>
      Punctuation is removed
    </li>

    <li>
      Other whitespace is removed
    </li>

    <li>
      Diacritics are normalized to ASCII equivalents (é → e, ñ → n, etc.)
    </li>

    <li>
<strong>      Emojis are converted to their textual names</strong> (e.g., 😄 → “smile”, 🚀 → “rocket”)
    </li>

    <li>
      Leading and trailing dashes are trimmed
    </li>

    <li>
      Result is lowercased
    </li>

  </ul>

  <p>
<strong>    Examples:</strong>
  </p>

<pre><code class="highlight language-markdown"><span class="gh"># Emoji Support</span>
→ id="emoji-support"

<span class="gh"># 😄 Emoji Support</span>
→ id="smile-emoji-support"

<span class="gh"># 🚀</span>
→ id="rocket"

<span class="gh"># 👍 👎</span>
→ id="thumbsup-thumbsdown"

<span class="gh"># Hello—World</span>
→ id="helloworld"

<span class="gh"># C++ Programming</span>
→ id="c-programming"

<span class="gh"># Déjà Vu</span>
→ id="deja-vu"
</code></pre>

<p>
<strong>  Note:</strong> Emoji-to-name conversion matches Pandoc’s GFM behavior, ensuring emojis in headers are represented as readable text in IDs. This only applies to GFM format; MMD and Kramdown formats preserve emojis as-is or remove them according to their respective rules.
</p>

<h3 id="multimarkdown-format">
  MultiMarkdown Format
</h3>

<p>
  Used in MultiMarkdown mode. Preserves dashes and diacritics:
</p>

<p>
<strong>  Rules:</strong>
</p>

<ul>

  <li>
    Spaces are removed (not converted to dashes)
  </li>

  <li>
    All dash types (regular, em, en) are preserved
  </li>

  <li>
    Diacritics are preserved (UTF-8)
  </li>

  <li>
    Punctuation is removed
  </li>

  <li>
    Leading and trailing dashes are preserved
  </li>

  <li>
    Result is lowercased
  </li>

</ul>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Header—One</span>
→ id="header—one"

<span class="gh"># Hello World</span>
→ id="helloworld"

<span class="gh"># Déjà Vu</span>
→ id="déjà-vu"
</code></pre>

<h3 id="kramdown-format">
  Kramdown Format
</h3>

<p>
  Used in Kramdown mode. More aggressive punctuation handling:
</p>

<p>
<strong>  Rules:</strong>
</p>

<ul>

  <li>
    Spaces become single dashes (one dash per space)
  </li>

  <li>
    Em dashes (—) and en dashes (–) are removed
  </li>

  <li>
    Diacritics are removed (not normalized)
  </li>

  <li>
    Punctuation becomes dashes (except trailing punctuation is removed)
  </li>

  <li>
    If punctuation is followed by a space, the space is skipped
  </li>

  <li>
    Leading dashes are trimmed
  </li>

  <li>
    Trailing dashes are preserved
  </li>

  <li>
    Result is lowercased
  </li>

</ul>

<p>
<strong>  Examples:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Hello, World!</span>
→ id="hello-world"

<span class="gh"># C++ Programming</span>
→ id="c-programming"

<span class="gh"># Test (Example)</span>
→ id="test-example"
</code></pre>

<h2 id="setting-id-format">
  Setting ID Format
</h2>

<h3 id="by-mode">
  By Mode
</h3>

<p>
  Each mode automatically sets the appropriate ID format:
</p>

<ul>

  <li>
<code>--mode gfm</code> → GFM format
  </li>

  <li>
<code>--mode mmd</code> → MultiMarkdown format
  </li>

  <li>
<code>--mode kramdown</code> → Kramdown format
  </li>

  <li>
<code>--mode unified</code> → GFM format (default)
  </li>

</ul>

<h3 id="override-in-unified-mode">
  Override in Unified Mode
</h3>

<p>
  In unified mode, you can override the default GFM format:
</p>

<pre><code class="highlight language-bash"><span class="c"># Use MMD format in unified mode</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--id-format</span> mmd

<span class="c"># Use Kramdown format in unified mode</span>
apex document.md <span class="nt">--mode</span> unified <span class="nt">--id-format</span> kramdown
</code></pre>

<h2 id="manual-header-ids">
  Manual Header IDs
</h2>

<p>
  You can manually specify header IDs using several syntaxes:
</p>

<h3 id="multimarkdown-syntax">
  MultiMarkdown Syntax
</h3>

<pre><code class="highlight language-markdown"><span class="gu">### Heading 1 [heading1]</span>
</code></pre>

<h3 id="kramdown-syntax">
  Kramdown Syntax
</h3>

<pre><code class="highlight language-markdown"><span class="gu">### Heading 1 {#heading1}</span>
</code></pre>

<h3 id="inline-attribute-list-ial">
  Inline Attribute List (IAL)
</h3>

<pre><code class="highlight language-markdown"><span class="gu">### Heading 1 {: #heading1}</span>
</code></pre>

<p>
  Manual IDs take precedence over auto-generated IDs.
</p>

<h2 id="anchor-tags-vs-ids">
  Anchor Tags vs. IDs
</h2>

<p>
  By default, Apex adds <code>id</code> attributes directly to header elements:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"my-header"</span><span class="nt">&gt;</span>My Header<span class="nt">&lt;/h1&gt;</span>
</code></pre>

<p>
  You can generate <code>&lt;a&gt;</code> anchor tags instead:
</p>

<pre><code class="highlight language-bash">apex document.md <span class="nt">--header-anchors</span>
</code></pre>

<p>
  This produces:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;h1&gt;&lt;a</span> <span class="na">id=</span><span class="s">"my-header"</span> <span class="na">href=</span><span class="s">"#my-header"</span><span class="nt">&gt;</span>My Header<span class="nt">&lt;/a&gt;&lt;/h1&gt;</span>
</code></pre>

<p>
  This format is compatible with some Markdown processors that use anchor tags.
</p>

<h2 id="examples">
  Examples
</h2>

<h3 id="gfm-format">
  GFM Format
</h3>

<pre><code class="highlight language-markdown"><span class="gh"># Getting Started with Apex</span>
<span class="gh"># Advanced Features</span>
<span class="gh"># C++ Integration</span>
</code></pre>

<p>
  Becomes:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"getting-started-with-apex"</span><span class="nt">&gt;</span>Getting Started with Apex<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"advanced-features"</span><span class="nt">&gt;</span>Advanced Features<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"c-integration"</span><span class="nt">&gt;</span>C Integration<span class="nt">&lt;/h1&gt;</span>
</code></pre>

<h3 id="multimarkdown-format">
  MultiMarkdown Format
</h3>

<pre><code class="highlight language-markdown"><span class="gh"># Getting Started with Apex</span>
<span class="gh"># Advanced Features</span>
<span class="gh"># C++ Integration</span>
</code></pre>

<p>
  With <code>--id-format mmd</code>:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"gettingstartedwithapex"</span><span class="nt">&gt;</span>Getting Started with Apex<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"advancedfeatures"</span><span class="nt">&gt;</span>Advanced Features<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"cintegration"</span><span class="nt">&gt;</span>C Integration<span class="nt">&lt;/h1&gt;</span>
</code></pre>

<h3 id="kramdown-format">
  Kramdown Format
</h3>

<pre><code class="highlight language-markdown"><span class="gh"># Getting Started with Apex</span>
<span class="gh"># Advanced Features</span>
<span class="gh"># C++ Integration</span>
</code></pre>

<p>
  With <code>--id-format kramdown</code>:
</p>

<pre><code class="highlight language-html"><span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"getting-started-with-apex"</span><span class="nt">&gt;</span>Getting Started with Apex<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"advanced-features"</span><span class="nt">&gt;</span>Advanced Features<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"c-integration"</span><span class="nt">&gt;</span>C Integration<span class="nt">&lt;/h1&gt;</span>
</code></pre>

<h2 id="linking-to-headers">
  Linking to Headers
</h2>

<p>
  Once headers have IDs, you can link to them:
</p>

<pre><code class="highlight language-markdown"><span class="p">[</span><span class="nv">Link to section</span><span class="p">](</span><span class="sx">#getting-started-with-apex</span><span class="p">)</span>
</code></pre>

<p>
  Or with wiki links (requires <code>--wikilinks</code> flag):
</p>

<pre><code class="highlight language-markdown">[[Document#getting-started-with-apex]]
</code></pre>

<h2 id="table-of-contents">
  Table of Contents
</h2>

<p>
  Apex’s TOC generation automatically uses the same ID format as your headers. See <a href="#syntax" onclick="showPage('syntax'); return false;">Syntax</a> for TOC details.
</p>

<h2 id="related">
  Related
</h2>

<ul>

  <li>
<a href="#modes" onclick="showPage('modes'); return false;">    Modes</a> - How modes affect ID generation
  </li>

  <li>
<a href="#command-line-options" onclick="showPage('command-line-options'); return false;">    Command Line Options</a> - ID-related flags
  </li>

  <li>
<a href="#syntax" onclick="showPage('syntax'); return false;">    Syntax</a> - Manual ID syntax
  </li>

</ul>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-c-api" class="page">

    <h1 id="c-api">
      C API
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#c-api">C API</a><ul><li><a href="#overview">Overview</a></li><li><a href="#core-types">Core Types</a><ul><li><a href="#apexmodet">apex_mode_t</a></li><li><a href="#apexoptions">apex_options</a></li></ul></li><li><a href="#core-functions">Core Functions</a><ul><li><a href="#apexoptionsdefault">apex_options_default</a></li><li><a href="#apexoptionsformode">apex_options_for_mode</a></li><li><a href="#apexmarkdowntohtml">apex_markdown_to_html</a></li><li><a href="#apexfreestring">apex_free_string</a></li><li><a href="#apexwraphtmldocument">apex_wrap_html_document</a></li><li><a href="#apexprettyprinthtml">apex_pretty_print_html</a></li></ul></li><li><a href="#version-functions">Version Functions</a><ul><li><a href="#apexversionstring">apex_version_string</a></li><li><a href="#apexversionmajor-apexversionminor-apexversionpatch">apex_version_major / apex_version_minor / apex_version_patch</a></li></ul></li><li><a href="#list-options">List Options</a><ul><li><a href="#mixed-list-markers">Mixed List Markers</a></li><li><a href="#alpha-lists">Alpha Lists</a></li></ul></li><li><a href="#feature-flags">Feature Flags</a></li><li><a href="#metadata-options">Metadata Options</a></li><li><a href="#file-inclusion">File Inclusion</a></li><li><a href="#output-options">Output Options</a></li><li><a href="#line-break-options">Line Break Options</a></li><li><a href="#header-id-options">Header ID Options</a></li><li><a href="#table-options">Table Options</a></li><li><a href="#complete-example">Complete Example</a></li><li><a href="#compiling-and-linking">Compiling and Linking</a><ul><li><a href="#with-cmake">With CMake</a></li><li><a href="#manual-compilation">Manual Compilation</a></li><li><a href="#static-linking">Static Linking</a></li></ul></li><li><a href="#thread-safety">Thread Safety</a></li><li><a href="#memory-management">Memory Management</a></li><li><a href="#error-handling">Error Handling</a></li><li><a href="#performance-tips">Performance Tips</a></li><li><a href="#related">Related</a></li></ul></li></ul></nav>

    <p>
      Apex provides a simple C API for programmatic Markdown to HTML conversion.
    </p>

    <h2 id="overview">
      Overview
    </h2>

    <p>
      The Apex C API is thread-safe and designed for integration into C and C++ applications. All functions are declared in <code>apex/apex.h</code>.
    </p>

    <h2 id="core-types">
      Core Types
    </h2>

    <h3 id="apexmodet">
      apex_mode_t
    </h3>

    <p>
      Processor compatibility modes:
    </p>

<pre><code class="highlight language-c"><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
    <span class="n">APEX_MODE_COMMONMARK</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>      <span class="cm">/* Pure CommonMark spec */</span>
    <span class="n">APEX_MODE_GFM</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>              <span class="cm">/* GitHub Flavored Markdown */</span>
    <span class="n">APEX_MODE_MULTIMARKDOWN</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>    <span class="cm">/* MultiMarkdown compatibility */</span>
    <span class="n">APEX_MODE_KRAMDOWN</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>         <span class="cm">/* Kramdown compatibility */</span>
    <span class="n">APEX_MODE_UNIFIED</span> <span class="o">=</span> <span class="mi">4</span>           <span class="cm">/* All features enabled */</span>
<span class="p">}</span> <span class="n">apex_mode_t</span><span class="p">;</span>
</code></pre>

  <h3 id="apexoptions">
    apex_options
  </h3>

  <p>
    Configuration structure for processing:
  </p>

<pre><code class="highlight language-c"><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">apex_mode_t</span> <span class="n">mode</span><span class="p">;</span>

    <span class="cm">/* Feature flags */</span>
    <span class="n">bool</span> <span class="n">enable_tables</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_footnotes</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_definition_lists</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_smart_typography</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_math</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_critic_markup</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_wiki_links</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_task_lists</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_attributes</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_callouts</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_marked_extensions</span><span class="p">;</span>

    <span class="cm">/* Critic markup mode */</span>
    <span class="kt">int</span> <span class="n">critic_mode</span><span class="p">;</span>  <span class="cm">/* 0=accept, 1=reject, 2=markup (default) */</span>

    <span class="cm">/* Metadata handling */</span>
    <span class="n">bool</span> <span class="n">strip_metadata</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">enable_metadata_variables</span><span class="p">;</span>

    <span class="cm">/* File inclusion */</span>
    <span class="n">bool</span> <span class="n">enable_file_includes</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">max_include_depth</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">base_directory</span><span class="p">;</span>

    <span class="cm">/* Output options */</span>
    <span class="n">bool</span> <span class="n">unsafe</span><span class="p">;</span>  <span class="cm">/* Allow raw HTML */</span>
    <span class="n">bool</span> <span class="n">validate_utf8</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">github_pre_lang</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">standalone</span><span class="p">;</span>  <span class="cm">/* Generate complete HTML document */</span>
    <span class="n">bool</span> <span class="n">pretty</span><span class="p">;</span>      <span class="cm">/* Pretty-print HTML */</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">stylesheet_path</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">document_title</span><span class="p">;</span>

    <span class="cm">/* Line break handling */</span>
    <span class="n">bool</span> <span class="n">hardbreaks</span><span class="p">;</span>  <span class="cm">/* Treat newlines as hard breaks */</span>
    <span class="n">bool</span> <span class="n">nobreaks</span><span class="p">;</span>    <span class="cm">/* Render soft breaks as spaces */</span>

    <span class="cm">/* Header ID generation */</span>
    <span class="n">bool</span> <span class="n">generate_header_ids</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">header_anchors</span><span class="p">;</span>  <span class="cm">/* Generate &lt;a&gt; tags instead of id attributes */</span>
    <span class="kt">int</span> <span class="n">id_format</span><span class="p">;</span>  <span class="cm">/* 0=GFM, 1=MMD, 2=Kramdown */</span>

    <span class="cm">/* Table options */</span>
    <span class="n">bool</span> <span class="n">relaxed_tables</span><span class="p">;</span>

    <span class="cm">/* List options */</span>
    <span class="n">bool</span> <span class="n">allow_mixed_list_markers</span><span class="p">;</span>  <span class="cm">/* Allow mixed list markers at same level (inherit type from first item) */</span>
    <span class="n">bool</span> <span class="n">allow_alpha_lists</span><span class="p">;</span>  <span class="cm">/* Support alpha list markers (a., b., c. and A., B., C.) */</span>
<span class="p">}</span> <span class="n">apex_options</span><span class="p">;</span>
</code></pre>

<h2 id="core-functions">
  Core Functions
</h2>

<h3 id="apexoptionsdefault">
  apex_options_default
</h3>

<p>
  Get default options with all features enabled (unified mode).
</p>

<pre><code class="highlight language-c"><span class="n">apex_options</span> <span class="nf">apex_options_default</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Returns:</strong> Default options structure
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"><span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_default</span><span class="p">();</span>
<span class="n">opts</span><span class="p">.</span><span class="n">enable_math</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="n">opts</span><span class="p">.</span><span class="n">pretty</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</code></pre>

<h3 id="apexoptionsformode">
  apex_options_for_mode
</h3>

<p>
  Get options configured for a specific processor mode.
</p>

<pre><code class="highlight language-c"><span class="n">apex_options</span> <span class="nf">apex_options_for_mode</span><span class="p">(</span><span class="n">apex_mode_t</span> <span class="n">mode</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Parameters:</strong>
</p>

<ul>

  <li>
<code>mode</code> - Desired processor mode
  </li>

</ul>

<p>
<strong>  Returns:</strong> Options configured for the specified mode
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"><span class="n">apex_options</span> <span class="n">gfm_opts</span> <span class="o">=</span> <span class="n">apex_options_for_mode</span><span class="p">(</span><span class="n">APEX_MODE_GFM</span><span class="p">);</span>
<span class="n">apex_options</span> <span class="n">mmd_opts</span> <span class="o">=</span> <span class="n">apex_options_for_mode</span><span class="p">(</span><span class="n">APEX_MODE_MULTIMARKDOWN</span><span class="p">);</span>
</code></pre>

<h3 id="apexmarkdowntohtml">
  apex_markdown_to_html
</h3>

<p>
  Main conversion function - converts Markdown to HTML.
</p>

<pre><code class="highlight language-c"><span class="kt">char</span> <span class="o">*</span><span class="nf">apex_markdown_to_html</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">markdown</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">,</span>
                            <span class="k">const</span> <span class="n">apex_options</span> <span class="o">*</span><span class="n">options</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Parameters:</strong>
</p>

<ul>

  <li>
<code>markdown</code> - Input Markdown text (UTF-8)
  </li>

  <li>
<code>len</code> - Length of input text (use <code>strlen()</code> if null-terminated)
  </li>

  <li>
<code>options</code> - Processing options (NULL for defaults)
  </li>

</ul>

<p>
<strong>  Returns:</strong> Newly allocated HTML string (must be freed with <code>apex_free_string</code>), or NULL on error
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">markdown</span> <span class="o">=</span> <span class="s">"# Hello</span><span class="se">\n\n</span><span class="s">This is **bold**."</span><span class="p">;</span>
<span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_default</span><span class="p">();</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">markdown</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="n">html</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">html</span><span class="p">);</span>
    <span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<h3 id="apexfreestring">
  apex_free_string
</h3>

<p>
  Free a string allocated by Apex.
</p>

<pre><code class="highlight language-c"><span class="kt">void</span> <span class="nf">apex_free_string</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Parameters:</strong>
</p>

<ul>

  <li>
<code>str</code> - String to free (can be NULL, safe to call on NULL)
  </li>

</ul>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"><span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
 <span class="n">Use</span> <span class="n">html</span><span class="p">...</span>
<span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
</code></pre>

<h3 id="apexwraphtmldocument">
  apex_wrap_html_document
</h3>

<p>
  Wrap HTML content in a complete HTML5 document structure.
</p>

<pre><code class="highlight language-c"><span class="kt">char</span> <span class="o">*</span><span class="nf">apex_wrap_html_document</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">content</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">title</span><span class="p">,</span>
                              <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">stylesheet_path</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Parameters:</strong>
</p>

<ul>

  <li>
<code>content</code> - HTML content to wrap
  </li>

  <li>
<code>title</code> - Document title (NULL for default “Document”)
  </li>

  <li>
<code>stylesheet_path</code> - Path to CSS file to link (NULL for none)
  </li>

</ul>

<p>
<strong>  Returns:</strong> Newly allocated HTML document string (must be freed with <code>apex_free_string</code>)
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"><span class="kt">char</span> <span class="o">*</span><span class="n">fragment</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">document</span> <span class="o">=</span> <span class="n">apex_wrap_html_document</span><span class="p">(</span><span class="n">fragment</span><span class="p">,</span> <span class="s">"My Document"</span><span class="p">,</span> <span class="s">"style.css"</span><span class="p">);</span>
<span class="n">apex_free_string</span><span class="p">(</span><span class="n">fragment</span><span class="p">);</span>
 <span class="n">Use</span> <span class="n">document</span><span class="p">...</span>
<span class="n">apex_free_string</span><span class="p">(</span><span class="n">document</span><span class="p">);</span>
</code></pre>

<h3 id="apexprettyprinthtml">
  apex_pretty_print_html
</h3>

<p>
  Pretty-print HTML with proper indentation.
</p>

<pre><code class="highlight language-c"><span class="kt">char</span> <span class="o">*</span><span class="nf">apex_pretty_print_html</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">html</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Parameters:</strong>
</p>

<ul>

  <li>
<code>html</code> - HTML to format
  </li>

</ul>

<p>
<strong>  Returns:</strong> Newly allocated formatted HTML string (must be freed with <code>apex_free_string</code>)
</p>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"><span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">pretty</span> <span class="o">=</span> <span class="n">apex_pretty_print_html</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
<span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
 <span class="n">Use</span> <span class="n">pretty</span><span class="p">...</span>
<span class="n">apex_free_string</span><span class="p">(</span><span class="n">pretty</span><span class="p">);</span>
</code></pre>

<h2 id="version-functions">
  Version Functions
</h2>

<h3 id="apexversionstring">
  apex_version_string
</h3>

<p>
  Get version string.
</p>

<pre><code class="highlight language-c"><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">apex_version_string</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Returns:</strong> Version string (e.g., “0.1.0”)
</p>

<h3 id="apexversionmajor-apexversionminor-apexversionpatch">
  apex_version_major / apex_version_minor / apex_version_patch
</h3>

<p>
  Get individual version components.
</p>

<pre><code class="highlight language-c"><span class="kt">int</span> <span class="nf">apex_version_major</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">apex_version_minor</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">apex_version_patch</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</code></pre>

<p>
<strong>  Returns:</strong> Version component as integer
</p>

<h2 id="list-options">
  List Options
</h2>

<h3 id="mixed-list-markers">
  Mixed List Markers
</h3>

<p>
  When <code>allow_mixed_list_markers</code> is enabled, lists with different marker types at the same indentation level will inherit the type from the first item. This is enabled by default in <strong>MultiMarkdown</strong> and <strong>Unified</strong> modes.
</p>

<pre><code class="highlight language-c"><span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_for_mode</span><span class="p">(</span><span class="n">APEX_MODE_UNIFIED</span><span class="p">);</span>
 <span class="n">opts</span><span class="p">.</span><span class="n">allow_mixed_list_markers</span> <span class="n">is</span> <span class="nb">true</span> <span class="n">by</span> <span class="k">default</span>

 <span class="n">To</span> <span class="n">enable</span> <span class="n">in</span> <span class="n">other</span> <span class="n">modes</span><span class="o">:</span>
<span class="n">opts</span><span class="p">.</span><span class="n">allow_mixed_list_markers</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

 <span class="n">To</span> <span class="n">disable</span> <span class="n">in</span> <span class="n">unified</span><span class="o">/</span><span class="n">multimarkdown</span> <span class="n">modes</span><span class="o">:</span>
<span class="n">opts</span><span class="p">.</span><span class="n">allow_mixed_list_markers</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</code></pre>

<p>
<strong>  Example markdown:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="p">1.</span> First numbered item
<span class="p">*</span> Second item (becomes numbered)
<span class="p">*</span> Third item (becomes numbered)
</code></pre>

<h3 id="alpha-lists">
  Alpha Lists
</h3>

<p>
  When <code>allow_alpha_lists</code> is enabled, alphabetic markers (<code>a.</code>, <code>b.</code>, <code>c.</code> for lower-alpha and <code>A.</code>, <code>B.</code>, <code>C.</code> for upper-alpha) are converted to HTML lists with appropriate <code>list-style-type</code> CSS. This is enabled by default in <strong>Unified</strong> mode only.
</p>

<pre><code class="highlight language-c"><span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_for_mode</span><span class="p">(</span><span class="n">APEX_MODE_UNIFIED</span><span class="p">);</span>
 <span class="n">opts</span><span class="p">.</span><span class="n">allow_alpha_lists</span> <span class="n">is</span> <span class="nb">true</span> <span class="n">by</span> <span class="k">default</span>

 <span class="n">To</span> <span class="n">enable</span> <span class="n">in</span> <span class="n">other</span> <span class="n">modes</span><span class="o">:</span>
<span class="n">opts</span><span class="p">.</span><span class="n">allow_alpha_lists</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

 <span class="n">To</span> <span class="n">disable</span> <span class="n">in</span> <span class="n">unified</span> <span class="n">mode</span><span class="o">:</span>
<span class="n">opts</span><span class="p">.</span><span class="n">allow_alpha_lists</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</code></pre>

<p>
<strong>  Example markdown:</strong>
</p>

<pre><code class="highlight language-markdown">[apex-alpha-list:lower]
<span class="p">
1.</span>  First item
<span class="p">2.</span>  Second item
<span class="p">3.</span>  Third item
</code></pre>

<p>
  This produces HTML with <code>style=&quot;list-style-type: lower-alpha&quot;</code> on the <code>&lt;ol&gt;</code> tag.
</p>

<h2 id="feature-flags">
  Feature Flags
</h2>

<p>
  All feature flags control whether specific Markdown extensions are enabled:
</p>

<ul>

  <li>
<code>enable_tables</code> - GFM-style tables
  </li>

  <li>
<code>enable_footnotes</code> - Reference and inline footnotes
  </li>

  <li>
<code>enable_definition_lists</code> - Definition lists (term: definition)
  </li>

  <li>
<code>enable_smart_typography</code> - Smart quotes, dashes, ellipsis
  </li>

  <li>
<code>enable_math</code> - LaTeX math (inline <code>$...$</code> and display <code>$$...$$</code>)
  </li>

  <li>
<code>enable_critic_markup</code> - Critic Markup for change tracking
  </li>

  <li>
<code>enable_wiki_links</code> - <code>[[WikiLink]]</code> syntax
  </li>

  <li>
<code>enable_task_lists</code> - GFM task lists (<code>- [ ]</code> and <code>- [x]</code>)
  </li>

  <li>
<code>enable_attributes</code> - Inline Attribute Lists (IAL)
  </li>

  <li>
<code>enable_callouts</code> - Bear/Obsidian-style callouts
  </li>

  <li>
<code>enable_marked_extensions</code> - Marked app extensions (TOC, page breaks, etc.)
  </li>

</ul>

<p>
  These are typically enabled/disabled based on the selected mode, but can be overridden.
</p>

<h2 id="metadata-options">
  Metadata Options
</h2>

<ul>

  <li>
<code>strip_metadata</code> - Remove metadata from output (default: true)
  </li>

  <li>
<code>enable_metadata_variables</code> - Enable <code>[%key]</code> variable replacement (default: true in MMD/Kramdown/Unified modes)
  </li>

</ul>

<h2 id="file-inclusion">
  File Inclusion
</h2>

<ul>

  <li>
<code>enable_file_includes</code> - Enable file inclusion syntax (``, <code>{{file.md}}</code>, `/file.md`)
  </li>

  <li>
<code>max_include_depth</code> - Maximum nesting depth for includes (default: 10)
  </li>

  <li>
<code>base_directory</code> - Base directory for resolving relative include paths (NULL = current directory)
  </li>

</ul>

<h2 id="output-options">
  Output Options
</h2>

<ul>

  <li>
<code>unsafe</code> - Allow raw HTML in output (default: true)
  </li>

  <li>
<code>validate_utf8</code> - Validate UTF-8 encoding (default: true)
  </li>

  <li>
<code>github_pre_lang</code> - Use GitHub-style code block language format (default: true)
  </li>

  <li>
<code>standalone</code> - Generate complete HTML document with <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, <code>&lt;body&gt;</code> (default: false)
  </li>

  <li>
<code>pretty</code> - Pretty-print HTML with indentation (default: false)
  </li>

  <li>
<code>stylesheet_path</code> - Path to CSS file to link in <code>&lt;head&gt;</code> (requires <code>standalone</code>)
  </li>

  <li>
<code>document_title</code> - Title for HTML document (requires <code>standalone</code>)
  </li>

</ul>

<h2 id="line-break-options">
  Line Break Options
</h2>

<ul>

  <li>
<code>hardbreaks</code> - Treat newlines as hard breaks (<code>&lt;br&gt;</code>) like GFM (default: false, true in GFM mode)
  </li>

  <li>
<code>nobreaks</code> - Render soft breaks as spaces instead of newlines (default: false)
  </li>

</ul>

<h2 id="header-id-options">
  Header ID Options
</h2>

<ul>

  <li>
<code>generate_header_ids</code> - Automatically generate IDs for headers (default: true)
  </li>

  <li>
<code>header_anchors</code> - Generate <code>&lt;a&gt;</code> anchor tags instead of <code>id</code> attributes (default: false)
  </li>

  <li>
<code>id_format</code> - ID format: <code>0</code> = GFM (with dashes), <code>1</code> = MMD (no dashes), <code>2</code> = Kramdown
  </li>

</ul>

<h2 id="table-options">
  Table Options
</h2>

<ul>

  <li>
<code>relaxed_tables</code> - Support tables without separator rows (Kramdown-style, default: true in Unified/Kramdown modes)
  </li>

</ul>

<h2 id="complete-example">
  Complete Example
</h2>

<pre><code class="highlight language-c"><span class="cp">#include</span> <span class="cpf">&lt;apex/apex.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">markdown</span> <span class="o">=</span>
        <span class="s">"---</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"title: Test Document</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"author: John Doe</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"---</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"# [%title]</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"By [%author]</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"This has **bold** and a [[WikiLink]].</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"Math: $E = mc^2$</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"1. Mixed markers</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"* Second item</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"a. Alpha list</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"b. Second alpha</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="c1">// Use unified mode with all features</span>
    <span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_for_mode</span><span class="p">(</span><span class="n">APEX_MODE_UNIFIED</span><span class="p">);</span>
    <span class="c1">// Mixed markers and alpha lists are enabled by default in unified mode</span>
    <span class="n">opts</span><span class="p">.</span><span class="n">pretty</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="n">opts</span><span class="p">.</span><span class="n">standalone</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="n">opts</span><span class="p">.</span><span class="n">document_title</span> <span class="o">=</span> <span class="s">"Test Document"</span><span class="p">;</span>

    <span class="c1">// Convert to HTML</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">markdown</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">html</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">html</span><span class="p">);</span>
        <span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"Conversion failed</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<h2 id="compiling-and-linking">
  Compiling and Linking
</h2>

<h3 id="with-cmake">
  With CMake
</h3>

<pre><code class="highlight language-cmake"><span class="c1"># In your CMakeLists.txt</span>
<span class="nb">find_package</span><span class="p">(</span>apex REQUIRED<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>your_app apex<span class="p">)</span>
</code></pre>

<h3 id="manual-compilation">
  Manual Compilation
</h3>

<pre><code class="highlight language-bash"><span class="c"># Compile</span>
gcc <span class="nt">-c</span> <span class="nt">-I</span>/usr/local/include your_app.c

<span class="c"># Link</span>
gcc your_app.o <span class="nt">-L</span>/usr/local/lib <span class="nt">-lapex</span> <span class="nt">-o</span> your_app

<span class="c"># Run (may need library path)</span>
<span class="nv">DYLD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/lib ./your_app  <span class="c"># macOS</span>
<span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/lib ./your_app    <span class="c"># Linux</span>
</code></pre>

<h3 id="static-linking">
  Static Linking
</h3>

<pre><code class="highlight language-bash">gcc your_app.c <span class="nt">-I</span>/usr/local/include <span class="nt">-L</span>/usr/local/lib <span class="nt">-lapex</span> <span class="nt">-static</span> <span class="nt">-o</span> your_app
</code></pre>

<h2 id="thread-safety">
  Thread Safety
</h2>

<p>
  Apex is thread-safe as long as:
</p>

<ol>

  <li>
    Each thread uses its own <code>apex_options</code> structure
  </li>

  <li>
    Document nodes are not shared between threads
  </li>

  <li>
    The conversion function can be called from multiple threads simultaneously
  </li>

</ol>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"> <span class="n">Thread</span><span class="o">-</span><span class="n">safe</span><span class="o">:</span> <span class="n">each</span> <span class="kr">thread</span> <span class="n">has</span> <span class="n">its</span> <span class="n">own</span> <span class="n">options</span>
<span class="kt">void</span> <span class="o">*</span><span class="nf">thread_func</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_default</span><span class="p">();</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>
    <span class="c1">// Use html...</span>
    <span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

<h2 id="memory-management">
  Memory Management
</h2>

<ul>

  <li>
    All strings returned by Apex must be freed with <code>apex_free_string()</code>
  </li>

  <li>
<code>apex_options</code> structures are typically stack-allocated (no freeing needed)
  </li>

  <li>
    Safe to call <code>apex_free_string(NULL)</code>
  </li>

  <li>
    Always check return values before use
  </li>

</ul>

<h2 id="error-handling">
  Error Handling
</h2>

<ul>

  <li>
    Functions return <code>NULL</code> or empty strings on error
  </li>

  <li>
    Check return values before use
  </li>

  <li>
    Errors are generally due to:
    <ul>

      <li>
        Memory allocation failures
      </li>

      <li>
        Invalid input
      </li>

      <li>
        Missing dependencies
      </li>

    </ul>

  </li>

</ul>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"><span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">html</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"Conversion failed</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
 <span class="n">Use</span> <span class="n">html</span><span class="p">...</span>
<span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
</code></pre>

<h2 id="performance-tips">
  Performance Tips
</h2>

<ol>

  <li>
<strong>    Reuse options</strong>: Create <code>apex_options</code> once and reuse for multiple conversions
  </li>

  <li>
<strong>    Provide accurate length</strong>: Avoid unnecessary <code>strlen()</code> calls
  </li>

  <li>
<strong>    Disable unused features</strong>: Turn off extensions you don’t need
  </li>

  <li>
<strong>    Batch processing</strong>: Process multiple documents in parallel (thread-safe)
  </li>

</ol>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-c"> <span class="nl">Good:</span> <span class="n">reuse</span> <span class="n">options</span>
<span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_default</span><span class="p">();</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">count</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">docs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">lens</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>
    <span class="c1">// Process...</span>
    <span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<h2 id="related">
  Related
</h2>

<ul>

  <li>
<a href="#xcode-integration" onclick="showPage('xcode-integration'); return false;">    Xcode Integration</a> - Using Apex in Xcode projects
  </li>

  <li>
<a href="#modes" onclick="showPage('modes'); return false;">    Modes</a> - Understanding processor modes
  </li>

  <li>
<a href="#header-ids" onclick="showPage('header-ids'); return false;">    Header IDs</a> - Header ID generation options
  </li>

</ul>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-xcode-integration" class="page">

    <h1 id="xcode-integration">
      Xcode Integration
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#xcode-integration">Xcode Integration</a><ul><li><a href="#production-readiness">Production Readiness</a></li><li><a href="#swift-package-manager-spm-recommended">Swift Package Manager (SPM) - Recommended</a><ul><li><a href="#adding-apex-via-spm">Adding Apex via SPM</a></li><li><a href="#using-apex-in-your-code">Using Apex in Your Code</a></li><li><a href="#platform-support">Platform Support</a></li><li><a href="#spm-benefits">SPM Benefits</a></li></ul></li><li><a href="#framework-build-alternative">Framework Build (Alternative)</a></li><li><a href="#adding-to-xcode-project">Adding to Xcode Project</a><ul><li><a href="#method-1-swift-package-manager-recommended">Method 1: Swift Package Manager (Recommended)</a></li><li><a href="#method-2-framework-reference">Method 2: Framework Reference</a></li><li><a href="#method-3-cmake-integration">Method 3: CMake Integration</a></li></ul></li><li><a href="#objective-c-wrapper">Objective-C Wrapper</a><ul><li><a href="#basic-usage">Basic Usage</a></li><li><a href="#api">API</a></li><li><a href="#convenience-methods">Convenience Methods</a><ul><li><a href="#standalone-html-documents">Standalone HTML Documents</a></li><li><a href="#pretty-printed-html">Pretty-Printed HTML</a></li><li><a href="#dictionary-based-options">Dictionary-Based Options</a></li><li><a href="#swift-friendly-convenience-method">Swift-Friendly Convenience Method</a></li><li><a href="#instance-methods">Instance Methods</a></li></ul></li></ul></li><li><a href="#mode-constants">Mode Constants</a></li><li><a href="#direct-c-api-usage">Direct C API Usage</a></li><li><a href="#integration-example">Integration Example</a><ul><li><a href="#adding-to-marked">Adding to Marked</a></li></ul></li><li><a href="#build-settings">Build Settings</a><ul><li><a href="#header-search-paths">Header Search Paths</a></li><li><a href="#framework-search-paths">Framework Search Paths</a></li><li><a href="#other-linker-flags">Other Linker Flags</a></li><li><a href="#swift-api-support">Swift API Support</a></li></ul></li><li><a href="#swift-integration">Swift Integration</a><ul><li><a href="#idiomatic-swift-api-recommended">Idiomatic Swift API (Recommended)</a></li><li><a href="#apexmode-enum">ApexMode Enum</a></li><li><a href="#apexoptions-struct">ApexOptions Struct</a></li><li><a href="#objective-c-bridge-alternative">Objective-C Bridge (Alternative)</a></li></ul></li><li><a href="#troubleshooting">Troubleshooting</a><ul><li><a href="#swift-package-manager-issues">Swift Package Manager Issues</a></li><li><a href="#framework-not-found">Framework Not Found</a></li><li><a href="#linker-errors">Linker Errors</a></li><li><a href="#runtime-errors">Runtime Errors</a></li></ul></li><li><a href="#performance">Performance</a></li><li><a href="#module-map">Module Map</a></li><li><a href="#comparison-of-integration-methods">Comparison of Integration Methods</a></li><li><a href="#related">Related</a></li></ul></li></ul></nav>

    <p>
      This guide covers integrating Apex into Xcode projects for macOS and iOS applications.
    </p>

    <h2 id="production-readiness">
      Production Readiness
    </h2>

    <p>
<strong>      Important:</strong> Apex is currently in a pre-1.0 development stage. The API and implementation are still evolving, and breaking changes may occur between versions. Apex should only be used for testing and development purposes at this time.
    </p>

    <p>
      Once Apex reaches version 1.0, the project will follow <a href="https://semver.org/">Semantic Versioning</a>. This means:
    </p>

    <ul>

      <li>
<strong>        Major versions</strong> (1.0, 2.0, etc.) may include breaking API changes
      </li>

      <li>
<strong>        Minor versions</strong> (1.1, 1.2, etc.) will add new features while maintaining backward compatibility
      </li>

      <li>
<strong>        Patch versions</strong> (1.0.1, 1.0.2, etc.) will only include bug fixes and will maintain full backward compatibility
      </li>

    </ul>

    <p>
      For production use, please wait for the stable 1.0 release. Until then, please report any issues or provide feedback to help shape the final API.
    </p>

    <h2 id="swift-package-manager-spm-recommended">
      Swift Package Manager (SPM) - Recommended
    </h2>

    <p>
      The easiest way to integrate Apex into your Xcode project is using Swift Package Manager.
    </p>

    <h3 id="adding-apex-via-spm">
      Adding Apex via SPM
    </h3>

    <ol>

      <li>
        In Xcode, select your project in the navigator
      </li>

      <li>
        Select your target
      </li>

      <li>
        Go to the “Package Dependencies” tab
      </li>

      <li>
        Click the “+” button
      </li>

      <li>
        Enter the repository URL: <code>https://github.com/ApexMarkdown/apex</code>
      </li>

      <li>
        Select the version or branch you want to use
      </li>

      <li>
        Click “Add Package”
      </li>

      <li>
        Select the “Apex” library product
      </li>

      <li>
        Click “Add Package”
      </li>

    </ol>

    <h3 id="using-apex-in-your-code">
      Using Apex in Your Code
    </h3>

    <p>
      Once added via SPM, simply import and use:
    </p>

<pre><code class="highlight language-swift"><span class="kd">import</span> <span class="kt">Apex</span>

 <span class="kt">Basic</span> <span class="n">usage</span>
<span class="k">let</span> <span class="nv">markdown</span> <span class="o">=</span> <span class="s">"# Hello World"</span>
<span class="k">let</span> <span class="nv">html</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="nf">apexHTML</span><span class="p">()</span>

 <span class="kt">With</span> <span class="n">mode</span>
<span class="k">let</span> <span class="nv">html2</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="nf">apexHTML</span><span class="p">(</span><span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="n">gfm</span><span class="p">)</span>

 <span class="kt">With</span> <span class="n">options</span>
<span class="k">var</span> <span class="nv">options</span> <span class="o">=</span> <span class="kt">ApexOptions</span><span class="p">()</span>
<span class="n">options</span><span class="o">.</span><span class="n">pretty</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">options</span><span class="o">.</span><span class="n">generateHeaderIDs</span> <span class="o">=</span> <span class="kc">true</span>
<span class="k">let</span> <span class="nv">html3</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="nf">apexHTML</span><span class="p">(</span><span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="n">unified</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="n">options</span><span class="p">)</span>
</code></pre>

  <h3 id="platform-support">
    Platform Support
  </h3>

  <ul>

    <li>
<strong>      macOS</strong>: 10.13+ (High Sierra)
    </li>

    <li>
<strong>      iOS</strong>: 11.0+
    </li>

  </ul>

  <h3 id="spm-benefits">
    SPM Benefits
  </h3>

  <ul>

    <li>
      Automatic dependency management
    </li>

    <li>
      No manual framework embedding
    </li>

    <li>
      Works with both macOS and iOS
    </li>

    <li>
      Easy version updates
    </li>

    <li>
      Integrated with Xcode’s build system
    </li>

  </ul>

  <h2 id="framework-build-alternative">
    Framework Build (Alternative)
  </h2>

  <p>
    Apex can also be built as a framework for manual integration:
  </p>

<pre><code class="highlight language-bash"><span class="nb">cd </span>apex
<span class="nb">mkdir </span>build <span class="o">&amp;&amp;</span> <span class="nb">cd </span>build
cmake <span class="nt">-DBUILD_FRAMEWORK</span><span class="o">=</span>ON ..
make
</code></pre>

<p>
  The framework will be at <code>build/Apex.framework</code>.
</p>

<h2 id="adding-to-xcode-project">
  Adding to Xcode Project
</h2>

<h3 id="method-1-swift-package-manager-recommended">
  Method 1: Swift Package Manager (Recommended)
</h3>

<p>
  See the SPM section above for the easiest integration method.
</p>

<h3 id="method-2-framework-reference">
  Method 2: Framework Reference
</h3>

<ol>

  <li>
    Drag <code>Apex.framework</code> into your Xcode project
  </li>

  <li>
    Add to “Frameworks, Libraries, and Embedded Content”
  </li>

  <li>
    Set “Embed &amp; Sign” for the framework
  </li>

</ol>

<h3 id="method-3-cmake-integration">
  Method 3: CMake Integration
</h3>

<p>
  If your project uses CMake:
</p>

<pre><code class="highlight language-cmake"><span class="nb">add_subdirectory</span><span class="p">(</span>apex<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>your_app Apex<span class="p">)</span>
</code></pre>

<h2 id="objective-c-wrapper">
  Objective-C Wrapper
</h2>

<p>
  Apex includes an Objective-C wrapper for easy integration:
</p>

<p>
<strong>  Files:</strong>
</p>

<ul>

  <li>
<code>apex/objc/NSString+Apex.h</code>
  </li>

  <li>
<code>apex/objc/NSString+Apex.m</code>
  </li>

</ul>

<h3 id="basic-usage">
  Basic Usage
</h3>

<pre><code class="highlight language-objective-c"><span class="cp">#import "NSString+Apex.h"
</span>
 <span class="n">Convert</span> <span class="n">with</span> <span class="k">default</span> <span class="n">unified</span> <span class="n">mode</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdownText</span><span class="p">];</span>

 <span class="n">Convert</span> <span class="n">with</span> <span class="n">specific</span> <span class="n">mode</span> <span class="n">using</span> <span class="n">constants</span> <span class="p">(</span><span class="n">recommended</span><span class="p">)</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">gfmHtml</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdownText</span> <span class="nf">mode</span><span class="p">:</span><span class="n">ApexModeGFM</span><span class="p">];</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">mmdHtml</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdownText</span> <span class="nf">mode</span><span class="p">:</span><span class="n">ApexModeMultiMarkdown</span><span class="p">];</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">kramdownHtml</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdownText</span> <span class="nf">mode</span><span class="p">:</span><span class="n">ApexModeKramdown</span><span class="p">];</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">commonmarkHtml</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdownText</span> <span class="nf">mode</span><span class="p">:</span><span class="n">ApexModeCommonmark</span><span class="p">];</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">unifiedHtml</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdownText</span> <span class="nf">mode</span><span class="p">:</span><span class="n">ApexModeUnified</span><span class="p">];</span>

 <span class="n">String</span> <span class="n">literals</span> <span class="n">also</span> <span class="n">work</span> <span class="p">(</span><span class="k">for</span> <span class="n">backward</span> <span class="n">compatibility</span><span class="p">)</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">gfmHtml2</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdownText</span> <span class="nf">mode</span><span class="p">:</span><span class="s">@"gfm"</span><span class="p">];</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">mmdHtml2</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdownText</span> <span class="nf">mode</span><span class="p">:</span><span class="s">@"multimarkdown"</span><span class="p">];</span>
</code></pre>

<h3 id="api">
  API
</h3>

<pre><code class="highlight language-objective-c"> <span class="n">Mode</span> <span class="n">constants</span>
<span class="k">extern</span> <span class="n">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">ApexModeCommonmark</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">ApexModeGFM</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">ApexModeMultiMarkdown</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">ApexModeKramdown</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">ApexModeUnified</span><span class="p">;</span>

<span class="k">@interface</span> <span class="nc">NSString</span> <span class="p">(</span><span class="nl">Apex</span><span class="p">)</span>

 <span class="n">Basic</span> <span class="n">conversion</span> <span class="n">methods</span>
<span class="k">+</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">convertWithApex</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">markdown</span><span class="p">;</span>
<span class="k">+</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">convertWithApex</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">markdown</span> <span class="nf">mode</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">mode</span><span class="p">;</span>

 <span class="n">Standalone</span> <span class="n">HTML</span> <span class="n">document</span> <span class="n">generation</span>
<span class="k">+</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">convertWithApex</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">markdown</span>
                         <span class="nf">mode</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">mode</span>
                   <span class="nf">standalone</span><span class="p">:(</span><span class="n">BOOL</span><span class="p">)</span><span class="nv">standalone</span>
                    <span class="nf">stylesheet</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span> <span class="n">_Nullable</span><span class="p">)</span><span class="nv">stylesheetPath</span>
                         <span class="nf">title</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span> <span class="n">_Nullable</span><span class="p">)</span><span class="nv">title</span><span class="p">;</span>

 <span class="n">Pretty</span><span class="k">-</span><span class="n">printed</span> <span class="n">HTML</span> <span class="n">output</span>
<span class="k">+</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">convertWithApex</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">markdown</span>
                         <span class="nf">mode</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">mode</span>
                        <span class="nf">pretty</span><span class="p">:(</span><span class="n">BOOL</span><span class="p">)</span><span class="nv">pretty</span><span class="p">;</span>

 <span class="n">Dictionary</span><span class="k">-</span><span class="n">based</span> <span class="n">options</span> <span class="n">configuration</span>
<span class="k">+</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">convertWithApex</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">markdown</span>
                         <span class="nf">mode</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">mode</span>
                    <span class="nf">options</span><span class="p">:(</span><span class="n">NSDictionary</span><span class="o">&lt;</span><span class="n">NSString</span> <span class="o">*</span><span class="p">,</span> <span class="n">id</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">_Nullable</span><span class="p">)</span><span class="nv">options</span><span class="p">;</span>

 <span class="n">Swift</span><span class="k">-</span><span class="n">friendly</span> <span class="n">convenience</span> <span class="n">method</span> <span class="n">with</span> <span class="n">common</span> <span class="n">options</span>
<span class="k">+</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">convertWithApex</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">markdown</span>
                         <span class="nf">mode</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">mode</span>
              <span class="nf">generateHeaderIDs</span><span class="p">:(</span><span class="n">BOOL</span><span class="p">)</span><span class="nv">generateHeaderIDs</span>
                    <span class="nf">hardBreaks</span><span class="p">:(</span><span class="n">BOOL</span><span class="p">)</span><span class="nv">hardBreaks</span>
                        <span class="nf">pretty</span><span class="p">:(</span><span class="n">BOOL</span><span class="p">)</span><span class="nv">pretty</span><span class="p">;</span>

 <span class="n">Instance</span> <span class="n">methods</span> <span class="k">for</span> <span class="n">convenient</span> <span class="n">usage</span>
<span class="k">-</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">apexHTML</span><span class="p">;</span>
<span class="k">-</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">apexHTMLWithMode</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">mode</span><span class="p">;</span>

<span class="k">@end</span>
</code></pre>

<p>
<strong>  Parameters:</strong>
</p>

<ul>

  <li>
<code>markdown</code> - Input Markdown text
  </li>

  <li>
<code>mode</code> - Processor mode: Use <code>ApexMode*</code> constants (recommended) or string literals:
    <ul>

      <li>
<code>ApexModeCommonmark</code> or <code>@&quot;commonmark&quot;</code> - Pure CommonMark specification
      </li>

      <li>
<code>ApexModeGFM</code> or <code>@&quot;gfm&quot;</code> - GitHub Flavored Markdown
      </li>

      <li>
<code>ApexModeMultiMarkdown</code> or <code>@&quot;multimarkdown&quot;</code> / <code>@&quot;mmd&quot;</code> - MultiMarkdown compatibility
      </li>

      <li>
<code>ApexModeKramdown</code> or <code>@&quot;kramdown&quot;</code> - Kramdown compatibility
      </li>

      <li>
<code>ApexModeUnified</code> or <code>@&quot;unified&quot;</code> - All features enabled (default)
      </li>

    </ul>

  </li>

</ul>

<p>
<strong>  Returns:</strong> HTML string (autoreleased)
</p>

<p>
<strong>  Note:</strong> Using the <code>ApexMode*</code> constants is recommended to avoid typos and provides autocomplete support in Xcode. String literals are still supported for backward compatibility.
</p>

<h3 id="convenience-methods">
  Convenience Methods
</h3>

<p>
  Apex provides additional convenience methods for common use cases:
</p>

<h4 id="standalone-html-documents">
  Standalone HTML Documents
</h4>

<p>
  Generate complete HTML5 documents with stylesheet and title:
</p>

<pre><code class="highlight language-objective-c"> <span class="n">Generate</span> <span class="n">standalone</span> <span class="n">HTML</span> <span class="n">document</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdown</span>
                                     <span class="nl">mode:</span><span class="n">ApexModeUnified</span>
                               <span class="nl">standalone:</span><span class="nb">YES</span>
                                <span class="nl">stylesheet:</span><span class="s">@"style.css"</span>
                                     <span class="nl">title:</span><span class="s">@"My Document"</span><span class="p">];</span>

 <span class="n">Without</span> <span class="n">stylesheet</span> <span class="n">or</span> <span class="n">title</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">html2</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdown</span>
                                       <span class="nl">mode:</span><span class="n">ApexModeGFM</span>
                                 <span class="nl">standalone:</span><span class="nb">YES</span>
                                  <span class="nl">stylesheet:</span><span class="nb">nil</span>
                                       <span class="nl">title:</span><span class="nb">nil</span><span class="p">];</span>
</code></pre>

<h4 id="pretty-printed-html">
  Pretty-Printed HTML
</h4>

<p>
  Generate formatted HTML with indentation:
</p>

<pre><code class="highlight language-objective-c"> <span class="n">Pretty</span><span class="k">-</span><span class="n">print</span> <span class="n">HTML</span> <span class="n">output</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdown</span>
                                     <span class="nl">mode:</span><span class="n">ApexModeUnified</span>
                                    <span class="nl">pretty:</span><span class="nb">YES</span><span class="p">];</span>
</code></pre>

<h4 id="dictionary-based-options">
  Dictionary-Based Options
</h4>

<p>
  Configure multiple options at once using a dictionary:
</p>

<pre><code class="highlight language-objective-c"> <span class="n">Configure</span> <span class="n">multiple</span> <span class="n">options</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">options</span> <span class="o">=</span> <span class="p">@{</span>
    <span class="s">@"pretty"</span><span class="o">:</span> <span class="nb">@YES</span><span class="p">,</span>
    <span class="s">@"standalone"</span><span class="o">:</span> <span class="nb">@YES</span><span class="p">,</span>
    <span class="s">@"stylesheet"</span><span class="o">:</span> <span class="s">@"style.css"</span><span class="p">,</span>
    <span class="s">@"title"</span><span class="o">:</span> <span class="s">@"My Document"</span><span class="p">,</span>
    <span class="s">@"hardBreaks"</span><span class="o">:</span> <span class="nb">@YES</span><span class="p">,</span>
    <span class="s">@"generateHeaderIDs"</span><span class="o">:</span> <span class="nb">@YES</span><span class="p">,</span>
    <span class="s">@"headerAnchors"</span><span class="o">:</span> <span class="nb">@NO</span><span class="p">,</span>
    <span class="s">@"obfuscateEmails"</span><span class="o">:</span> <span class="nb">@YES</span><span class="p">,</span>
    <span class="s">@"embedImages"</span><span class="o">:</span> <span class="nb">@NO</span>
<span class="p">};</span>

<span class="n">NSString</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdown</span>
                                     <span class="nl">mode:</span><span class="n">ApexModeUnified</span>
                                   <span class="nl">options:</span><span class="n">options</span><span class="p">];</span>
</code></pre>

<p>
<strong>  Supported dictionary keys:</strong>
</p>

<ul>

  <li>
<code>@&quot;pretty&quot;</code> - NSNumber (BOOL): Pretty-print HTML with indentation
  </li>

  <li>
<code>@&quot;standalone&quot;</code> - NSNumber (BOOL): Generate complete HTML5 document
  </li>

  <li>
<code>@&quot;stylesheet&quot;</code> - NSString: Path to CSS file to link in document head
  </li>

  <li>
<code>@&quot;title&quot;</code> - NSString: Document title
  </li>

  <li>
<code>@&quot;hardBreaks&quot;</code> - NSNumber (BOOL): Treat newlines as hard breaks
  </li>

  <li>
<code>@&quot;generateHeaderIDs&quot;</code> - NSNumber (BOOL): Generate IDs for headers
  </li>

  <li>
<code>@&quot;unsafe&quot;</code> - NSNumber (BOOL): Allow raw HTML in output
  </li>

  <li>
<code>@&quot;headerAnchors&quot;</code> - NSNumber (BOOL): Generate anchor tags instead of header IDs
  </li>

  <li>
<code>@&quot;obfuscateEmails&quot;</code> - NSNumber (BOOL): Obfuscate email links using HTML entities
  </li>

  <li>
<code>@&quot;embedImages&quot;</code> - NSNumber (BOOL): Embed local images as base64 data URLs
  </li>

</ul>

<h4 id="swift-friendly-convenience-method">
  Swift-Friendly Convenience Method
</h4>

<p>
  Combine common options in a single method call (ideal for Swift):
</p>

<pre><code class="highlight language-objective-c"> <span class="n">Combine</span> <span class="n">common</span> <span class="n">options</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdown</span>
                                     <span class="nl">mode:</span><span class="n">ApexModeUnified</span>
                          <span class="nl">generateHeaderIDs:</span><span class="nb">YES</span>
                                <span class="nl">hardBreaks:</span><span class="nb">YES</span>
                                    <span class="nl">pretty:</span><span class="nb">YES</span><span class="p">];</span>
</code></pre>

<h4 id="instance-methods">
  Instance Methods
</h4>

<p>
  Use instance methods for more natural, fluent syntax:
</p>

<pre><code class="highlight language-objective-c"> <span class="n">Instance</span> <span class="n">method</span> <span class="n">with</span> <span class="k">default</span> <span class="n">unified</span> <span class="n">mode</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">markdown</span> <span class="o">=</span> <span class="s">@"# Hello World"</span><span class="p">;</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="p">[</span><span class="n">markdown</span> <span class="nf">apexHTML</span><span class="p">];</span>

 <span class="n">Instance</span> <span class="n">method</span> <span class="n">with</span> <span class="n">specific</span> <span class="n">mode</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">html2</span> <span class="o">=</span> <span class="p">[</span><span class="n">markdown</span> <span class="nf">apexHTMLWithMode</span><span class="p">:</span><span class="n">ApexModeGFM</span><span class="p">];</span>
</code></pre>

<h2 id="mode-constants">
  Mode Constants
</h2>

<p>
  Apex provides NSString constants for processor modes to avoid ambiguity and typos:
</p>

<pre><code class="highlight language-objective-c"> <span class="n">Available</span> <span class="n">constants</span>
<span class="n">ApexModeCommonmark</span>      <span class="c1">// @"commonmark"</span>
<span class="n">ApexModeGFM</span>             <span class="c1">// @"gfm"</span>
<span class="n">ApexModeMultiMarkdown</span>   <span class="c1">// @"multimarkdown"</span>
<span class="n">ApexModeKramdown</span>        <span class="c1">// @"kramdown"</span>
<span class="n">ApexModeUnified</span>         <span class="c1">// @"unified"</span>
</code></pre>

<p>
<strong>  Benefits:</strong>
</p>

<ul>

  <li>
<strong>    Type safety</strong>: Xcode autocomplete suggests available modes
  </li>

  <li>
<strong>    No typos</strong>: Compile-time checking prevents invalid mode strings
  </li>

  <li>
<strong>    Self-documenting</strong>: Constants make code more readable
  </li>

  <li>
<strong>    Refactoring</strong>: Easy to find all usages if mode names change
  </li>

</ul>

<p>
<strong>  Example:</strong>
</p>

<pre><code class="highlight language-objective-c"> <span class="nl">Good:</span> <span class="n">Using</span> <span class="n">constants</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdown</span> <span class="nf">mode</span><span class="p">:</span><span class="n">ApexModeMultiMarkdown</span><span class="p">];</span>

 <span class="n">Also</span> <span class="n">works</span><span class="o">:</span> <span class="n">String</span> <span class="n">literals</span> <span class="p">(</span><span class="k">for</span> <span class="n">backward</span> <span class="n">compatibility</span><span class="p">)</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">html2</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdown</span> <span class="nf">mode</span><span class="p">:</span><span class="s">@"multimarkdown"</span><span class="p">];</span>
</code></pre>

<h2 id="direct-c-api-usage">
  Direct C API Usage
</h2>

<p>
  For more control, use the C API directly:
</p>

<pre><code class="highlight language-objective-c"><span class="cp">#include</span> <span class="cpf">&lt;Apex/apex.h&gt;</span><span class="cp">
</span>
<span class="k">-</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">convertMarkdown</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">markdown</span> <span class="p">{</span>
    <span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_default</span><span class="p">();</span>
    <span class="n">opts</span><span class="p">.</span><span class="n">pretty</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">md</span> <span class="o">=</span> <span class="p">[</span><span class="n">markdown</span> <span class="nf">UTF8String</span><span class="p">];</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">md</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">md</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">html</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">NSString</span> <span class="o">*</span><span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">stringWithUTF8String</span><span class="p">:</span><span class="n">html</span><span class="p">];</span>
        <span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nb">nil</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

<h2 id="integration-example">
  Integration Example
</h2>

<h3 id="adding-to-marked">
  Adding to Marked
</h3>

<p>
  Here’s how to add Apex support to an existing Marked-style application:
</p>

<p>
<strong>  1. Add to processor selection:</strong>
</p>

<pre><code class="highlight language-objective-c"> <span class="n">In</span> <span class="n">MKConductorTransformer</span><span class="p">.</span><span class="n">m</span> <span class="n">or</span> <span class="n">similar</span>
<span class="err">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">([</span><span class="n">processor</span> <span class="nf">isEqualToString</span><span class="p">:</span><span class="s">@"Apex"</span><span class="p">])</span> <span class="p">{</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">text</span><span class="p">];</span>
<span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">([</span><span class="n">processor</span> <span class="nf">isEqualToString</span><span class="p">:</span><span class="s">@"MultiMarkdown"</span><span class="p">])</span> <span class="p">{</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithMultiMarkdown</span><span class="p">:</span><span class="n">text</span><span class="p">];</span>
<span class="p">}</span>
</code></pre>

<p>
<strong>  2. Add to preferences:</strong>
</p>

<pre><code class="highlight language-objective-c"> <span class="n">In</span> <span class="n">processor</span> <span class="n">dropdown</span>
<span class="n">NSArray</span> <span class="o">*</span><span class="n">processors</span> <span class="o">=</span> <span class="p">@[</span>
    <span class="s">@"MultiMarkdown"</span><span class="p">,</span>
    <span class="s">@"Discount (GFM)"</span><span class="p">,</span>
    <span class="s">@"CommonMark"</span><span class="p">,</span>
    <span class="s">@"Kramdown"</span><span class="p">,</span>
    <span class="s">@"Apex"</span>  <span class="c1">// Add this</span>
<span class="p">];</span>
</code></pre>

<p>
<strong>  3. Handle custom processor rules:</strong>
</p>

<pre><code class="highlight language-objective-c"> <span class="n">In</span> <span class="n">custom</span> <span class="n">processor</span> <span class="n">handling</span>
<span class="err">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">([</span><span class="n">outputString</span><span class="p">.</span><span class="n">uppercaseString</span> <span class="nf">isEqualToString</span><span class="p">:</span><span class="s">@"APEX"</span><span class="p">])</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">defaults</span> <span class="nf">setValue</span><span class="p">:</span><span class="s">@"Apex"</span> <span class="nf">forKey</span><span class="p">:</span><span class="s">@"defaultProcessor"</span><span class="p">];</span>
<span class="p">}</span>
</code></pre>

<h2 id="build-settings">
  Build Settings
</h2>

<h3 id="header-search-paths">
  Header Search Paths
</h3>

<p>
  Add to “Header Search Paths”:
</p>

<pre><code class="highlight ">$(SRCROOT)/apex/include
</code></pre>

<h3 id="framework-search-paths">
  Framework Search Paths
</h3>

<p>
  Add to “Framework Search Paths”:
</p>

<pre><code class="highlight ">$(SRCROOT)/apex/build
</code></pre>

<h3 id="other-linker-flags">
  Other Linker Flags
</h3>

<p>
  If using static library:
</p>

<pre><code class="highlight ">-L$(SRCROOT)/apex/build -lapex
</code></pre>

<h3 id="swift-api-support">
  Swift API Support
</h3>

<p>
  To use the idiomatic Swift API (<code>Apex.swift</code>):
</p>

<ol>

  <li>
<strong>    If using the framework:</strong> The Swift file is automatically included when you link <code>Apex.framework</code>
  </li>

  <li>
<strong>    If using source files directly:</strong> Add <code>apex/objc/Apex.swift</code> to your Xcode project
  </li>

  <li>
<strong>    Swift/Objective-C Bridging:</strong> Xcode will automatically create a bridging header if needed
  </li>

</ol>

<p>
  The Swift API provides:
</p>

<ul>

  <li>
    Type-safe <code>ApexMode</code> enum instead of string constants
  </li>

  <li>
<code>ApexOptions</code> struct for configuration
  </li>

  <li>
    Idiomatic String extensions
  </li>

  <li>
    Static <code>Apex</code> converter struct
  </li>

</ul>

<h2 id="swift-integration">
  Swift Integration
</h2>

<p>
  Apex provides an idiomatic Swift API wrapper (<code>Apex.swift</code>) that offers type-safe enums and structs over the Objective-C API.
</p>

<h3 id="idiomatic-swift-api-recommended">
  Idiomatic Swift API (Recommended)
</h3>

<pre><code class="highlight language-swift"><span class="kd">import</span> <span class="kt">Foundation</span>
 <span class="kt">Import</span> <span class="kt">Apex</span><span class="o">.</span><span class="nf">swift</span> <span class="p">(</span><span class="n">automatically</span> <span class="n">available</span> <span class="n">when</span> <span class="n">framework</span> <span class="k">is</span> <span class="n">linked</span><span class="p">)</span>

 <span class="kt">Basic</span> <span class="n">conversion</span> <span class="n">with</span> <span class="k">default</span> <span class="n">unified</span> <span class="n">mode</span>
<span class="k">let</span> <span class="nv">markdown</span> <span class="o">=</span> <span class="s">"# Hello World"</span>
<span class="k">let</span> <span class="nv">html</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="nf">apexHTML</span><span class="p">()</span>

 <span class="kt">With</span> <span class="n">type</span><span class="o">-</span><span class="n">safe</span> <span class="n">mode</span> <span class="kd">enum</span>
<span class="k">let</span> <span class="nv">gfmHtml</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="nf">apexHTML</span><span class="p">(</span><span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="n">gfm</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">mmdHtml</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="nf">apexHTML</span><span class="p">(</span><span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="n">multimarkdown</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">kramdownHtml</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="nf">apexHTML</span><span class="p">(</span><span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="n">kramdown</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">commonmarkHtml</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="nf">apexHTML</span><span class="p">(</span><span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="n">commonmark</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">unifiedHtml</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="nf">apexHTML</span><span class="p">(</span><span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="n">unified</span><span class="p">)</span>

 <span class="kt">Using</span> <span class="kt">ApexOptions</span> <span class="nf">struct</span> <span class="p">(</span><span class="n">type</span><span class="o">-</span><span class="n">safe</span><span class="p">)</span>
<span class="k">var</span> <span class="nv">options</span> <span class="o">=</span> <span class="kt">ApexOptions</span><span class="p">()</span>
<span class="n">options</span><span class="o">.</span><span class="n">pretty</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">options</span><span class="o">.</span><span class="n">standalone</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">options</span><span class="o">.</span><span class="n">stylesheet</span> <span class="o">=</span> <span class="s">"style.css"</span>
<span class="n">options</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s">"My Document"</span>
<span class="n">options</span><span class="o">.</span><span class="n">generateHeaderIDs</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">options</span><span class="o">.</span><span class="n">hardBreaks</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">options</span><span class="o">.</span><span class="n">obfuscateEmails</span> <span class="o">=</span> <span class="kc">true</span>

<span class="k">let</span> <span class="nv">configuredHtml</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="nf">apexHTML</span><span class="p">(</span><span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="n">unified</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="n">options</span><span class="p">)</span>

 <span class="kt">Or</span> <span class="n">use</span> <span class="kd">static</span> <span class="kt">Apex</span> <span class="n">converter</span>
<span class="k">let</span> <span class="nv">html2</span> <span class="o">=</span> <span class="kt">Apex</span><span class="o">.</span><span class="nf">convert</span><span class="p">(</span><span class="n">markdown</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">html3</span> <span class="o">=</span> <span class="kt">Apex</span><span class="o">.</span><span class="nf">convert</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="n">gfm</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">html4</span> <span class="o">=</span> <span class="kt">Apex</span><span class="o">.</span><span class="nf">convert</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="n">unified</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="n">options</span><span class="p">)</span>

 <span class="kt">Standalone</span> <span class="kt">HTML</span> <span class="n">document</span>
<span class="k">let</span> <span class="nv">standaloneHtml</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="nf">apexHTML</span><span class="p">(</span>
    <span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="n">unified</span><span class="p">,</span>
    <span class="nv">standalone</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nv">stylesheet</span><span class="p">:</span> <span class="s">"style.css"</span><span class="p">,</span>
    <span class="nv">title</span><span class="p">:</span> <span class="s">"My Document"</span>
<span class="p">)</span>

 <span class="kt">Pretty</span><span class="o">-</span><span class="n">printed</span> <span class="kt">HTML</span>
<span class="k">let</span> <span class="nv">prettyHtml</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="nf">apexHTML</span><span class="p">(</span><span class="nv">pretty</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="n">unified</span><span class="p">)</span>

 <span class="kt">Common</span> <span class="n">options</span> <span class="n">combined</span>
<span class="k">let</span> <span class="nv">commonOptionsHtml</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="nf">apexHTML</span><span class="p">(</span>
    <span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="n">unified</span><span class="p">,</span>
    <span class="nv">generateHeaderIDs</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nv">hardBreaks</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nv">pretty</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">)</span>
</code></pre>

<h3 id="apexmode-enum">
  ApexMode Enum
</h3>

<p>
  Type-safe processor mode enum:
</p>

<pre><code class="highlight language-swift"><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">ApexMode</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="kt">CaseIterable</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">commonmark</span>
    <span class="k">case</span> <span class="n">gfm</span>
    <span class="k">case</span> <span class="n">multimarkdown</span>
    <span class="k">case</span> <span class="n">kramdown</span>
    <span class="k">case</span> <span class="n">unified</span>
<span class="p">}</span>
</code></pre>

<h3 id="apexoptions-struct">
  ApexOptions Struct
</h3>

<p>
  Type-safe options configuration:
</p>

<pre><code class="highlight language-swift"><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">ApexOptions</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">pretty</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">standalone</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">stylesheet</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">hardBreaks</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">generateHeaderIDs</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">unsafe</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">headerAnchors</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">obfuscateEmails</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">embedImages</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">let</span> <span class="p">`</span><span class="nv">default</span><span class="p">`</span> <span class="o">=</span> <span class="kt">ApexOptions</span><span class="p">()</span>
<span class="p">}</span>
</code></pre>

<p>
<strong>  Example usage:</strong>
</p>

<pre><code class="highlight language-swift"><span class="k">var</span> <span class="nv">options</span> <span class="o">=</span> <span class="kt">ApexOptions</span><span class="o">.</span><span class="k">default</span>
<span class="n">options</span><span class="o">.</span><span class="n">pretty</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">options</span><span class="o">.</span><span class="n">generateHeaderIDs</span> <span class="o">=</span> <span class="kc">true</span>
<span class="k">let</span> <span class="nv">html</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="nf">apexHTML</span><span class="p">(</span><span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="n">gfm</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="n">options</span><span class="p">)</span>
</code></pre>

<h3 id="objective-c-bridge-alternative">
  Objective-C Bridge (Alternative)
</h3>

<p>
  You can also use the Objective-C API directly from Swift:
</p>

<pre><code class="highlight language-swift"><span class="kd">import</span> <span class="kt">Foundation</span>

 <span class="kt">Use</span> <span class="kt">Objective</span><span class="o">-</span><span class="kt">C</span> <span class="n">wrapper</span>
<span class="k">let</span> <span class="nv">html</span> <span class="o">=</span> <span class="kt">NSString</span><span class="o">.</span><span class="nf">convert</span><span class="p">(</span><span class="nv">withApex</span><span class="p">:</span> <span class="n">markdownText</span><span class="p">)</span>

 <span class="kt">With</span> <span class="n">mode</span> <span class="n">constants</span>
<span class="k">let</span> <span class="nv">gfmHtml</span> <span class="o">=</span> <span class="kt">NSString</span><span class="o">.</span><span class="nf">convert</span><span class="p">(</span><span class="nv">withApex</span><span class="p">:</span> <span class="n">markdownText</span><span class="p">,</span> <span class="nv">mode</span><span class="p">:</span> <span class="kt">ApexModeGFM</span><span class="p">)</span>

 <span class="kt">Dictionary</span><span class="o">-</span><span class="n">based</span> <span class="n">options</span>
<span class="k">let</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">"pretty"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s">"standalone"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s">"stylesheet"</span><span class="p">:</span> <span class="s">"style.css"</span>
<span class="p">]</span>
<span class="k">let</span> <span class="nv">configuredHtml</span> <span class="o">=</span> <span class="kt">NSString</span><span class="o">.</span><span class="nf">convert</span><span class="p">(</span>
    <span class="nv">withApex</span><span class="p">:</span> <span class="n">markdownText</span><span class="p">,</span>
    <span class="nv">mode</span><span class="p">:</span> <span class="kt">ApexModeUnified</span><span class="p">,</span>
    <span class="nv">options</span><span class="p">:</span> <span class="n">options</span>
<span class="p">)</span>
</code></pre>

<p>
  For direct C API access, create a Swift bridging header:
</p>

<pre><code class="highlight language-swift"> <span class="kt">Bridging</span> <span class="n">header</span>
<span class="cp">#import &lt;Apex/apex.h&gt;</span>

 <span class="kt">Swift</span> <span class="n">code</span>
<span class="kd">func</span> <span class="nf">convertMarkdown</span><span class="p">(</span><span class="n">_</span> <span class="nv">text</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">String</span><span class="p">?</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">opts</span> <span class="o">=</span> <span class="nf">apex_options_default</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">cString</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">utf8CString</span>
    <span class="k">guard</span> <span class="k">let</span> <span class="nv">html</span> <span class="o">=</span> <span class="nf">apex_markdown_to_html</span><span class="p">(</span><span class="n">cString</span><span class="p">,</span> <span class="n">text</span><span class="o">.</span><span class="n">utf8</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">nil</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="p">{</span> <span class="nf">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">)</span> <span class="p">}</span>
    <span class="k">return</span> <span class="kt">String</span><span class="p">(</span><span class="nv">cString</span><span class="p">:</span> <span class="n">html</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<h2 id="troubleshooting">
  Troubleshooting
</h2>

<h3 id="swift-package-manager-issues">
  Swift Package Manager Issues
</h3>

<p>
<strong>  Package Resolution Fails:</strong>
</p>

<ul>

  <li>
    Ensure you have an active internet connection
  </li>

  <li>
    Check that the repository URL is correct: <code>https://github.com/ApexMarkdown/apex</code>
  </li>

  <li>
    Try cleaning derived data: <code>File &gt; Packages &gt; Reset Package Caches</code>
  </li>

  <li>
    Verify your Xcode version supports the required Swift tools version (5.7+)
  </li>

</ul>

<p>
<strong>  Build Errors:</strong>
</p>

<ul>

  <li>
    Ensure your deployment target matches Apex’s requirements (macOS 10.13+, iOS 11+)
  </li>

  <li>
    Clean build folder: <code>Product &gt; Clean Build Folder</code> (Shift+Cmd+K)
  </li>

  <li>
    Try removing and re-adding the package dependency
  </li>

</ul>

<p>
<strong>  Module Not Found:</strong>
</p>

<ul>

  <li>
    Ensure you’ve imported the module: <code>import Apex</code>
  </li>

  <li>
    Check that the Apex library product is added to your target’s dependencies
  </li>

  <li>
    Verify the package resolved successfully in the Package Dependencies tab
  </li>

</ul>

<h3 id="framework-not-found">
  Framework Not Found
</h3>

<p>
  Ensure the framework is:
</p>

<ol>

  <li>
    Added to “Frameworks, Libraries, and Embedded Content”
  </li>

  <li>
    Set to “Embed &amp; Sign”
  </li>

  <li>
    Framework search paths are correct
  </li>

</ol>

<h3 id="linker-errors">
  Linker Errors
</h3>

<ul>

  <li>
    Ensure <code>Apex.framework</code> is linked (or Apex package is added via SPM)
  </li>

  <li>
    Check framework search paths
  </li>

  <li>
    Verify architecture matches (arm64 vs x86_64)
  </li>

</ul>

<h3 id="runtime-errors">
  Runtime Errors
</h3>

<ul>

  <li>
    Ensure framework is embedded (not just linked) if using framework method
  </li>

  <li>
    Check code signing settings
  </li>

  <li>
    Verify framework is built for correct deployment target
  </li>

  <li>
    For SPM: Ensure the package is properly resolved and built
  </li>

</ul>

<h2 id="performance">
  Performance
</h2>

<p>
  Apex is built on cmark-gfm, which is highly optimized:
</p>

<ul>

  <li>
    Small documents (&lt; 10KB): &lt; 10ms
  </li>

  <li>
    Medium documents (&lt; 100KB): &lt; 100ms
  </li>

  <li>
    Large documents (&lt; 1MB): &lt; 1s
  </li>

</ul>

<p>
  The Objective-C wrapper adds minimal overhead.
</p>

<h2 id="module-map">
  Module Map
</h2>

<p>
  Apex includes a module map (<code>include/apex/module.modulemap</code>) that allows Swift to import the C API directly:
</p>

<pre><code class="highlight language-swift"><span class="kd">import</span> <span class="kt">Apex</span>

 <span class="kt">Direct</span> <span class="kt">C</span> <span class="kt">API</span> <span class="nf">access</span> <span class="p">(</span><span class="n">advanced</span> <span class="n">usage</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">opts</span> <span class="o">=</span> <span class="nf">apex_options_default</span><span class="p">()</span>
 <span class="o">...</span> <span class="n">configure</span> <span class="n">options</span> <span class="o">...</span>
<span class="k">let</span> <span class="nv">html</span> <span class="o">=</span> <span class="nf">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">markdown</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">)</span>
</code></pre>

<p>
  The module map is automatically included when using SPM or the framework.
</p>

<h2 id="comparison-of-integration-methods">
  Comparison of Integration Methods
</h2>

<table>

  <thead>

    <tr>

      <th>
        Method
      </th>

      <th>
        Ease of Use
      </th>

      <th>
        Platform Support
      </th>

      <th>
        Maintenance
      </th>

    </tr>

  </thead>

  <tbody>

    <tr>

      <td>
<strong>        Swift Package Manager</strong>
      </td>

      <td>
        ⭐⭐⭐⭐⭐
      </td>

      <td>
        macOS + iOS
      </td>

      <td>
        Automatic updates
      </td>

    </tr>
    <tr>

      <td>
        Framework
      </td>

      <td>
        ⭐⭐⭐
      </td>

      <td>
        macOS only
      </td>

      <td>
        Manual updates
      </td>

    </tr>
    <tr>

      <td>
        CMake
      </td>

      <td>
        ⭐⭐
      </td>

      <td>
        macOS + Linux
      </td>

      <td>
        Manual integration
      </td>

    </tr>
  </tbody>

</table>

<p>
<strong>  Recommendation:</strong> Use Swift Package Manager for the easiest integration and best cross-platform support.
</p>

<h2 id="related">
  Related
</h2>

<ul>

  <li>
<a href="#c-api" onclick="showPage('c-api'); return false;">    C API</a> - Direct C API documentation
  </li>

  <li>
<a href="#usage" onclick="showPage('usage'); return false;">    Usage</a> - Basic usage examples
  </li>

  <li>
<a href="#modes" onclick="showPage('modes'); return false;">    Modes</a> - Processor mode details
  </li>

</ul>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-examples" class="page">

    <h1 id="examples">
      Examples
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#examples">Examples</a><ul><li><a href="#basic-conversion">Basic Conversion</a><ul><li><a href="#simple-markdown-to-html">Simple Markdown to HTML</a></li><li><a href="#from-stdin">From stdin</a></li></ul></li><li><a href="#blog-post-generation">Blog Post Generation</a></li><li><a href="#documentation-site">Documentation Site</a></li><li><a href="#github-compatible-readme">GitHub-Compatible README</a></li><li><a href="#review-document-with-critic-markup">Review Document with Critic Markup</a></li><li><a href="#wiki-style-documentation">Wiki-Style Documentation</a></li><li><a href="#math-document">Math Document</a></li><li><a href="#multimarkdown-document">MultiMarkdown Document</a></li><li><a href="#kramdown-document">Kramdown Document</a></li><li><a href="#c-program-example">C Program Example</a></li><li><a href="#objective-c-example">Objective-C Example</a></li><li><a href="#batch-processing">Batch Processing</a></li><li><a href="#pipeline-example">Pipeline Example</a></li><li><a href="#related">Related</a></li></ul></li></ul></nav>

    <p>
      Practical examples of using Apex for common tasks.
    </p>

    <h2 id="basic-conversion">
      Basic Conversion
    </h2>

    <h3 id="simple-markdown-to-html">
      Simple Markdown to HTML
    </h3>

<pre><code class="highlight language-bash">apex document.md <span class="o">&gt;</span> output.html
</code></pre>

  <h3 id="from-stdin">
    From stdin
  </h3>

<pre><code class="highlight language-bash"><span class="nb">echo</span> <span class="s2">"# Hello World"</span> | apex
</code></pre>

<h2 id="blog-post-generation">
  Blog Post Generation
</h2>

<p>
  Generate a complete blog post with custom styling:
</p>

<pre><code class="highlight language-bash">apex post.md <span class="se">\</span>
  <span class="nt">--standalone</span> <span class="se">\</span>
  <span class="nt">--title</span> <span class="s2">"My Blog Post"</span> <span class="se">\</span>
  <span class="nt">--style</span> blog.css <span class="se">\</span>
  <span class="nt">--pretty</span> <span class="se">\</span>
  <span class="nt">-o</span> post.html
</code></pre>

<h2 id="documentation-site">
  Documentation Site
</h2>

<p>
  Create documentation with table of contents:
</p>

<pre><code class="highlight language-markdown"><span class="c">&lt;!--TOC--&gt;</span>

<span class="gh"># Introduction</span>
...

<span class="gh"># Getting Started</span>
...

<span class="gh"># API Reference</span>
...
</code></pre>

<pre><code class="highlight language-bash">apex docs.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"Documentation"</span> <span class="nt">--pretty</span>
</code></pre>

<h2 id="github-compatible-readme">
  GitHub-Compatible README
</h2>

<p>
  Convert README for GitHub preview:
</p>

<pre><code class="highlight language-bash">apex README.md <span class="nt">--mode</span> gfm <span class="nt">--pretty</span> <span class="o">&gt;</span> README.html
</code></pre>

<h2 id="review-document-with-critic-markup">
  Review Document with Critic Markup
</h2>

<p>
<strong>  Draft with changes:</strong>
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Document</span>

This is <span class="nt">&lt;ins</span> <span class="na">class=</span><span class="s">"critic"</span><span class="nt">&gt;</span>new text<span class="nt">&lt;/ins&gt;</span> and <span class="nt">&lt;del</span> <span class="na">class=</span><span class="s">"critic"</span><span class="nt">&gt;</span>old text<span class="nt">&lt;/del&gt;</span>.

<span class="nt">&lt;del</span> <span class="na">class=</span><span class="s">"critic break"</span><span class="nt">&gt;</span>old<span class="nt">&lt;/del&gt;&lt;ins</span> <span class="na">class=</span><span class="s">"critic break"</span><span class="nt">&gt;</span>new<span class="nt">&lt;/ins&gt;</span> substitution.
</code></pre>

<p>
<strong>  Review mode (show all changes):</strong>
</p>

<pre><code class="highlight language-bash">apex draft.md <span class="o">&gt;</span> review.html
</code></pre>

<p>
<strong>  Accept all changes (final version):</strong>
</p>

<pre><code class="highlight language-bash">apex draft.md <span class="nt">--accept</span> <span class="o">&gt;</span> final.html
</code></pre>

<p>
<strong>  Reject all changes (original):</strong>
</p>

<pre><code class="highlight language-bash">apex draft.md <span class="nt">--reject</span> <span class="o">&gt;</span> original.html
</code></pre>

<h2 id="wiki-style-documentation">
  Wiki-Style Documentation
</h2>

<p>
  Using wiki links and relaxed tables (requires <code>--wikilinks</code> flag):
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Wiki Documentation</span>

See [[Getting Started]] for details.

<span class="gu">## Data Table</span>

one | two | three
---|---|---|
1 | 2 | 3
4 | 5 | 6
</code></pre>

<pre><code class="highlight language-bash">apex wiki.md <span class="nt">--mode</span> unified <span class="nt">--wikilinks</span> <span class="nt">--pretty</span>
</code></pre>

<h2 id="math-document">
  Math Document
</h2>

<p>
  Document with mathematical equations:
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Math Examples</span>

Inline: $E = mc^2$

Display:
$$
<span class="se">\i</span>nt_{-<span class="se">\i</span>nfty}^{<span class="se">\i</span>nfty} e^{-x^2} dx = <span class="se">\s</span>qrt{<span class="se">\p</span>i}
$$
</code></pre>

<pre><code class="highlight language-bash">apex math.md <span class="nt">--standalone</span> <span class="nt">--title</span> <span class="s2">"Math Examples"</span>
</code></pre>

<h2 id="multimarkdown-document">
  MultiMarkdown Document
</h2>

<p>
  Using metadata and variables:
</p>

<pre><code class="highlight language-markdown"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Report</span>
<span class="na">author</span><span class="pi">:</span> <span class="s">John Doe</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2025-12-06</span>
<span class="nn">---</span>

<span class="gh"># [%title]</span>

By [%author] on [%date]

Content here...
</code></pre>

<p>
  See <a href="#metadata-transforms" onclick="showPage('metadata-transforms'); return false;">Metadata Transforms</a> for information on transforming metadata values with <code>[%key:transform]</code> syntax.
</p>

<pre><code class="highlight language-bash">apex report.md <span class="nt">--mode</span> mmd <span class="nt">--standalone</span>
</code></pre>

<h2 id="kramdown-document">
  Kramdown Document
</h2>

<p>
  With IAL attributes and relaxed tables:
</p>

<pre><code class="highlight language-markdown"><span class="gh"># Header {: #custom-id .class}</span>

one | two
---|---|
1 | 2
</code></pre>

<pre><code class="highlight language-bash">apex doc.md <span class="nt">--mode</span> kramdown <span class="nt">--pretty</span>
</code></pre>

<h2 id="c-program-example">
  C Program Example
</h2>

<pre><code class="highlight language-c"><span class="cp">#include</span> <span class="cpf">&lt;apex/apex.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">markdown</span> <span class="o">=</span>
        <span class="s">"# Hello</span><span class="se">\n\n</span><span class="s">"</span>
        <span class="s">"This is **bold** and a [[WikiLink]].</span><span class="se">\n\n</span><span class="s">"</span>
        <span class="s">"Math: $E = mc^2$</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="n">apex_options</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">apex_options_default</span><span class="p">();</span>
    <span class="n">opts</span><span class="p">.</span><span class="n">pretty</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

    <span class="kt">char</span> <span class="o">*</span><span class="n">html</span> <span class="o">=</span> <span class="n">apex_markdown_to_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">markdown</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">opts</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">html</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">html</span><span class="p">);</span>
        <span class="n">apex_free_string</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

<h2 id="objective-c-example">
  Objective-C Example
</h2>

<pre><code class="highlight language-objective-c"><span class="cp">#import "NSString+Apex.h"
</span>
<span class="k">-</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">convertMarkdownToHTML</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">markdown</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdown</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">convertWithGFM</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">markdown</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">convertWithApex</span><span class="p">:</span><span class="n">markdown</span> <span class="nf">mode</span><span class="p">:</span><span class="s">@"gfm"</span><span class="p">];</span>
<span class="p">}</span>
</code></pre>

<h2 id="batch-processing">
  Batch Processing
</h2>

<p>
  Process multiple files:
</p>

<pre><code class="highlight language-bash"><span class="k">for </span>file <span class="k">in</span> <span class="k">*</span>.md<span class="p">;</span> <span class="k">do
    </span>apex <span class="s2">"</span><span class="nv">$file</span><span class="s2">"</span> <span class="nt">-o</span> <span class="s2">"</span><span class="k">${</span><span class="nv">file</span><span class="p">%.md</span><span class="k">}</span><span class="s2">.html"</span>
<span class="k">done</span>
</code></pre>

<h2 id="pipeline-example">
  Pipeline Example
</h2>

<p>
  Combine with other tools:
</p>

<pre><code class="highlight language-bash"><span class="c"># Preprocess with sed, then convert</span>

<span class="nb">sed</span> <span class="s1">'s/OLD/NEW/g'</span> input.md | apex <span class="o">&gt;</span> output.html
<span class="c"># Convert and post-process</span>
apex input.md | <span class="nb">sed</span> <span class="s1">'s/&lt;h1&gt;/&lt;h1 class="title"&gt;/g'</span> <span class="o">&gt;</span> output.html
</code></pre>

<h2 id="related">
  Related
</h2>

<ul>

  <li>
<a href="#usage" onclick="showPage('usage'); return false;">    Usage</a> - More usage patterns
  </li>

  <li>
<a href="#syntax" onclick="showPage('syntax'); return false;">    Syntax</a> - Syntax examples
  </li>

  <li>
<a href="#command-line-options" onclick="showPage('command-line-options'); return false;">    Command Line Options</a> - All available options
  </li>

</ul>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-plugins" class="page">

    <h1 id="plugins">
      Plugins
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#plugins">Plugins</a><ul><li><a href="#enabling-and-disabling-plugins">Enabling and disabling plugins</a></li><li><a href="#where-plugins-live">Where plugins live</a></li><li><a href="#processing-phases">Processing phases</a></li><li><a href="#plugin-manifest-pluginyml">Plugin manifest: plugin.yml</a><ul><li><a href="#metadata-fields-for-directories-and-installers">Metadata fields for directories and installers</a></li><li><a href="#post-install-hooks-postinstall">Post-install hooks (post_install)</a></li></ul></li><li><a href="#plugin-bundles-bundle-key">Plugin bundles (bundle key)</a><ul><li><a href="#bundle-structure">Bundle structure</a></li><li><a href="#inheritance-and-overrides">Inheritance and overrides</a></li><li><a href="#behavior-and-limitations">Behavior and limitations</a></li></ul></li><li><a href="#external-handler-plugins-scriptscommands">External handler plugins (scripts/commands)</a><ul><li><a href="#manifest-fields">Manifest fields</a></li><li><a href="#json-protocol">JSON protocol</a></li></ul></li><li><a href="#declarative-regex-plugins-no-scripting">Declarative regex plugins (no scripting)</a><ul><li><a href="#manifest-fields">Manifest fields</a></li></ul></li><li><a href="#support-directory-and-environment-variables">Support directory and environment variables</a><ul><li><a href="#support-directory-apexsupportdir">Support directory (APEX_SUPPORT_DIR)</a></li><li><a href="#environment-variables-for-external-plugins">Environment variables for external plugins</a></li></ul></li><li><a href="#installing-plugins-from-the-directory">Installing plugins from the directory</a><ul><li><a href="#listing-available-plugins">Listing available plugins</a></li><li><a href="#installing-a-plugin">Installing a plugin</a><ul><li><a href="#security-confirmation-for-direct-installs">Security confirmation for direct installs</a></li><li><a href="#installation-process">Installation process</a></li></ul></li><li><a href="#uninstalling-a-plugin">Uninstalling a plugin</a></li></ul></li><li><a href="#share-your-plugin">Share Your Plugin</a></li><li><a href="#example-kbd-liquid-tag-plugin">Example: kbd liquid tag plugin</a><ul><li><a href="#directory-layout">Directory layout</a></li><li><a href="#pluginyml">plugin.yml</a></li><li><a href="#kbdpluginrb-simplified-shape">kbd_plugin.rb (simplified shape)</a></li></ul></li><li><a href="#example-memo-span-plugin-declarative">Example: 📝 span plugin (declarative)</a><ul><li><a href="#directory-layout">Directory layout</a></li><li><a href="#pluginyml">plugin.yml</a></li></ul></li><li><a href="#putting-it-all-together">Putting it all together</a></li></ul></li></ul></nav>

    <p>
      Apex supports a lightweight plugin system that lets you add new syntax and post‑processing behavior <strong>without patching the core</strong>. Plugins can be small scripts (Ruby, Python, etc.) or simple declarative regex rules defined in YAML.
    </p>

    <p>
      This page covers:
    </p>

    <ul>

      <li>
<strong>        Where plugins live</strong>
      </li>

      <li>
<strong>        How to enable/disable plugins</strong>
      </li>

      <li>
<strong>        Processing phases</strong>
      </li>

      <li>
<strong>        Plugin manifest format (<code>plugin.yml</code>)</strong>
      </li>

      <li>
<strong>        External handler plugins (scripts/commands)</strong>
      </li>

      <li>
<strong>        Declarative regex plugins (pure YAML)</strong>
      </li>

      <li>
<strong>        Plugin bundles (<code>bundle</code> key)</strong>
      </li>

      <li>
<strong>        Support directory and environment variables</strong>
      </li>

      <li>
<strong>        Plugin metadata for directories and installers</strong>
      </li>

      <li>
<strong>        Installing plugins from the directory or a Git URL</strong>
      </li>

      <li>
<strong>        Examples: <code>kbd</code> liquid tag and <code>📝</code> spans</strong>
      </li>

    </ul>

<hr />
    <h2 id="enabling-and-disabling-plugins">
      Enabling and disabling plugins
    </h2>

    <p>
      By design, <strong>plugins are disabled by default</strong> so Apex’s performance and behavior are unchanged unless you explicitly opt in.
    </p>

    <ul>

      <li>

        <p>
<strong>          CLI flags</strong>
        </p>

        <ul>

          <li>
<strong>            Enable plugins</strong>: <code>apex --plugins input.md</code>
          </li>

          <li>
<strong>            Disable plugins</strong>: <code>apex --no-plugins input.md</code>
          </li>

        </ul>

      </li>

      <li>

        <p>
<strong>          Metadata keys</strong> (in the document’s front matter)
        </p>

        <ul>

          <li>

            <p>
              Any of these keys are recognized (case-insensitive):
            </p>

            <ul>

              <li>
<code>plugins</code>
              </li>

              <li>
<code>enable-plugins</code>
              </li>

              <li>
<code>enable_plugins</code>
              </li>

            </ul>

          </li>

          <li>

            <p>
              Example:
            </p>

<pre><code class="highlight language-yaml"><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Plugin demo</span>
<span class="na">plugins</span><span class="pi">:</span> <span class="kc">true</span>
<span class="nn">---</span>
</code></pre>

        </li>

      </ul>

    </li>

    <li>

      <p>
<strong>        Precedence</strong>
      </p>

      <ul>

        <li>
          If metadata enables or disables plugins, you can still override it from the CLI:
          <ul>

            <li>
<code>--plugins</code> forces plugins <strong>on</strong>
            </li>

            <li>
<code>--no-plugins</code> forces plugins <strong>off</strong>
            </li>

          </ul>

        </li>

        <li>
          CLI flags always win over metadata.
        </li>

      </ul>

    </li>

  </ul>

  <p>
    If you never set <code>plugins: true</code> or pass <code>--plugins</code>, Apex will not load or run any plugins.
  </p>

<hr />
  <h2 id="where-plugins-live">
    Where plugins live
  </h2>

  <p>
    Plugins are discovered from <strong>two locations</strong>, in this order:
  </p>

  <ul>

    <li>

      <p>
<strong>        Project-local plugins</strong>
      </p>

      <ul>

        <li>
          Directory: <code>.apex/plugins/</code> in the same project as your documents
        </li>

        <li>
          Structure: <strong>one subdirectory per plugin</strong>, for example:
          <ul>

            <li>
<code>.apex/plugins/kbd/plugin.yml</code>
            </li>

            <li>
<code>.apex/plugins/kbd/kbd_plugin.rb</code>
            </li>

            <li>
<code>.apex/plugins/emoji/plugin.yml</code>
            </li>

          </ul>

        </li>

      </ul>

    </li>

    <li>

      <p>
<strong>        Global (user) plugins</strong>
      </p>

      <ul>

        <li>
          Directory (XDG-aware):
          <ul>

            <li>
              If <code>$XDG_CONFIG_HOME</code> is set:
              <ul>

                <li>
<code>$XDG_CONFIG_HOME/apex/plugins/</code>
                </li>

              </ul>

            </li>

            <li>
              Otherwise:
              <ul>

                <li>
<code>~/.config/apex/plugins/</code>
                </li>

              </ul>

            </li>

          </ul>

        </li>

        <li>
          Same structure: one subdirectory per plugin:
          <ul>

            <li>
<code>~/.config/apex/plugins/kbd/plugin.yml</code>
            </li>

            <li>
<code>~/.config/apex/plugins/emoji/plugin.yml</code>
            </li>

          </ul>

        </li>

      </ul>

    </li>

  </ul>

  <p>
<strong>    Plugin IDs must be unique.</strong> If a project plugin and a global plugin share the same <code>id</code>, the <strong>project plugin wins</strong> and the global one is ignored.
  </p>

<hr />
  <h2 id="processing-phases">
    Processing phases
  </h2>

  <p>
    Apex exposes several <strong>phases</strong> in its pipeline. Plugins can hook into one or more phases; for now, two are wired up:
  </p>

  <ul>

    <li>

      <p>
<strong><code>pre_parse</code></strong>
      </p>

      <ul>

        <li>
          Runs on the <strong>raw Markdown text</strong> <em>before</em> it is parsed.
        </li>

        <li>
          Good for:
          <ul>

            <li>
              Custom syntax (e.g. <code>{% kbd ... %}</code>)
            </li>

            <li>
              Textual rewrites
            </li>

            <li>
              Adding/removing markup before Apex sees it
            </li>

          </ul>

        </li>

      </ul>

    </li>

    <li>

      <p>
<strong><code>post_render</code></strong>
      </p>

      <ul>

        <li>
          Runs on the <strong>final HTML output</strong> after Apex finishes rendering.
        </li>

        <li>
          Good for:
          <ul>

            <li>
              Wrapping elements in spans/divs
            </li>

            <li>
              Adding CSS classes
            </li>

            <li>
              Simple HTML post-processing (e.g. turning <code>📝</code> into <code>&lt;span&gt;</code>)
            </li>

          </ul>

        </li>

      </ul>

    </li>

  </ul>

  <p>
    Internally, plugins for each phase are run in a <strong>deterministic order</strong>:
  </p>

  <ol>

    <li>
      Sorted by <strong>priority</strong> (lower numbers first; default is <code>100</code>).
    </li>

    <li>
      Ties broken by <strong>plugin <code>id</code></strong> (lexicographically).
    </li>

  </ol>

<hr />
  <h2 id="plugin-manifest-pluginyml">
    Plugin manifest: <code>plugin.yml</code>
  </h2>

  <p>
    Each plugin is defined by a <strong>manifest</strong> file:
  </p>

  <ul>

    <li>

      <p>
<strong>        File name</strong>: <code>plugin.yml</code>
      </p>

    </li>

    <li>

      <p>
<strong>        Location</strong>: inside the plugin’s directory, e.g.:
      </p>

<pre><code class="highlight language-text">.apex/plugins/kbd/plugin.yml
~/.config/apex/plugins/emoji/plugin.yml
</code></pre>

  </li>

</ul>

<p>
  At minimum, a plugin needs:
</p>

<pre><code class="highlight language-yaml"><span class="nn">---</span>
<span class="na">id</span><span class="pi">:</span> <span class="s">my-plugin</span>
<span class="c1"># Optional, but strongly recommended metadata:</span>
<span class="c1"># title: Human-friendly name (if omitted, tools may fall back to id)</span>
<span class="c1"># author: Name or handle of the plugin author</span>
<span class="c1"># description: Short, human-readable description of what the plugin does</span>
<span class="c1"># homepage: URL for the plugin landing page or README</span>
<span class="c1"># repo: Canonical Git repository URL used for installation/updates</span>
<span class="na">phase</span><span class="pi">:</span> <span class="s">pre_parse</span>           <span class="c1"># or post_render</span>
<span class="na">priority</span><span class="pi">:</span> <span class="m">100</span>              <span class="c1"># optional, lower runs earlier</span>
<span class="na">timeout_ms</span><span class="pi">:</span> <span class="m">0</span>              <span class="c1"># optional, 0 = no extra timeout logic (best-effort)</span>
<span class="nn">---</span>
</code></pre>

<p>
  From there, you choose <strong>one of two plugin types</strong>:
</p>

<ul>

  <li>
<strong>    External handler plugin</strong>
    <ul>

      <li>
        Runs an external command (Ruby, Python, shell, etc.).
      </li>

      <li>
        Declared with a <code>handler.command</code> field.
      </li>

    </ul>

  </li>

  <li>
<strong>    Declarative regex plugin</strong>
    <ul>

      <li>
        No external code; in-process regex search/replace.
      </li>

      <li>
        Declared with <code>pattern</code> and <code>replacement</code> fields.
      </li>

    </ul>

  </li>

</ul>

<p>
  You can’t mix both styles in a single plugin; if <code>handler.command</code> is present, the plugin is treated as external.
</p>

<h3 id="metadata-fields-for-directories-and-installers">
  Metadata fields for directories and installers
</h3>

<p>
  To support plugin directories, automatic installation, and future auto-update tools, Apex understands several <strong>optional metadata fields</strong> in <code>plugin.yml</code>:
</p>

<ul>

  <li>
<strong><code>title</code></strong>: Short, human-friendly name for the plugin (e.g. <code>Keyboard Shortcuts</code>).
  </li>

  <li>
<strong><code>author</code></strong>: Free-form author string (your name, handle, or organization).
  </li>

  <li>
<strong><code>description</code></strong>: One–two sentence description of what the plugin does. This is already used in examples and is what directory listings will usually display.
  </li>

  <li>
<strong><code>homepage</code></strong>: Informational URL where users can learn more about the plugin—often a README, documentation site, or the GitHub project page. This field is <strong>not</strong> used for cloning, but may be shown in <code>--list-plugins</code> output.
  </li>

  <li>
<strong><code>repo</code></strong>: <strong>Canonical Git URL</strong> for the plugin repository, used by Apex when installing plugins from the central directory (for example, <code>https://github.com/ApexMarkdown/apex-kbd-plugin.git</code>). The repository must contain the <code>plugin.yml</code> manifest (and any supporting files) at its root.
  </li>

  <li>
<strong><code>post_install</code></strong>: Optional command that Apex will run after cloning the plugin during <code>--install-plugin</code>. See “Post-install hooks” below.
  </li>

</ul>

<p>
  Only <code>id</code>, <code>phase</code>, and either <code>handler.command</code> (for external plugins) or <code>pattern</code>/<code>replacement</code> (for declarative plugins) are required for execution—everything else is optional metadata used by tools.
</p>

<h3 id="post-install-hooks-postinstall">
  Post-install hooks (<code>post_install</code>)
</h3>

<p>
  External plugins can define an optional <code>post_install</code> command in <code>plugin.yml</code> that Apex will run immediately after cloning the plugin during <code>--install-plugin</code>:
</p>

<pre><code class="highlight language-yaml"><span class="nn">---</span>
<span class="na">id</span><span class="pi">:</span> <span class="s">kbd</span>
<span class="c1"># ... other fields ...</span>
<span class="na">post_install</span><span class="pi">:</span> <span class="s">./post_install.sh</span>
<span class="nn">---</span>
</code></pre>

<p>
  When you run:
</p>

<pre><code class="highlight language-bash">apex <span class="nt">--install-plugin</span> kbd
</code></pre>

<p>
  Apex will:
</p>

<ol>

  <li>
    Clone the plugin repository into your user plugin directory (e.g. <code>~/.config/apex/plugins/kbd</code>).
  </li>

  <li>
    Look for <code>plugin.yml</code> (or <code>plugin.yaml</code>) in the root of that directory.
  </li>

  <li>
    If it finds a <code>post_install</code> key, run the value as a shell command from the plugin directory (equivalent to <code>cd &lt;plugin_dir&gt; &amp;&amp; &lt;post_install&gt;</code>).
  </li>

</ol>

<p>
  This hook is useful for:
</p>

<ul>

  <li>
    Creating initial configuration files or support data under <code>APEX_SUPPORT_DIR</code>.
  </li>

  <li>
    Printing a welcome or usage message via <code>echo</code>.
  </li>

  <li>
    Running an interactive setup script that asks the user questions and writes config.
  </li>

</ul>

<p>
  If the <code>post_install</code> command exits with a non-zero status, Apex prints a warning but considers the plugin installed successfully (the clone is not rolled back).
</p>

<hr />
<h2 id="plugin-bundles-bundle-key">
  Plugin bundles (<code>bundle</code> key)
</h2>

<p>
  Sometimes it is convenient for a single repository to provide <strong>multiple related plugins</strong> as a bundle—for example, a “documentation” bundle that contains:
</p>

<ul>

  <li>
<code>kbd</code> – expands <code>{% kbd @3 %}</code> keyboard shortcuts
  </li>

  <li>
<code>prefpane</code> – expands <code>{% prefspane Advanced, Processor %}</code>
  </li>

  <li>
<code>menubar</code> – expands <code>{% menubar File, Open %}</code>
  </li>

</ul>

<p>
  Instead of creating a separate repo (and <code>plugin.yml</code>) for each, Apex supports a <strong>bundle</strong> syntax in <code>plugin.yml</code> when built with full YAML (libyaml) support.
</p>

<h3 id="bundle-structure">
  Bundle structure
</h3>

<p>
  A <strong>bundle manifest</strong> has:
</p>

<ul>

  <li>
    Top-level metadata that applies to the bundle as a whole.
  </li>

  <li>
    A <code>bundle:</code> key whose value is a YAML sequence (array) of per-plugin configs.
  </li>

</ul>

<p>
  Example:
</p>

<pre><code class="highlight language-yaml"><span class="nn">---</span>
<span class="na">id</span><span class="pi">:</span> <span class="s">documentation</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Documentation helpers</span>
<span class="na">author</span><span class="pi">:</span> <span class="s">Brett Terpstra</span>
<span class="na">description</span><span class="pi">:</span> <span class="s">A bundle of documentation-related helpers (kbd, menubar, prefpane).</span>
<span class="na">homepage</span><span class="pi">:</span> <span class="s">https://github.com/ApexMarkdown/apex-plugin-documentation</span>
<span class="na">repo</span><span class="pi">:</span> <span class="s">https://github.com/ApexMarkdown/apex-plugin-documentation.git</span>

<span class="c1"># Each entry in bundle defines a child plugin</span>
<span class="na">bundle</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s">kbd</span>
    <span class="na">title</span><span class="pi">:</span> <span class="s">Keyboard Shortcuts</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s">Render {% kbd ... %} key combos to HTML &lt;kbd&gt; elements</span>
    <span class="na">phase</span><span class="pi">:</span> <span class="s">pre_parse</span>
    <span class="na">priority</span><span class="pi">:</span> <span class="m">100</span>
    <span class="na">handler</span><span class="pi">:</span>
      <span class="na">command</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ruby</span><span class="nv"> </span><span class="s">kbd_plugin.rb"</span>

  <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s">menubar</span>
    <span class="na">title</span><span class="pi">:</span> <span class="s">Menubar Paths</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s">Render {% menubar File, Open %} to a styled menu path</span>
    <span class="na">phase</span><span class="pi">:</span> <span class="s">pre_parse</span>
    <span class="na">handler</span><span class="pi">:</span>
      <span class="na">command</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ruby</span><span class="nv"> </span><span class="s">menubar_plugin.rb"</span>

  <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s">prefspane</span>
    <span class="na">title</span><span class="pi">:</span> <span class="s">Preferences Pane</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s">Render {% prefspane Advanced, Processor %} to a styled preference path</span>
    <span class="na">phase</span><span class="pi">:</span> <span class="s">pre_parse</span>
    <span class="na">handler</span><span class="pi">:</span>
      <span class="na">command</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ruby</span><span class="nv"> </span><span class="s">prefspane_plugin.rb"</span>
<span class="nn">---</span>
</code></pre>

<p>
  Apex will treat this as <strong>three distinct plugins</strong>:
</p>

<ul>

  <li>
<code>kbd</code>
  </li>

  <li>
<code>menubar</code>
  </li>

  <li>
<code>prefspane</code>
  </li>

</ul>

<p>
  all sourced from the same repository and manifest.
</p>

<h3 id="inheritance-and-overrides">
  Inheritance and overrides
</h3>

<p>
  When loading a bundle, Apex:
</p>

<ol>

  <li>
    Parses the top-level mapping (the “bundle header”), and the <code>bundle:</code> sequence, using full YAML.
  </li>

  <li>
    For each entry in <code>bundle</code>:
    <ul>

      <li>
        Starts with the <strong>top-level metadata</strong>.
      </li>

      <li>
        Applies the child entry’s fields as <strong>overrides</strong>.
      </li>

    </ul>

  </li>

</ol>

<p>
  Concretely:
</p>

<ul>

  <li>
    Top-level <code>author</code>, <code>homepage</code>, and <code>repo</code> are used as defaults for every child plugin.
  </li>

  <li>
    Each child <strong>must</strong> define its own:
    <ul>

      <li>
<code>id</code>
      </li>

      <li>
<code>phase</code>
      </li>

      <li>
        and either:
        <ul>

          <li>
<code>handler.command</code> (external plugin), or
          </li>

          <li>
<code>pattern</code> + <code>replacement</code> (declarative plugin)
          </li>

        </ul>

      </li>

    </ul>

  </li>

  <li>
    A child <strong>may</strong> also define its own:
    <ul>

      <li>
<code>title</code>
      </li>

      <li>
<code>description</code>
      </li>

      <li>
<code>priority</code>
      </li>

      <li>
<code>timeout_ms</code>
      </li>

      <li>
<code>flags</code>
      </li>

    </ul>

  </li>

  <li>
    If a child defines <code>author</code>, <code>homepage</code>, or <code>repo</code>, those values <strong>override</strong> the bundle-level defaults for that child only.
  </li>

</ul>

<p>
  After merging, each child is turned into a normal internal plugin record, just like if it had its own standalone <code>plugin.yml</code>.
</p>

<h3 id="behavior-and-limitations">
  Behavior and limitations
</h3>

<ul>

  <li>
<strong>    Discovery</strong>:
    <ul>

      <li>
        Bundle manifests live in the same places as normal plugins:
        <ul>

          <li>
            Project-local: <code>.apex/plugins/documentation/plugin.yml</code>
          </li>

          <li>
            Global: <code>~/.config/apex/plugins/documentation/plugin.yml</code>
          </li>

        </ul>

      </li>

    </ul>

  </li>

  <li>
<strong>    Phases and IDs</strong>:
    <ul>

      <li>
        Each child plugin’s <code>id</code> and <code>phase</code> are used when registering and running plugins.
      </li>

      <li>
        All normal rules apply:
        <ul>

          <li>
            IDs must be unique across all loaded plugins.
          </li>

          <li>
            Phase must be <code>pre_parse</code> or <code>post_render</code> (for now).
          </li>

        </ul>

      </li>

    </ul>

  </li>

  <li>
<strong>    libyaml requirement</strong>:
    <ul>

      <li>
        The <code>bundle</code> syntax relies on full YAML parsing via <code>libyaml</code>.
      </li>

      <li>
        If Apex is built <strong>without</strong> libyaml support, <code>bundle:</code> is not recognized as a special structure; in that case, you should fall back to separate manifests for each plugin if you need cross-platform behavior on builds that omit libyaml.
      </li>

    </ul>

  </li>

</ul>

<hr />
<h2 id="external-handler-plugins-scriptscommands">
  External handler plugins (scripts/commands)
</h2>

<p>
  An external handler plugin defines a <strong>command</strong> to run, which receives JSON on stdin and writes the transformed text to stdout.
</p>

<h3 id="manifest-fields">
  Manifest fields
</h3>

<pre><code class="highlight language-yaml"><span class="nn">---</span>
<span class="na">id</span><span class="pi">:</span> <span class="s">kbd</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Keyboard Shortcuts</span>
<span class="na">author</span><span class="pi">:</span> <span class="s">Brett Terpstra</span>
<span class="na">description</span><span class="pi">:</span> <span class="s">Render {% kbd ... %} key combos to HTML</span>
<span class="na">homepage</span><span class="pi">:</span> <span class="s">https://github.com/ApexMarkdown/apex-kbd-plugin</span>
<span class="na">repo</span><span class="pi">:</span> <span class="s">https://github.com/ApexMarkdown/apex-kbd-plugin.git</span>
<span class="na">phase</span><span class="pi">:</span> <span class="s">pre_parse</span>
<span class="na">priority</span><span class="pi">:</span> <span class="m">100</span>
<span class="na">timeout_ms</span><span class="pi">:</span> <span class="m">0</span>        <span class="c1"># optional</span>
<span class="na">handler</span><span class="pi">:</span>
  <span class="na">command</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ruby</span><span class="nv"> </span><span class="s">kbd_plugin.rb"</span>
<span class="nn">---</span>
</code></pre>

<ul>

  <li>
<strong><code>id</code></strong>: unique identifier (no spaces recommended).
  </li>

  <li>
<strong><code>title</code>/<code>author</code>/<code>description</code>/<code>homepage</code>/<code>repo</code></strong>: optional metadata used by listing/installation tools and plugin directories.
  </li>

  <li>
<strong><code>phase</code></strong>: <code>pre_parse</code> or <code>post_render</code>.
  </li>

  <li>
<strong><code>priority</code></strong>: integer; lower runs first.
  </li>

  <li>
<strong><code>timeout_ms</code></strong>: optional; host may use this as a soft cap.
  </li>

  <li>
<strong><code>handler.command</code></strong>:
    <ul>

      <li>
        Executed via <code>sh -c</code> from the plugin’s directory (<code>APEX_PLUGIN_DIR</code>).
      </li>

      <li>
        Must be runnable in your environment (e.g. Ruby installed if you use <code>ruby</code>).
      </li>

    </ul>

  </li>

</ul>

<h3 id="json-protocol">
  JSON protocol
</h3>

<p>
  For text phases (<code>pre_parse</code>, <code>post_render</code>), Apex sends your command a JSON object on <strong>stdin</strong>:
</p>

<pre><code class="highlight language-json"><span class="p">{</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"plugin_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kbd"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pre_parse"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raw or rendered text here"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>
  Your plugin should:
</p>

<ol>

  <li>
    Read all of stdin.
  </li>

  <li>
    Parse the JSON.
  </li>

  <li>
    Transform the <code>text</code> field.
  </li>

  <li>
    Print the <strong>new text only</strong> to stdout (no extra JSON, headers, or logging).
  </li>

</ol>

<p>
  If your plugin fails, times out, or prints nothing, Apex will treat it as a no-op and continue gracefully.
</p>

<hr />
<h2 id="declarative-regex-plugins-no-scripting">
  Declarative regex plugins (no scripting)
</h2>

<p>
  For many cases, you don’t need a script at all. A <strong>declarative regex plugin</strong> uses <code>regex.h</code> inside Apex for fast in-process search/replace.
</p>

<h3 id="manifest-fields">
  Manifest fields
</h3>

<pre><code class="highlight language-yaml"><span class="nn">---</span>
<span class="na">id</span><span class="pi">:</span> <span class="s">emoji-span</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Emoji span wrapper</span>
<span class="na">author</span><span class="pi">:</span> <span class="s">Brett Terpstra</span>
<span class="na">description</span><span class="pi">:</span> <span class="s">Wrap 📝 markers in a span for styling</span>
<span class="na">homepage</span><span class="pi">:</span> <span class="s">https://github.com/ApexMarkdown/apex-emoji-plugin</span>
<span class="na">repo</span><span class="pi">:</span> <span class="s">https://github.com/ApexMarkdown/apex-emoji-plugin.git</span>
<span class="na">phase</span><span class="pi">:</span> <span class="s">post_render</span>
<span class="na">pattern</span><span class="pi">:</span> <span class="s2">"</span><span class="s">(:[a-zA-Z0-9_+-]+:)"</span>
<span class="na">replacement</span><span class="pi">:</span> <span class="s2">"</span><span class="s">&lt;span</span><span class="nv"> </span><span class="s">class=</span><span class="se">\"</span><span class="s">emoji</span><span class="se">\"</span><span class="s">&gt;$1&lt;/span&gt;"</span>
<span class="na">flags</span><span class="pi">:</span> <span class="s2">"</span><span class="s">i"</span>          <span class="c1"># optional: e.g. i, m, s</span>
<span class="na">priority</span><span class="pi">:</span> <span class="m">200</span>
<span class="na">timeout_ms</span><span class="pi">:</span> <span class="m">0</span>
<span class="nn">---</span>
</code></pre>

<ul>

  <li>
<strong><code>pattern</code></strong>: POSIX regular expression (compiled via <code>regcomp</code>).
  </li>

  <li>
<strong><code>replacement</code></strong>:
    <ul>

      <li>
        Replacement string with capture groups like <code>$1</code>, <code>$2</code>, etc.
      </li>

      <li>
        Runs repeatedly across the text until no more matches.
      </li>

    </ul>

  </li>

  <li>
<strong><code>flags</code></strong> (optional):
    <ul>

      <li>
        Currently supports:
        <ul>

          <li>
<code>i</code> – case-insensitive
          </li>

          <li>
<code>m</code> – multi-line
          </li>

          <li>
<code>s</code> – dot matches newline (if supported by underlying regex flavor)
          </li>

        </ul>

      </li>

    </ul>

  </li>

</ul>

<p>
  This is ideal when:
</p>

<ul>

  <li>
    You only need straightforward pattern substitution.
  </li>

  <li>
    Performance matters and you want to avoid <code>fork/exec</code>.
  </li>

</ul>

<hr />
<h2 id="support-directory-and-environment-variables">
  Support directory and environment variables
</h2>

<p>
  Plugins sometimes need a place to store <strong>cache/data files</strong> or know which file is being processed. To keep plugin code directories clean and give plugins enough context, Apex exposes a <strong>support directory</strong> and several environment variables.
</p>

<h3 id="support-directory-apexsupportdir">
  Support directory (<code>APEX_SUPPORT_DIR</code>)
</h3>

<p>
  Base path:
</p>

<ul>

  <li>
    If <code>$XDG_CONFIG_HOME</code> is set:
    <ul>

      <li>
<code>$XDG_CONFIG_HOME/apex/support/</code>
      </li>

    </ul>

  </li>

  <li>
    Otherwise:
    <ul>

      <li>
<code>~/.config/apex/support/</code>
      </li>

    </ul>

  </li>

</ul>

<p>
  For each plugin, Apex creates:
</p>

<pre><code class="highlight language-text">APEX_SUPPORT_DIR/&lt;plugin-id&gt;/
</code></pre>

<p>
  You can safely write caches, logs, or temporary files there.
</p>

<h3 id="environment-variables-for-external-plugins">
  Environment variables for external plugins
</h3>

<p>
  When Apex runs an external handler plugin, it sets:
</p>

<ul>

  <li>

    <p>
<strong><code>APEX_PLUGIN_DIR</code></strong>
    </p>

    <ul>

      <li>
        Filesystem path to the plugin’s directory (where <code>plugin.yml</code> lives).
      </li>

      <li>
        Useful for loading sidecar files, templates, etc.
      </li>

    </ul>

  </li>

  <li>

    <p>
<strong><code>APEX_SUPPORT_DIR</code></strong>
    </p>

    <ul>

      <li>
        Base support directory as described above.
      </li>

      <li>
        You’ll usually combine it with your plugin id, e.g. <code>$APEX_SUPPORT_DIR/kbd</code>.
      </li>

    </ul>

  </li>

  <li>

    <p>
<strong><code>APEX_FILE_PATH</code></strong>
    </p>

    <ul>

      <li>
        When Apex is invoked on a file (for example <code>apex path/to/file.md</code>), this is the <strong>original path</strong> that was passed on the command line. Plugins can use this to make decisions based on path, directory, or extension.
      </li>

      <li>
        When Apex reads from stdin (for example <code>cat file.md | apex</code>), <code>APEX_FILE_PATH</code> is set to:
        <ul>

          <li>
            The current <code>base_directory</code> (if one was set via <code>--base-dir</code> or metadata), or
          </li>

          <li>
            An empty string (<code>&quot;&quot;</code>) if no base directory is known.
          </li>

        </ul>

      </li>

      <li>
        An empty <code>APEX_FILE_PATH</code> is a clear signal that there is no concrete source file path.
      </li>

    </ul>

  </li>

</ul>

<p>
  All of these variables apply only during the external command’s execution and are restored afterward.
</p>

<hr />
<h2 id="installing-plugins-from-the-directory">
  Installing plugins from the directory
</h2>

<p>
  Apex can install plugins directly from a central directory hosted in the <code>ApexMarkdown/apex-plugins</code> GitHub repository. The directory is published as a JSON file:
</p>

<ul>

  <li>
<code>https://github.com/ApexMarkdown/apex-plugins</code> (repository)
  </li>

  <li>
<code>https://raw.githubusercontent.com/ApexMarkdown/apex-plugins/refs/heads/main/apex-plugins.json</code> (JSON index)
  </li>

</ul>

<p>
  Each entry in <code>apex-plugins.json</code> looks like this:
</p>

<pre><code class="highlight language-json"><span class="p">{</span><span class="w">
  </span><span class="nl">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kbd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Keyboard Shortcuts"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Renders {% kbd %} tags as &lt;kbd&gt; elements."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Brett Terpstra"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"homepage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://github.com/ApexMarkdown/apex-plugin-kbd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"repo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://github.com/ApexMarkdown/apex-plugin-kbd"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<ul>

  <li>
<strong><code>id</code></strong> must match the plugin <code>id</code> declared in that repo’s <code>plugin.yml</code>.
  </li>

  <li>
<strong><code>repo</code></strong> is the canonical Git URL that Apex will pass to <code>git clone</code>.
  </li>

  <li>
<strong><code>title</code></strong>, <strong><code>author</code></strong>, <strong><code>description</code></strong>, and <strong><code>homepage</code></strong> are used for human-readable listings.
  </li>

</ul>

<h3 id="listing-available-plugins">
  Listing available plugins
</h3>

<p>
  To see what plugins are available in the central directory, use:
</p>

<pre><code class="highlight language-bash">apex <span class="nt">--list-plugins</span>
</code></pre>

<p>
  This command:
</p>

<ul>

  <li>
    Fetches <code>apex-plugins.json</code> using <code>curl</code>.
  </li>

  <li>
    Parses the <code>plugins</code> array.
  </li>

  <li>
    Prints a concise listing to stdout, for example:
  </li>

</ul>

<pre><code class="highlight language-text">## Installed Plugins

kbd                  - Keyboard Shortcuts  (author: Brett Terpstra)
    Renders {% kbd %} tags as &lt;kbd&gt; elements.
    homepage: https://github.com/ApexMarkdown/apex-kbd-plugin

---

## Available Plugins

emoji-span           - Emoji span wrapper  (author: Brett Terpstra)
    Wrap 📝 markers in a span for styling.
    homepage: https://github.com/ApexMarkdown/apex-emoji-plugin
</code></pre>

<h3 id="installing-a-plugin">
  Installing a plugin
</h3>

<p>
  The <code>--install-plugin</code> command accepts three types of arguments:
</p>

<ol>

  <li>

    <p>
<strong>      Plugin ID from the directory</strong> (recommended for curated plugins):
    </p>

<pre><code class="highlight language-bash">apex <span class="nt">--install-plugin</span> kbd
</code></pre>

  <p>
    This will:
  </p>

  <ol>

    <li>
      Fetch <code>apex-plugins.json</code> from the central directory.
    </li>

    <li>
      Find the entry whose <code>id</code> matches <code>kbd</code>.
    </li>

    <li>
      Read the <code>repo</code> field and clone the repository.
    </li>

    <li>
      Install into <code>$XDG_CONFIG_HOME/apex/plugins/kbd</code> or <code>~/.config/apex/plugins/kbd</code>.
    </li>

  </ol>

</li>

<li>

  <p>
<strong>    Full Git URL</strong> (for plugins not in the directory):
  </p>

<pre><code class="highlight language-bash">apex <span class="nt">--install-plugin</span> https://github.com/ttscoff/apex-plugin-kbd.git
</code></pre>

<p>
  Also works with SSH URLs:
</p>

<pre><code class="highlight language-bash">apex <span class="nt">--install-plugin</span> git@github.com:ttscoff/apex-plugin-kbd.git
</code></pre>

</li>

<li>

  <p>
<strong>    GitHub shorthand</strong> (<code>user/repo</code> format):
  </p>

<pre><code class="highlight language-bash">apex <span class="nt">--install-plugin</span> ttscoff/apex-plugin-kbd
</code></pre>

<p>
  This is automatically expanded to <code>https://github.com/ttscoff/apex-plugin-kbd.git</code>.
</p>

</li>

</ol>

<h4 id="security-confirmation-for-direct-installs">
  Security confirmation for direct installs
</h4>

<p>
  When installing from a <strong>direct Git URL or GitHub shorthand</strong> (i.e., anything outside the curated directory), Apex will prompt:
</p>

<pre><code class="highlight language-text">Apex plugins execute unverified code. Only install plugins from trusted sources.
Continue? (y/n)
</code></pre>

<ul>

  <li>
    Answer <code>y</code> or <code>Y</code> to proceed with the installation.
  </li>

  <li>
    Any other response (including <code>n</code>, <code>N</code>, or just pressing Enter) aborts the install.
  </li>

</ul>

<p>
<strong>  Directory ID installs</strong> (like <code>--install-plugin kbd</code> from the curated list) do <strong>not</strong> show this prompt, as those plugins have been reviewed and included in the central directory.
</p>

<h4 id="installation-process">
  Installation process
</h4>

<p>
  For all installation methods, Apex will:
</p>

<ol>

  <li>

    <p>
      Create (if necessary) the user plugin directory:
    </p>

    <ul>

      <li>
<code>$XDG_CONFIG_HOME/apex/plugins</code> if <code>$XDG_CONFIG_HOME</code> is set, or
      </li>

      <li>
<code>~/.config/apex/plugins</code> otherwise.
      </li>

    </ul>

  </li>

  <li>

    <p>
      For <strong>direct URL/shorthand installs</strong>:
    </p>

    <ul>

      <li>
        Clone the repository into a temporary directory.
      </li>

      <li>
        Read <code>plugin.yml</code> (or <code>plugin.yaml</code>) from the cloned repo to determine the plugin <code>id</code>.
      </li>

      <li>
        Move the cloned directory to the final location: <code>~/.config/apex/plugins/&lt;id&gt;/</code>.
      </li>

    </ul>

  </li>

  <li>

    <p>
      For <strong>directory ID installs</strong>:
    </p>

    <ul>

      <li>
        Clone directly into the final location: <code>~/.config/apex/plugins/&lt;id&gt;/</code>.
      </li>

    </ul>

  </li>

  <li>

    <p>
      If the target directory already exists, Apex will refuse to overwrite it and print an error. You can remove or rename the existing directory and rerun <code>--install-plugin</code> to reinstall.
    </p>

  </li>

  <li>

    <p>
      After successful cloning, look for a <code>post_install</code> hook in <code>plugin.yml</code> and run it if present.
    </p>

  </li>

</ol>

<blockquote>

  <p>
<strong>    Security note:</strong> Apex plugins execute unverified code. Only install plugins from trusted sources. When installing from a direct Git URL or GitHub repo name, you will be prompted to confirm before the plugin is cloned.
  </p>

</blockquote>

<p>
  Once installed, the plugin is just like any other user-global plugin:
</p>

<ul>

  <li>
    It will be discovered from <code>$XDG_CONFIG_HOME/apex/plugins</code> or <code>~/.config/apex/plugins</code>.
  </li>

  <li>
    You still need to enable plugins via <code>--plugins</code> or metadata (<code>plugins: true</code>).
  </li>

</ul>

<p>
  If you are authoring a plugin for inclusion in the directory:
</p>

<ul>

  <li>
    Make sure your <code>plugin.yml</code> has at least <code>id</code>, <code>phase</code>, and either <code>handler.command</code> or <code>pattern</code>/<code>replacement</code>.
  </li>

  <li>
    Add <code>title</code>, <code>author</code>, <code>description</code>, <code>homepage</code>, and <code>repo</code> to <code>plugin.yml</code> so directory tools and installers have complete metadata.
  </li>

  <li>
    Ensure the <code>plugin.yml</code> and any scripts live at the <strong>root</strong> of the Git repository referenced by <code>repo</code>.
  </li>

</ul>

<h3 id="uninstalling-a-plugin">
  Uninstalling a plugin
</h3>

<p>
  To remove a locally installed plugin, use:
</p>

<pre><code class="highlight language-bash">apex <span class="nt">--uninstall-plugin</span> kbd
</code></pre>

<p>
  The <code>--uninstall-plugin</code> command:
</p>

<ul>

  <li>
    Verifies that the plugin directory exists under the user plugin path (<code>$XDG_CONFIG_HOME/apex/plugins</code> or <code>~/.config/apex/plugins</code>).
  </li>

  <li>
    Prompts for confirmation before deleting the plugin directory.
  </li>

  <li>
    Removes only the plugin’s directory; support data under <code>.../apex/support/&lt;plugin-id&gt;/</code> is left intact.
  </li>

</ul>

<p>
  This command only works for plugins installed in the user plugin directory. Project-local plugins (in <code>.apex/plugins/</code>) must be removed manually by deleting the plugin directory.
</p>

<h2 id="share-your-plugin">
  Share Your Plugin
</h2>

<p>
  To request that your plugin be added to the central directory:
</p>

<ol>

  <li>
<strong>    Fork</strong> the <code>ApexMarkdown/apex-plugins</code> repository on GitHub to your own account or organization.
  </li>

  <li>
<strong>    Clone</strong> your fork locally and create a new branch for your plugin entry (for example, <code>add-kbd-plugin</code>).
  </li>

  <li>
    Open the <code>apex-plugins.json</code> file in the root of your fork and add a new object to the <code>plugins</code> array with the fields:
    <ul>

      <li>
<code>id</code> (matching the <code>id</code> in your plugin’s <code>plugin.yml</code>),
      </li>

      <li>
<code>title</code>,
      </li>

      <li>
<code>description</code>,
      </li>

      <li>
<code>author</code>,
      </li>

      <li>
<code>homepage</code>,
      </li>

      <li>
<code>repo</code> (canonical Git URL for the plugin repo).
      </li>

    </ul>

  </li>

  <li>
    Commit your changes and <strong>push</strong> the branch to your fork on GitHub.
  </li>

  <li>
    From your fork, open a <strong>pull request</strong> against the <code>main</code> branch of <code>ApexMarkdown/apex-plugins</code>, briefly describing your plugin and confirming that the <code>id</code> and <code>repo</code> match your published plugin repository.
  </li>

  <li>
    Once the pull request is reviewed and merged, your plugin will show up in <code>apex --list-plugins</code> and be installable via <code>apex --install-plugin &lt;id&gt;</code>.
  </li>

</ol>

<hr />
<h2 id="example-kbd-liquid-tag-plugin">
  Example: <code>kbd</code> liquid tag plugin
</h2>

<p>
  This example shows how to support a liquid-style <code>{% kbd ... %}</code> syntax, turning key combos into <code>&lt;kbd&gt;</code> markup.
</p>

<h3 id="directory-layout">
  Directory layout
</h3>

<p>
  Project-local example:
</p>

<pre><code class="highlight language-text">.apex/
  plugins/
    kbd/
      plugin.yml
      kbd_plugin.rb
</code></pre>

<p>
  Global example:
</p>

<pre><code class="highlight language-text">~/.config/apex/plugins/
  kbd/
    plugin.yml
    kbd_plugin.rb
</code></pre>

<h3 id="pluginyml">
<code>plugin.yml</code>
</h3>

<pre><code class="highlight language-yaml"><span class="nn">---</span>
<span class="na">id</span><span class="pi">:</span> <span class="s">kbd</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Keyboard Shortcuts</span>
<span class="na">author</span><span class="pi">:</span> <span class="s">Brett Terpstra</span>
<span class="na">description</span><span class="pi">:</span> <span class="s">Render {% kbd ... %} key combos to HTML &lt;kbd&gt; elements</span>
<span class="na">homepage</span><span class="pi">:</span> <span class="s">https://github.com/ApexMarkdown/apex-kbd-plugin</span>
<span class="na">repo</span><span class="pi">:</span> <span class="s">https://github.com/ApexMarkdown/apex-kbd-plugin.git</span>
<span class="na">phase</span><span class="pi">:</span> <span class="s">pre_parse</span>
<span class="na">priority</span><span class="pi">:</span> <span class="m">100</span>
<span class="na">timeout_ms</span><span class="pi">:</span> <span class="m">0</span>
<span class="na">handler</span><span class="pi">:</span>
  <span class="na">command</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ruby</span><span class="nv"> </span><span class="s">kbd_plugin.rb"</span>
<span class="nn">---</span>
</code></pre>

<h3 id="kbdpluginrb-simplified-shape">
<code>kbd_plugin.rb</code> (simplified shape)
</h3>

<p>
  The full script lives in the <code>examples</code> directory of the Apex repo as a reference. Conceptually, it:
</p>

<ul>

  <li>
    Reads JSON from stdin.
  </li>

  <li>
    Extracts <code>text</code>.
  </li>

  <li>
    Replaces each <code>{% kbd ... %}</code> occurrence with properly formatted <code>&lt;kbd&gt;</code> HTML.
  </li>

  <li>
    Prints the full transformed text to stdout.
  </li>

</ul>

<p>
  A very abridged sketch:
</p>

<pre><code class="highlight language-ruby"><span class="c1">#!/usr/bin/env ruby</span>
<span class="nb">require</span> <span class="s2">"json"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="vg">$stdin</span><span class="p">.</span><span class="nf">read</span><span class="p">)</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">payload</span><span class="p">[</span><span class="s2">"text"</span><span class="p">]</span> <span class="o">||</span> <span class="s2">""</span>

<span class="c1"># ... helper methods for normalizing modifier names, etc. ...</span>

<span class="k">def</span> <span class="nf">render_kbd</span><span class="p">(</span><span class="n">markup</span><span class="p">)</span>
  <span class="c1"># convert markup like "^~@r" to HTML</span>
  <span class="c1"># returning something like:</span>
  <span class="c1">#   &lt;kbd&gt;⌃&lt;/kbd&gt;+&lt;kbd&gt;⌥&lt;/kbd&gt;+&lt;kbd&gt;⌘&lt;/kbd&gt;+&lt;kbd&gt;R&lt;/kbd&gt;</span>
<span class="k">end</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/\{%\s*kbd\s+([^%]+)%\}/</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">render_kbd</span><span class="p">(</span><span class="no">Regexp</span><span class="p">.</span><span class="nf">last_match</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="k">end</span>

<span class="nb">print</span> <span class="n">result</span>
</code></pre>

<p>
  You can customize this script as you like; the only requirement is that it obey the stdin JSON / stdout contract.
</p>

<hr />
<h2 id="example-memo-span-plugin-declarative">
  Example: <code>📝</code> span plugin (declarative)
</h2>

<p>
  This plugin turns <code>📝</code> tokens in the final HTML into <code>&lt;span class=&quot;emoji&quot;&gt;📝&lt;/span&gt;</code>.
</p>

<h3 id="directory-layout">
  Directory layout
</h3>

<pre><code class="highlight language-text">~/.config/apex/plugins/
  emoji/
    plugin.yml
</code></pre>

<h3 id="pluginyml">
<code>plugin.yml</code>
</h3>

<pre><code class="highlight language-yaml"><span class="nn">---</span>
<span class="na">id</span><span class="pi">:</span> <span class="s">emoji-span</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Emoji span wrapper</span>
<span class="na">author</span><span class="pi">:</span> <span class="s">Brett Terpstra</span>
<span class="na">description</span><span class="pi">:</span> <span class="s">Wrap 📝 markers in a span for styling</span>
<span class="na">homepage</span><span class="pi">:</span> <span class="s">https://github.com/ApexMarkdown/apex-emoji-plugin</span>
<span class="na">repo</span><span class="pi">:</span> <span class="s">https://github.com/ApexMarkdown/apex-emoji-plugin.git</span>
<span class="na">phase</span><span class="pi">:</span> <span class="s">post_render</span>
<span class="na">pattern</span><span class="pi">:</span> <span class="s2">"</span><span class="s">(:[a-zA-Z0-9_+-]+:)"</span>
<span class="na">replacement</span><span class="pi">:</span> <span class="s2">"</span><span class="s">&lt;span</span><span class="nv"> </span><span class="s">class=</span><span class="se">\"</span><span class="s">emoji</span><span class="se">\"</span><span class="s">&gt;$1&lt;/span&gt;"</span>
<span class="na">flags</span><span class="pi">:</span> <span class="s2">"</span><span class="s">i"</span>
<span class="na">priority</span><span class="pi">:</span> <span class="m">200</span>
<span class="na">timeout_ms</span><span class="pi">:</span> <span class="m">0</span>
<span class="nn">---</span>
</code></pre>

<p>
  Because this is a declarative plugin, <strong>no external command is run</strong>. Apex compiles the regex and runs the replacements internally.
</p>

<hr />
<h2 id="putting-it-all-together">
  Putting it all together
</h2>

<p>
  A typical workflow:
</p>

<ol>

  <li>

    <p>
<strong>      Create a plugin directory</strong>
    </p>

    <ul>

      <li>
        Project-local: <code>.apex/plugins/my-plugin/</code>
      </li>

      <li>
        Or global: <code>~/.config/apex/plugins/my-plugin/</code>
      </li>

    </ul>

  </li>

  <li>

    <p>
<strong>      Add <code>plugin.yml</code></strong>
    </p>

    <ul>

      <li>
        Choose <code>phase</code> (<code>pre_parse</code> or <code>post_render</code>).
      </li>

      <li>
        Choose plugin type:
        <ul>

          <li>
            External: add <code>handler.command</code>.
          </li>

          <li>
            Declarative: add <code>pattern</code>, <code>replacement</code>, and optional <code>flags</code>.
          </li>

        </ul>

      </li>

      <li>
        Optionally, add metadata fields (<code>title</code>, <code>author</code>, <code>description</code>, <code>homepage</code>, <code>repo</code>) so your plugin shows up nicely in directories and can be auto-installed.
      </li>

      <li>
        For bundles, use <code>bundle:</code> to define multiple related child plugins in one manifest.
      </li>

    </ul>

  </li>

  <li>

    <p>
<strong>      Add code (if external)</strong>
    </p>

    <ul>

      <li>
        Put your script alongside <code>plugin.yml</code>.
      </li>

      <li>
        Implement the JSON stdin → text stdout contract.
      </li>

    </ul>

  </li>

  <li>

    <p>
<strong>      Enable plugins</strong>
    </p>

    <ul>

      <li>
        Either:
        <ul>

          <li>
            Add <code>plugins: true</code> (or <code>enable-plugins: true</code>) to your document metadata, <strong>or</strong>
          </li>

          <li>
            Run with <code>--plugins</code> on the command line.
          </li>

        </ul>

      </li>

    </ul>

  </li>

  <li>

    <p>
<strong>      Test</strong>
    </p>

    <ul>

      <li>
        Run Apex on a sample document that exercises your plugin syntax.
      </li>

      <li>
        If something goes wrong, log to a file under <code>$APEX_SUPPORT_DIR/&lt;id&gt;/</code> rather than printing debugging output to stdout.
      </li>

    </ul>

  </li>

</ol>

<p>
  Once you’re comfortable, you can share the <code>plugin.yml</code> plus any scripts with others; they just need to drop the directory into their <code>.apex/plugins/</code> or <code>~/.config/apex/plugins/</code> and enable plugins as needed.
</p>


<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-troubleshooting" class="page">

    <h1 id="troubleshooting">
      Troubleshooting
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#troubleshooting">Troubleshooting</a><ul><li><a href="#build-issues">Build Issues</a><ul><li><a href="#cmake-not-found">CMake Not Found</a></li><li><a href="#compilation-errors">Compilation Errors</a></li><li><a href="#linking-errors">Linking Errors</a></li></ul></li><li><a href="#runtime-issues">Runtime Issues</a><ul><li><a href="#table-not-rendering">Table Not Rendering</a></li><li><a href="#header-ids-not-generated">Header IDs Not Generated</a></li><li><a href="#math-not-rendering">Math Not Rendering</a></li><li><a href="#wiki-links-not-working">Wiki Links Not Working</a></li><li><a href="#file-includes-not-working">File Includes Not Working</a></li></ul></li><li><a href="#output-issues">Output Issues</a><ul><li><a href="#no-output">No Output</a></li><li><a href="#html-not-formatted">HTML Not Formatted</a></li><li><a href="#missing-styles">Missing Styles</a></li></ul></li><li><a href="#mode-specific-issues">Mode-Specific Issues</a><ul><li><a href="#feature-not-available">Feature Not Available</a></li><li><a href="#id-format-wrong">ID Format Wrong</a></li></ul></li><li><a href="#api-issues">API Issues</a><ul><li><a href="#memory-leaks">Memory Leaks</a></li><li><a href="#thread-safety">Thread Safety</a></li><li><a href="#framework-not-found-xcode">Framework Not Found (Xcode)</a></li></ul></li><li><a href="#performance-issues">Performance Issues</a><ul><li><a href="#slow-conversion">Slow Conversion</a></li><li><a href="#high-memory-usage">High Memory Usage</a></li></ul></li><li><a href="#getting-help">Getting Help</a></li><li><a href="#related">Related</a></li></ul></li></ul></nav>

    <p>
      Common issues and solutions when using Apex.
    </p>

    <h2 id="build-issues">
      Build Issues
    </h2>

    <h3 id="cmake-not-found">
      CMake Not Found
    </h3>

    <p>
<strong>      Error:</strong> <code>cmake: command not found</code>
    </p>

    <p>
<strong>      Solution:</strong>
    </p>

    <ul>

      <li>
        macOS: <code>brew install cmake</code>
      </li>

      <li>
        Ubuntu/Debian: <code>sudo apt-get install cmake</code>
      </li>

      <li>
        Fedora: <code>sudo dnf install cmake</code>
      </li>

    </ul>

    <h3 id="compilation-errors">
      Compilation Errors
    </h3>

    <p>
<strong>      Error:</strong> Compiler not found or incompatible
    </p>

    <p>
<strong>      Solution:</strong>
    </p>

    <ul>

      <li>
        macOS: Install Xcode Command Line Tools: <code>xcode-select --install</code>
      </li>

      <li>
        Linux: Install build essentials: <code>sudo apt-get install build-essential</code>
      </li>

    </ul>

    <h3 id="linking-errors">
      Linking Errors
    </h3>

    <p>
<strong>      Error:</strong> <code>undefined reference to apex_*</code>
    </p>

    <p>
<strong>      Solution:</strong>
    </p>

    <ul>

      <li>
        Ensure library is built: <code>make</code> in build directory
      </li>

      <li>
        Check library path: <code>LD_LIBRARY_PATH</code> (Linux) or <code>DYLD_LIBRARY_PATH</code> (macOS)
      </li>

      <li>
        Verify linking: <code>-lapex</code> flag is present
      </li>

    </ul>

    <h2 id="runtime-issues">
      Runtime Issues
    </h2>

    <h3 id="table-not-rendering">
      Table Not Rendering
    </h3>

    <p>
<strong>      Problem:</strong> Tables appear as code or plain text
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Ensure tables are enabled: Don’t use <code>--no-tables</code>
      </li>

      <li>
        Check mode: Some modes disable tables
      </li>

      <li>
        Verify table syntax: Requires proper pipe alignment
      </li>

    </ul>

    <h3 id="header-ids-not-generated">
      Header IDs Not Generated
    </h3>

    <p>
<strong>      Problem:</strong> Headers don’t have <code>id</code> attributes
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Check if IDs are disabled: Remove <code>--no-ids</code> flag
      </li>

      <li>
        Verify mode: All modes generate IDs by default
      </li>

      <li>
        Check manual ID syntax: May be incorrectly formatted
      </li>

    </ul>

    <h3 id="math-not-rendering">
      Math Not Rendering
    </h3>

    <p>
<strong>      Problem:</strong> Math appears as plain text
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Ensure math is enabled: Don’t use <code>--no-math</code>
      </li>

      <li>
        Check mode: CommonMark and GFM modes disable math
      </li>

      <li>
        Verify MathJax/KaTeX: Apex outputs HTML, you need a math renderer
      </li>

    </ul>

    <h3 id="wiki-links-not-working">
      Wiki Links Not Working
    </h3>

    <p>
<strong>      Problem:</strong> Wiki links appear as plain text
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Enable wiki links: Use <code>--wikilinks</code> flag (disabled by default in all modes)
      </li>

      <li>
        Check syntax: <code>[[Page]]</code> not <code>[Page]</code>
      </li>

      <li>
        Example: <code>apex document.md --wikilinks</code>
      </li>

    </ul>

    <h3 id="file-includes-not-working">
      File Includes Not Working
    </h3>

    <p>
<strong>      Problem:</strong> Include syntax not processed
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Enable includes: Use <code>--includes</code> flag (enabled by default in unified mode)
      </li>

      <li>
        Check file paths: Relative to document or use <code>base_directory</code> in API
      </li>

      <li>
        Verify syntax: `` or <code>{{file.md}}</code>
      </li>

    </ul>

    <h2 id="output-issues">
      Output Issues
    </h2>

    <h3 id="no-output">
      No Output
    </h3>

    <p>
<strong>      Problem:</strong> Command produces no output
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Check input: Verify file exists or stdin has content
      </li>

      <li>
        Check errors: Run with verbose output if available
      </li>

      <li>
        Verify mode: Some modes may filter content
      </li>

    </ul>

    <h3 id="html-not-formatted">
      HTML Not Formatted
    </h3>

    <p>
<strong>      Problem:</strong> HTML is all on one line
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Use <code>--pretty</code> flag for formatted output
      </li>

      <li>
        Check if pretty printing is disabled in options
      </li>

    </ul>

    <h3 id="missing-styles">
      Missing Styles
    </h3>

    <p>
<strong>      Problem:</strong> Standalone document has no styling
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Add stylesheet: <code>--style styles.css</code>
      </li>

      <li>
        Use inline styles: Apex includes basic default styles
      </li>

      <li>
        Check CSS path: Ensure file exists and path is correct
      </li>

    </ul>

    <h2 id="mode-specific-issues">
      Mode-Specific Issues
    </h2>

    <h3 id="feature-not-available">
      Feature Not Available
    </h3>

    <p>
<strong>      Problem:</strong> Syntax feature doesn’t work
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Check mode: Feature may not be available in current mode
      </li>

      <li>
        Switch to unified mode: <code>--mode unified</code> has all features
      </li>

      <li>
        See <a href="#modes" onclick="showPage('modes'); return false;">Modes</a> for feature availability
      </li>

    </ul>

    <h3 id="id-format-wrong">
      ID Format Wrong
    </h3>

    <p>
<strong>      Problem:</strong> Header IDs don’t match expected format
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Check mode: Each mode has its own ID format
      </li>

      <li>
        Override format: Use <code>--id-format</code> in unified mode
      </li>

      <li>
        See <a href="#header-ids" onclick="showPage('header-ids'); return false;">Header IDs</a> for format details
      </li>

    </ul>

    <h2 id="api-issues">
      API Issues
    </h2>

    <h3 id="memory-leaks">
      Memory Leaks
    </h3>

    <p>
<strong>      Problem:</strong> Application memory usage grows
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Free all strings: Always call <code>apex_free_string()</code> on returned strings
      </li>

      <li>
        Check for NULL: Don’t free NULL pointers (safe, but unnecessary)
      </li>

      <li>
        Reuse options: Create options once, reuse for multiple conversions
      </li>

    </ul>

    <h3 id="thread-safety">
      Thread Safety
    </h3>

    <p>
<strong>      Problem:</strong> Crashes or incorrect output in multi-threaded code
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Use separate options: Each thread needs its own <code>apex_options</code>
      </li>

      <li>
        Don’t share nodes: Document nodes are not thread-safe
      </li>

      <li>
        See <a href="#c-api" onclick="showPage('c-api'); return false;">C API</a> for thread safety details
      </li>

    </ul>

    <h3 id="framework-not-found-xcode">
      Framework Not Found (Xcode)
    </h3>

    <p>
<strong>      Problem:</strong> <code>Apex.framework</code> not found at runtime
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Embed framework: Set to “Embed &amp; Sign” in Xcode
      </li>

      <li>
        Check search paths: Verify framework search paths
      </li>

      <li>
        Verify architecture: Ensure framework matches app architecture
      </li>

    </ul>

    <h2 id="performance-issues">
      Performance Issues
    </h2>

    <h3 id="slow-conversion">
      Slow Conversion
    </h3>

    <p>
<strong>      Problem:</strong> Conversion takes too long
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Disable unused features: Turn off extensions you don’t need
      </li>

      <li>
        Check input size: Large documents take longer
      </li>

      <li>
        Profile: Use profiling tools to identify bottlenecks
      </li>

    </ul>

    <p>
      You can also enable Apex’s built-in profiling output with environment variables: setting <code>APEX_PROFILE=1</code> (or <code>yes</code>/<code>true</code>) will print per-phase timings from the core converter (e.g. metadata, citations, autolinks) to stderr, while <code>APEX_PROFILE_PLUGINS=1</code> enables detailed timing for plugin execution, including a total time for each plugin phase (<code>pre_parse</code> and <code>post_render</code>) and individual timings for every discovered plugin; this is especially useful for tracking down slow external handlers or regex plugins—run commands like <code>APEX_PROFILE_PLUGINS=1 apex --plugins input.md &gt; /dev/null</code> to capture just the timing lines.
    </p>

    <h3 id="high-memory-usage">
      High Memory Usage
    </h3>

    <p>
<strong>      Problem:</strong> Application uses too much memory
    </p>

    <p>
<strong>      Solutions:</strong>
    </p>

    <ul>

      <li>
        Free strings promptly: Don’t keep HTML strings longer than needed
      </li>

      <li>
        Process in chunks: For very large documents, consider splitting
      </li>

      <li>
        Check for leaks: Use memory profiling tools
      </li>

    </ul>

    <h2 id="getting-help">
      Getting Help
    </h2>

    <p>
      If you encounter issues not covered here:
    </p>

    <ol>

      <li>
        Check the <a href="#syntax" onclick="showPage('syntax'); return false;">Syntax</a> page for correct syntax
      </li>

      <li>
        Review <a href="#modes" onclick="showPage('modes'); return false;">Modes</a> to ensure feature is available
      </li>

      <li>
        See <a href="#command-line-options" onclick="showPage('command-line-options'); return false;">Command Line Options</a> for flag usage
      </li>

      <li>
        Check <a href="#c-api" onclick="showPage('c-api'); return false;">C API</a> for programmatic issues
      </li>

    </ol>

    <h2 id="related">
      Related
    </h2>

    <ul>

      <li>
<a href="#installation" onclick="showPage('installation'); return false;">        Installation</a> - Build and installation issues
      </li>

      <li>
<a href="#usage" onclick="showPage('usage'); return false;">        Usage</a> - Usage examples
      </li>

      <li>
<a href="#c-api" onclick="showPage('c-api'); return false;">        C API</a> - API-specific troubleshooting
      </li>

    </ul>

  
<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div><div id="page-credits" class="page">

    <h1 id="credits">
      Credits
    </h1>
<nav class="page-toc" id="page-toc-top"><ul><li><a href="#credits">Credits</a></li></ul></nav>

    <p>
      Apex builds upon the work of several excellent Markdown projects:
    </p>

    <ul>

      <li>
<a href="https://commonmark.org">        CommonMark</a> - Specification and reference implementation for a standardized Markdown syntax
      </li>

      <li>
<a href="https://github.com/github/cmark-gfm">        cmark-gfm</a> - GitHub’s fork of cmark with GitHub Flavored Markdown extensions
      </li>

      <li>
<a href="https://kramdown.gettalong.org">        Kramdown</a> - A fast and extensible Markdown processor
      </li>

      <li>
<a href="https://fletcher.github.io/MultiMarkdown-6">        MultiMarkdown 6</a> - An extension of the Markdown syntax
      </li>

      <li>
<a href="https://mattgemmell.scot/">        TextIndex</a> by Matt Gemmell, a syntax for creating indices
      </li>

    </ul>

    <p>
      Apex brings together the best features from all of these projects into a unified, high-performance processor.
    </p>

  
<p>Copyright 2025 Brett Terpstra, All Rights Reserved | MIT License</p></div></div>
  <script>
  // Hamburger menu functionality
(function() {
  function initHamburgerMenu() {
    var hamburger = document.getElementById('hamburger-menu');
    var sidebar = document.querySelector('.main-toc, .sidebar');
    var overlay = document.getElementById('mobile-menu-overlay');

    if (!hamburger || !sidebar) return;

    function toggleMenu() {
      var isOpen = sidebar.classList.contains('mobile-open');
      if (isOpen) {
        sidebar.classList.remove('mobile-open');
        hamburger.classList.remove('active');
        if (overlay) overlay.classList.remove('active');
      } else {
        sidebar.classList.add('mobile-open');
        hamburger.classList.add('active');
        if (overlay) overlay.classList.add('active');
      }
    }

    hamburger.addEventListener('click', function(e) {
      e.stopPropagation();
      toggleMenu();
    });

    if (overlay) {
      overlay.addEventListener('click', function() {
        toggleMenu();
      });
    }

    // Close menu when clicking on a sidebar link (mobile only)
    if (window.innerWidth <= 768) {
      var sidebarLinks = sidebar.querySelectorAll('a');
      sidebarLinks.forEach(function(link) {
        link.addEventListener('click', function() {
          setTimeout(function() {
            sidebar.classList.remove('mobile-open');
            hamburger.classList.remove('active');
            if (overlay) overlay.classList.remove('active');
          }, 100);
        });
      });
    }

    // Close menu on window resize if going to desktop
    window.addEventListener('resize', function() {
      if (window.innerWidth > 768) {
        sidebar.classList.remove('mobile-open');
        hamburger.classList.remove('active');
        if (overlay) overlay.classList.remove('active');
      }
    });
  }

  // Initialize when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initHamburgerMenu);
  } else {
    initHamburgerMenu();
  }
})();

  function showPage(pageId) {
    // Hide all pages
    var pages = document.querySelectorAll('.page');
    pages.forEach(function(page) {
      page.classList.remove('active');
    });

    // Show selected page
    var selectedPage = document.getElementById('page-' + pageId);
    if (selectedPage) {
      selectedPage.classList.add('active');
    }

    // Update active link
    var links = document.querySelectorAll('.sidebar a');
    links.forEach(function(link) {
      link.classList.remove('active');
    });
    var activeLink = document.querySelector('.sidebar a[data-page="' + pageId + '"]');
    if (activeLink) {
      activeLink.classList.add('active');
    }

    // Scroll to top
    window.scrollTo(0, 0);

    // Update URL hash without triggering scroll
    if (history.pushState) {
      history.pushState(null, null, '#' + pageId);
    } else {
      window.location.hash = pageId;
    }

  }

  // Initialize floating TOC for a page
  function initFloatingTOC(pageElement) {
    if (!pageElement) return;

    var pageTOC = pageElement.querySelector('.page-toc');
    if (!pageTOC) return;

    // Add ID to page TOC if it doesn't have one
    if (!pageTOC.id) {
      pageTOC.id = 'page-toc-top-' + pageElement.id;
    }

    // Find or create floating TOC for this page
    var floatingTOC = pageElement.querySelector('.floating-toc');
    if (!floatingTOC) {
      floatingTOC = document.createElement('div');
      floatingTOC.className = 'floating-toc';
      floatingTOC.id = 'floating-toc-' + pageElement.id;
      floatingTOC.innerHTML = '<div class="floating-toc-container"><div class="floating-toc-header"><span>Table of Contents 🔻</span></div><div class="floating-toc-content" id="floating-toc-content-' + pageElement.id + '"></div></div>';
      pageElement.insertBefore(floatingTOC, pageElement.firstChild);
    }

    var floatingTOCContent = floatingTOC.querySelector('.floating-toc-content');
    if (!floatingTOCContent) return;

    // Clone the TOC structure
    var tocClone = pageTOC.cloneNode(true);
    tocClone.id = 'floating-toc-clone-' + pageElement.id;
    floatingTOCContent.innerHTML = '';
    floatingTOCContent.appendChild(tocClone);

    // Update all links to use smooth scrolling
    var allTOCLinks = pageElement.querySelectorAll('.page-toc a, .floating-toc-content a');
    allTOCLinks.forEach(function(link) {
      link.addEventListener('click', function(e) {
        var href = this.getAttribute('href');
        if (href && href.startsWith('#')) {
          e.preventDefault();
          var targetId = href.substring(1);
          var targetElement = document.getElementById(targetId);
          if (targetElement) {
            var offset = 20; // Offset from top

            // Function to calculate absolute position from document top
            function getAbsoluteTop(element) {
              var top = 0;
              while (element) {
                top += element.offsetTop;
                element = element.offsetParent;
              }
              return top;
            }

            // Ensure the target element's page is visible
            var targetPage = targetElement.closest('.page');
            if (targetPage && !targetPage.classList.contains('active')) {
              // If target is in a different page, switch to that page first
              var pageId = targetPage.id.replace('page-', '');
              if (typeof showPage === 'function') {
                showPage(pageId);
                // Wait for page to be visible, then scroll
                setTimeout(function() {
                  var absoluteTop = getAbsoluteTop(targetElement);
                  window.scrollTo({
                    top: Math.max(0, absoluteTop - offset),
                    behavior: 'smooth'
                  });
                }, 150);
              }
            } else {
              // Target is in current page, calculate and scroll
              var absoluteTop = getAbsoluteTop(targetElement);
              var scrollTop = window.pageYOffset || document.documentElement.scrollTop;
              var offsetPosition = absoluteTop - offset;

              if (Math.abs(scrollTop - offsetPosition) > 10) {
                window.scrollTo({
                  top: Math.max(0, offsetPosition),
                  behavior: 'smooth'
                });
              }
            }

            // Update URL hash without triggering scroll
            if (history.pushState) {
              history.pushState(null, null, href);
            }
          }
        }
      });
    });

    // Handle scroll to show/hide floating TOC
    var tocTop = pageTOC.getBoundingClientRect().top + window.pageYOffset;
    var tocBottom = tocTop + pageTOC.offsetHeight;

    function updateFloatingTOC() {
      if (!pageElement.classList.contains('active')) {
        floatingTOC.classList.remove('visible');
        return;
      }

      var scrollY = window.pageYOffset || document.documentElement.scrollTop;

      if (scrollY > tocBottom) {
        floatingTOC.classList.add('visible');
      } else {
        floatingTOC.classList.remove('visible');
      }
    }

    // Throttle scroll events
    var ticking = false;
    function handleScroll() {
      if (!ticking) {
        window.requestAnimationFrame(function() {
          updateFloatingTOC();
          ticking = false;
        });
        ticking = true;
      }
    }

    window.addEventListener('scroll', handleScroll);

    // Initial check
    updateFloatingTOC();
  }

  // Initialize on load
  document.addEventListener('DOMContentLoaded', function() {
    // Set up sidebar links
    var links = document.querySelectorAll('.sidebar a');
    links.forEach(function(link) {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        var pageId = this.getAttribute('data-page');
        if (pageId) {
          showPage(pageId);
          // Initialize floating TOC for the new page
          setTimeout(function() {
            var pageElement = document.getElementById('page-' + pageId);
            if (pageElement) {
              initFloatingTOC(pageElement);
            }
          }, 100);
        }
      });
    });

    // Function to handle hash navigation
    function handleHashNavigation() {
      var hash = window.location.hash.substring(1);
      if (!hash) {
        // No hash, show first page by default
        var firstLink = document.querySelector('.sidebar a[data-page]');
        if (firstLink) {
          var firstPageId = firstLink.getAttribute('data-page');
          showPage(firstPageId);
          setTimeout(function() {
            var firstPageElement = document.getElementById('page-' + firstPageId);
            if (firstPageElement) {
              initFloatingTOC(firstPageElement);
            }
          }, 100);
        }
        return;
      }

      // Check if hash is a page ID
      var pageElement = document.getElementById('page-' + hash);
      if (pageElement) {
        // Hash is a page ID, show that page
        showPage(hash);
        setTimeout(function() {
          initFloatingTOC(pageElement);
        }, 100);
        return;
      }

      // Hash might be a section ID, find which page contains it
      var targetElement = document.getElementById(hash);
      if (targetElement) {
        // Find the page that contains this element
        var containingPage = targetElement.closest('.page');
        if (containingPage) {
          var pageId = containingPage.id.replace('page-', '');
          showPage(pageId);
          setTimeout(function() {
            initFloatingTOC(containingPage);
            // Scroll to the target element
            function getAbsoluteTop(element) {
              var top = 0;
              while (element) {
                top += element.offsetTop;
                element = element.offsetParent;
              }
              return top;
            }
            var absoluteTop = getAbsoluteTop(targetElement);
            window.scrollTo({
              top: Math.max(0, absoluteTop - 20),
              behavior: 'smooth'
            });
          }, 200);
          return;
        }
      }

      // Hash doesn't match anything, show first page
      var firstLink = document.querySelector('.sidebar a[data-page]');
      if (firstLink) {
        var firstPageId = firstLink.getAttribute('data-page');
        showPage(firstPageId);
        setTimeout(function() {
          var firstPageElement = document.getElementById('page-' + firstPageId);
          if (firstPageElement) {
            initFloatingTOC(firstPageElement);
          }
        }, 100);
      }
    }

    // Handle hash on load
    handleHashNavigation();

    // Also handle hash changes
    window.addEventListener('hashchange', function() {
      handleHashNavigation();
    });

    // Initialize floating TOC for all pages
    var allPages = document.querySelectorAll('.page');
    allPages.forEach(function(page) {
      initFloatingTOC(page);
    });
  });
</script>

</body>
</html>
